(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";"use restrict";function countTrailingZeros(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}var INT_BITS=32;exports.INT_BITS=INT_BITS,exports.INT_MAX=2147483647,exports.INT_MIN=-1<<INT_BITS-1,exports.sign=function(r){return(r>0)-(r<0)},exports.abs=function(r){var n=r>>INT_BITS-1;return(r^n)-n},exports.min=function(r,n){return n^(r^n)&-(r<n)},exports.max=function(r,n){return r^(r^n)&-(r<n)},exports.isPow2=function(r){return!(r&r-1||!r)},exports.log2=function(r){var n,t;return n=(r>65535)<<4,r>>>=n,t=(r>255)<<3,r>>>=t,n|=t,t=(r>15)<<2,r>>>=t,n|=t,t=(r>3)<<1,r>>>=t,(n|=t)|r>>1},exports.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},exports.popCount=function(r){return r-=r>>>1&1431655765,16843009*((r=(858993459&r)+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},exports.countTrailingZeros=countTrailingZeros,exports.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)+1},exports.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},exports.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var REVERSE_TABLE=new Array(256);!function(r){for(var n=0;n<256;++n){var t=n,e=n,o=7;for(t>>>=1;t;t>>>=1)e<<=1,e|=1&t,--o;r[n]=e<<o&255}}(REVERSE_TABLE),exports.reverse=function(r){return REVERSE_TABLE[255&r]<<24|REVERSE_TABLE[r>>>8&255]<<16|REVERSE_TABLE[r>>>16&255]<<8|REVERSE_TABLE[r>>>24&255]},exports.interleave2=function(r,n){return r&=65535,r=16711935&(r|r<<8),r=252645135&(r|r<<4),r=858993459&(r|r<<2),r=1431655765&(r|r<<1),n&=65535,n=16711935&(n|n<<8),n=252645135&(n|n<<4),n=858993459&(n|n<<2),n=1431655765&(n|n<<1),r|n<<1},exports.deinterleave2=function(r,n){return r=r>>>n&1431655765,r=858993459&(r|r>>>1),r=252645135&(r|r>>>2),r=16711935&(r|r>>>4),(r=65535&(r|r>>>16))<<16>>16},exports.interleave3=function(r,n,t){return r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),r|=n<<1,t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),r|t<<2},exports.deinterleave3=function(r,n){return r=r>>>n&1227133513,r=3272356035&(r|r>>>2),r=251719695&(r|r>>>4),r=4278190335&(r|r>>>8),(r=1023&(r|r>>>16))<<22>>22},exports.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>countTrailingZeros(r)+1};

},{}],2:[function(require,module,exports){
"use strict";function earcut(e,n,t){t=t||2;var r=n&&n.length,i=r?n[0]*t:e.length,x=linkedList(e,0,i,t,!0),a=[];if(!x)return a;var o,l,u,s,v,f,y;if(r&&(x=eliminateHoles(e,n,x,t)),e.length>80*t){o=u=e[0],l=s=e[1];for(var d=t;d<i;d+=t)v=e[d],f=e[d+1],v<o&&(o=v),f<l&&(l=f),v>u&&(u=v),f>s&&(s=f);y=0!==(y=Math.max(u-o,s-l))?1/y:0}return earcutLinked(x,a,t,o,l,y),a}function linkedList(e,n,t,r,i){var x,a;if(i===signedArea(e,n,t,r)>0)for(x=n;x<t;x+=r)a=insertNode(x,e[x],e[x+1],a);else for(x=t-r;x>=n;x-=r)a=insertNode(x,e[x],e[x+1],a);return a&&equals(a,a.next)&&(removeNode(a),a=a.next),a}function filterPoints(e,n){if(!e)return e;n||(n=e);var t,r=e;do{if(t=!1,r.steiner||!equals(r,r.next)&&0!==area(r.prev,r,r.next))r=r.next;else{if(removeNode(r),(r=n=r.prev)===r.next)break;t=!0}}while(t||r!==n);return n}function earcutLinked(e,n,t,r,i,x,a){if(e){!a&&x&&indexCurve(e,r,i,x);for(var o,l,u=e;e.prev!==e.next;)if(o=e.prev,l=e.next,x?isEarHashed(e,r,i,x):isEar(e))n.push(o.i/t),n.push(e.i/t),n.push(l.i/t),removeNode(e),e=l.next,u=l.next;else if((e=l)===u){a?1===a?earcutLinked(e=cureLocalIntersections(e,n,t),n,t,r,i,x,2):2===a&&splitEarcut(e,n,t,r,i,x):earcutLinked(filterPoints(e),n,t,r,i,x,1);break}}}function isEar(e){var n=e.prev,t=e,r=e.next;if(area(n,t,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(pointInTriangle(n.x,n.y,t.x,t.y,r.x,r.y,i.x,i.y)&&area(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function isEarHashed(e,n,t,r){var i=e.prev,x=e,a=e.next;if(area(i,x,a)>=0)return!1;for(var o=i.x<x.x?i.x<a.x?i.x:a.x:x.x<a.x?x.x:a.x,l=i.y<x.y?i.y<a.y?i.y:a.y:x.y<a.y?x.y:a.y,u=i.x>x.x?i.x>a.x?i.x:a.x:x.x>a.x?x.x:a.x,s=i.y>x.y?i.y>a.y?i.y:a.y:x.y>a.y?x.y:a.y,v=zOrder(o,l,n,t,r),f=zOrder(u,s,n,t,r),y=e.nextZ;y&&y.z<=f;){if(y!==e.prev&&y!==e.next&&pointInTriangle(i.x,i.y,x.x,x.y,a.x,a.y,y.x,y.y)&&area(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(y=e.prevZ;y&&y.z>=v;){if(y!==e.prev&&y!==e.next&&pointInTriangle(i.x,i.y,x.x,x.y,a.x,a.y,y.x,y.y)&&area(y.prev,y,y.next)>=0)return!1;y=y.prevZ}return!0}function cureLocalIntersections(e,n,t){var r=e;do{var i=r.prev,x=r.next.next;!equals(i,x)&&intersects(i,r,r.next,x)&&locallyInside(i,x)&&locallyInside(x,i)&&(n.push(i.i/t),n.push(r.i/t),n.push(x.i/t),removeNode(r),removeNode(r.next),r=e=x),r=r.next}while(r!==e);return r}function splitEarcut(e,n,t,r,i,x){var a=e;do{for(var o=a.next.next;o!==a.prev;){if(a.i!==o.i&&isValidDiagonal(a,o)){var l=splitPolygon(a,o);return a=filterPoints(a,a.next),l=filterPoints(l,l.next),earcutLinked(a,n,t,r,i,x),void earcutLinked(l,n,t,r,i,x)}o=o.next}a=a.next}while(a!==e)}function eliminateHoles(e,n,t,r){var i,x,a,o=[];for(i=0,x=n.length;i<x;i++)(a=linkedList(e,n[i]*r,i<x-1?n[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),o.push(getLeftmost(a));for(o.sort(compareX),i=0;i<o.length;i++)eliminateHole(o[i],t),t=filterPoints(t,t.next);return t}function compareX(e,n){return e.x-n.x}function eliminateHole(e,n){if(n=findHoleBridge(e,n)){var t=splitPolygon(n,e);filterPoints(t,t.next)}}function findHoleBridge(e,n){var t,r=n,i=e.x,x=e.y,a=-1/0;do{if(x<=r.y&&x>=r.next.y&&r.next.y!==r.y){var o=r.x+(x-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=i&&o>a){if(a=o,o===i){if(x===r.y)return r;if(x===r.next.y)return r.next}t=r.x<r.next.x?r:r.next}}r=r.next}while(r!==n);if(!t)return null;if(i===a)return t.prev;var l,u=t,s=t.x,v=t.y,f=1/0;for(r=t.next;r!==u;)i>=r.x&&r.x>=s&&i!==r.x&&pointInTriangle(x<v?i:a,x,s,v,x<v?a:i,x,r.x,r.y)&&((l=Math.abs(x-r.y)/(i-r.x))<f||l===f&&r.x>t.x)&&locallyInside(r,e)&&(t=r,f=l),r=r.next;return t}function indexCurve(e,n,t,r){var i=e;do{null===i.z&&(i.z=zOrder(i.x,i.y,n,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,sortLinked(i)}function sortLinked(e){var n,t,r,i,x,a,o,l,u=1;do{for(t=e,e=null,x=null,a=0;t;){for(a++,r=t,o=0,n=0;n<u&&(o++,r=r.nextZ);n++);for(l=u;o>0||l>0&&r;)0!==o&&(0===l||!r||t.z<=r.z)?(i=t,t=t.nextZ,o--):(i=r,r=r.nextZ,l--),x?x.nextZ=i:e=i,i.prevZ=x,x=i;t=r}x.nextZ=null,u*=2}while(a>1);return e}function zOrder(e,n,t,r,i){return e=32767*(e-t)*i,n=32767*(n-r)*i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),n=16711935&(n|n<<8),n=252645135&(n|n<<4),n=858993459&(n|n<<2),n=1431655765&(n|n<<1),e|n<<1}function getLeftmost(e){var n=e,t=e;do{n.x<t.x&&(t=n),n=n.next}while(n!==e);return t}function pointInTriangle(e,n,t,r,i,x,a,o){return(i-a)*(n-o)-(e-a)*(x-o)>=0&&(e-a)*(r-o)-(t-a)*(n-o)>=0&&(t-a)*(x-o)-(i-a)*(r-o)>=0}function isValidDiagonal(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!intersectsPolygon(e,n)&&locallyInside(e,n)&&locallyInside(n,e)&&middleInside(e,n)}function area(e,n,t){return(n.y-e.y)*(t.x-n.x)-(n.x-e.x)*(t.y-n.y)}function equals(e,n){return e.x===n.x&&e.y===n.y}function intersects(e,n,t,r){return!!(equals(e,n)&&equals(t,r)||equals(e,r)&&equals(t,n))||area(e,n,t)>0!=area(e,n,r)>0&&area(t,r,e)>0!=area(t,r,n)>0}function intersectsPolygon(e,n){var t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==n.i&&t.next.i!==n.i&&intersects(t,t.next,e,n))return!0;t=t.next}while(t!==e);return!1}function locallyInside(e,n){return area(e.prev,e,e.next)<0?area(e,n,e.next)>=0&&area(e,e.prev,n)>=0:area(e,n,e.prev)<0||area(e,e.next,n)<0}function middleInside(e,n){var t=e,r=!1,i=(e.x+n.x)/2,x=(e.y+n.y)/2;do{t.y>x!=t.next.y>x&&t.next.y!==t.y&&i<(t.next.x-t.x)*(x-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==e);return r}function splitPolygon(e,n){var t=new Node(e.i,e.x,e.y),r=new Node(n.i,n.x,n.y),i=e.next,x=n.prev;return e.next=n,n.prev=e,t.next=i,i.prev=t,r.next=t,t.prev=r,x.next=r,r.prev=x,r}function insertNode(e,n,t,r){var i=new Node(e,n,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function removeNode(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Node(e,n,t){this.i=e,this.x=n,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(e,n,t,r){for(var i=0,x=n,a=t-r;x<t;x+=r)i+=(e[a]-e[x])*(e[x+1]+e[a+1]),a=x;return i}module.exports=earcut,module.exports.default=earcut,earcut.deviation=function(e,n,t,r){var i=n&&n.length,x=i?n[0]*t:e.length,a=Math.abs(signedArea(e,0,x,t));if(i)for(var o=0,l=n.length;o<l;o++){var u=n[o]*t,s=o<l-1?n[o+1]*t:e.length;a-=Math.abs(signedArea(e,u,s,t))}var v=0;for(o=0;o<r.length;o+=3){var f=r[o]*t,y=r[o+1]*t,d=r[o+2]*t;v+=Math.abs((e[f]-e[d])*(e[y+1]-e[f+1])-(e[f]-e[y])*(e[d+1]-e[f+1]))}return 0===a&&0===v?0:Math.abs((v-a)/a)},earcut.flatten=function(e){for(var n=e[0][0].length,t={vertices:[],holes:[],dimensions:n},r=0,i=0;i<e.length;i++){for(var x=0;x<e[i].length;x++)for(var a=0;a<n;a++)t.vertices.push(e[i][x][a]);i>0&&(r+=e[i-1].length,t.holes.push(r))}return t};

},{}],3:[function(require,module,exports){
"use strict";function Events(){}function EE(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function EventEmitter(){this._events=new Events,this._eventsCount=0}var has=Object.prototype.hasOwnProperty,prefix="~";Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(prefix=!1)),EventEmitter.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)has.call(e,t)&&n.push(prefix?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},EventEmitter.prototype.listeners=function(e,t){var n=prefix?prefix+e:e,r=this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var s=0,i=r.length,o=new Array(i);s<i;s++)o[s]=r[s].fn;return o},EventEmitter.prototype.emit=function(e,t,n,r,s,i){var o=prefix?prefix+e:e;if(!this._events[o])return!1;var v,f,h=this._events[o],c=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),c){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,n),!0;case 4:return h.fn.call(h.context,t,n,r),!0;case 5:return h.fn.call(h.context,t,n,r,s),!0;case 6:return h.fn.call(h.context,t,n,r,s,i),!0}for(f=1,v=new Array(c-1);f<c;f++)v[f-1]=arguments[f];h.fn.apply(h.context,v)}else{var p,a=h.length;for(f=0;f<a;f++)switch(h[f].once&&this.removeListener(e,h[f].fn,void 0,!0),c){case 1:h[f].fn.call(h[f].context);break;case 2:h[f].fn.call(h[f].context,t);break;case 3:h[f].fn.call(h[f].context,t,n);break;case 4:h[f].fn.call(h[f].context,t,n,r);break;default:if(!v)for(p=1,v=new Array(c-1);p<c;p++)v[p-1]=arguments[p];h[f].fn.apply(h[f].context,v)}}return!0},EventEmitter.prototype.on=function(e,t,n){var r=new EE(t,n||this),s=prefix?prefix+e:e;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],r]:this._events[s].push(r):(this._events[s]=r,this._eventsCount++),this},EventEmitter.prototype.once=function(e,t,n){var r=new EE(t,n||this,!0),s=prefix?prefix+e:e;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],r]:this._events[s].push(r):(this._events[s]=r,this._eventsCount++),this},EventEmitter.prototype.removeListener=function(e,t,n,r){var s=prefix?prefix+e:e;if(!this._events[s])return this;if(!t)return 0==--this._eventsCount?this._events=new Events:delete this._events[s],this;var i=this._events[s];if(i.fn)i.fn!==t||r&&!i.once||n&&i.context!==n||(0==--this._eventsCount?this._events=new Events:delete this._events[s]);else{for(var o=0,v=[],f=i.length;o<f;o++)(i[o].fn!==t||r&&!i[o].once||n&&i[o].context!==n)&&v.push(i[o]);v.length?this._events[s]=1===v.length?v[0]:v:0==--this._eventsCount?this._events=new Events:delete this._events[s]}return this},EventEmitter.prototype.removeAllListeners=function(e){var t;return e?(t=prefix?prefix+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new Events:delete this._events[t])):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prototype.setMaxListeners=function(){return this},EventEmitter.prefixed=prefix,EventEmitter.EventEmitter=EventEmitter,"undefined"!=typeof module&&(module.exports=EventEmitter);

},{}],4:[function(require,module,exports){
function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,i,n,s,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var h=new Error('Uncaught, unspecified "error" event. ('+t+")");throw h.context=t,h}if(i=this._events[e],isUndefined(i))return!1;if(isFunction(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),i.apply(this,s)}else if(isObject(i))for(s=Array.prototype.slice.call(arguments,1),n=(o=i.slice()).length,r=0;r<n;r++)o[r].apply(this,s);return!0},EventEmitter.prototype.addListener=function(e,t){var i;if(!isFunction(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned&&(i=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var n=!1;return i.listener=t,this.on(e,i),this},EventEmitter.prototype.removeListener=function(e,t){var i,n,s,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=this._events[e],s=i.length,n=-1,i===t||isFunction(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(i)){for(r=s;r-- >0;)if(i[r]===t||i[r].listener&&i[r].listener===t){n=r;break}if(n<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[e],isFunction(i))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){return this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(isFunction(t))return 1;if(t)return t.length}return 0},EventEmitter.listenerCount=function(e,t){return e.listenerCount(t)};

},{}],5:[function(require,module,exports){
!function(e){var i=/iPhone/i,o=/iPod/i,t=/iPad/i,n=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,d=/Android/i,s=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,b=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,r=/Windows Phone/i,h=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,a=/BlackBerry/i,l=/BB10/i,p=/Opera Mini/i,f=/(CriOS|Chrome)(?=.*\bMobile\b)/i,u=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,c=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),w=function(e,i){return e.test(i)},v=function(e){var v=e||navigator.userAgent,A=v.split("[FBAN");if(void 0!==A[1]&&(v=A[0]),void 0!==(A=v.split("Twitter"))[1]&&(v=A[0]),this.apple={phone:w(i,v),ipod:w(o,v),tablet:!w(i,v)&&w(t,v),device:w(i,v)||w(o,v)||w(t,v)},this.amazon={phone:w(s,v),tablet:!w(s,v)&&w(b,v),device:w(s,v)||w(b,v)},this.android={phone:w(s,v)||w(n,v),tablet:!w(s,v)&&!w(n,v)&&(w(b,v)||w(d,v)),device:w(s,v)||w(b,v)||w(n,v)||w(d,v)},this.windows={phone:w(r,v),tablet:w(h,v),device:w(r,v)||w(h,v)},this.other={blackberry:w(a,v),blackberry10:w(l,v),opera:w(p,v),firefox:w(u,v),chrome:w(f,v),device:w(a,v)||w(l,v)||w(p,v)||w(u,v)||w(f,v)},this.seven_inch=w(c,v),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},A=function(){var e=new v;return e.Class=v,e};"undefined"!=typeof module&&module.exports&&"undefined"==typeof window?module.exports=v:"undefined"!=typeof module&&module.exports&&"undefined"!=typeof window?module.exports=A():"function"==typeof define&&define.amd?define("isMobile",[],e.isMobile=A()):e.isMobile=A()}(this);

},{}],6:[function(require,module,exports){
"use strict";function _classCallCheck(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function _addMiniSignalBinding(n,i){return n._head?(n._tail._next=i,i._prev=n._tail,n._tail=i):(n._head=i,n._tail=i),i._owner=n,i}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function n(n,i){for(var t=0;t<i.length;t++){var e=i[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}return function(i,t,e){return t&&n(i.prototype,t),e&&n(i,e),i}}(),MiniSignalBinding=function(){function n(i,t,e){void 0===t&&(t=!1),_classCallCheck(this,n),this._fn=i,this._once=t,this._thisArg=e,this._next=this._prev=this._owner=null}return _createClass(n,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),n}(),MiniSignal=function(){function n(){_classCallCheck(this,n),this._head=this._tail=void 0}return _createClass(n,[{key:"handlers",value:function(){var n=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],i=this._head;if(n)return!!i;for(var t=[];i;)t.push(i),i=i._next;return t}},{key:"has",value:function(n){if(!(n instanceof MiniSignalBinding))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return n._owner===this}},{key:"dispatch",value:function(){var n=this._head;if(!n)return!1;for(;n;)n._once&&this.detach(n),n._fn.apply(n._thisArg,arguments),n=n._next;return!0}},{key:"add",value:function(n){var i=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof n)throw new Error("MiniSignal#add(): First arg must be a Function.");return _addMiniSignalBinding(this,new MiniSignalBinding(n,!1,i))}},{key:"once",value:function(n){var i=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof n)throw new Error("MiniSignal#once(): First arg must be a Function.");return _addMiniSignalBinding(this,new MiniSignalBinding(n,!0,i))}},{key:"detach",value:function(n){if(!(n instanceof MiniSignalBinding))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return n._owner!==this?this:(n._prev&&(n._prev._next=n._next),n._next&&(n._next._prev=n._prev),n===this._head?(this._head=n._next,null===n._next&&(this._tail=null)):n===this._tail&&(this._tail=n._prev,this._tail._next=null),n._owner=null,this)}},{key:"detachAll",value:function(){var n=this._head;if(!n)return this;for(this._head=this._tail=null;n;)n._owner=null,n=n._next;return this}}]),n}();MiniSignal.MiniSignalBinding=MiniSignalBinding,exports.default=MiniSignal,module.exports=exports.default;

},{}],7:[function(require,module,exports){
module.exports=require("./lib/EntityManager.js");

},{"./lib/EntityManager.js":9}],8:[function(require,module,exports){
function Entity(){this.id=nextId++,this._manager=null,this._Components=[],this._tags=[],EventEmitter.call(this)}var EventEmitter=require("events").EventEmitter,util=require("util");module.exports=Entity,util.inherits(Entity,EventEmitter),Entity.prototype.__init=function(){this.id=nextId++,this._manager=null,this._Components.length=0,this._tags.length=0};var nextId=0;Entity.prototype.addComponent=function(t){return this._manager.entityAddComponent(this,t),this},Entity.prototype.removeComponent=function(t){return this._manager.entityRemoveComponent(this,t),this},Entity.prototype.hasComponent=function(t){return!!~this._Components.indexOf(t)},Entity.prototype.removeAllComponents=function(){return this._manager.entityRemoveAllComponents(this)},Entity.prototype.hasAllComponents=function(t){for(var n=!0,e=0;e<t.length;e++){var i=t[e];n&=!!~this._Components.indexOf(i)}return n},Entity.prototype.hasTag=function(t){return!!~this._tags.indexOf(t)},Entity.prototype.addTag=function(t){return this._manager.entityAddTag(this,t),this},Entity.prototype.removeTag=function(t){return this._manager.entityRemoveTag(this,t),this},Entity.prototype.remove=function(){return this._manager.removeEntity(this)};

},{"events":4,"util":202}],9:[function(require,module,exports){
function EntityManager(){this._tags={},this._entities=[],this._groups={},this._entityPool=createPool(function(){return new Entity}),this._componentPools={}}function Group(t,e){this.Components=t||[],this.entities=e||[]}function componentPropertyName(t){var e=getName(t);if(!e)throw new Error("Component property name is empty, try naming your component function");return e.charAt(0).toLowerCase()+e.slice(1)}function groupKey(t){for(var e=[],n=0;n<t.length;n++){var o=t[n];e.push(getName(o))}return e.map(function(t){return t.toLowerCase()}).sort().join("-")}module.exports=function(){return new EntityManager};var Entity=require("./Entity.js"),createPool=require("reuse-pool"),getName=require("typedef").getName;EntityManager.prototype.createEntity=function(){var t=this._entityPool.get();return this._entities.push(t),t._manager=this,t},EntityManager.prototype.removeEntitiesByTag=function(t){var e=this._tags[t];if(e)for(var n=e.length-1;n>=0;n--){e[n].remove()}},EntityManager.prototype.removeAllEntities=function(){for(var t=this._entities.length-1;t>=0;t--)this._entities[t].remove()},EntityManager.prototype.removeEntity=function(t){var e=this._entities.indexOf(t);if(!~e)throw new Error("Tried to remove entity not in list");this.entityRemoveAllComponents(t),this._entities.splice(e,1),t._tags.length=0;for(var n in this._tags){var o=this._tags[n],i=o.indexOf(t);~i&&o.splice(i,1)}t._manager=null,this._entityPool.recycle(t),t.removeAllListeners()},EntityManager.prototype.entityAddTag=function(t,e){var n=this._tags[e];n||(n=this._tags[e]=[]),~n.indexOf(t)||(n.push(t),t._tags.push(e))},EntityManager.prototype.entityRemoveTag=function(t,e){var n=this._tags[e];if(n){var o=n.indexOf(t);~o&&(n.splice(o,1),t._tags.splice(t._tags.indexOf(e),1))}},EntityManager.prototype.entityAddComponent=function(t,e){if(!~t._Components.indexOf(e)){t._Components.push(e);var n=componentPropertyName(e);t[n]=new e(t),t[n].entity=t;for(var o in this._groups){var i=this._groups[o];~i.Components.indexOf(e)&&(t.hasAllComponents(i.Components)&&(~i.entities.indexOf(t)||i.entities.push(t)))}t.emit("component added",e)}},EntityManager.prototype.entityRemoveAllComponents=function(t){for(var e=t._Components,n=e.length-1;n>=0;n--){var o=e[n];t.removeComponent(o)}},EntityManager.prototype.entityRemoveComponent=function(t,e){var n=t._Components.indexOf(e);if(~n){t.emit("component removed",e);for(var o in this._groups){var i=this._groups[o];if(~i.Components.indexOf(e)&&t.hasAllComponents(i.Components)){var r=i.entities.indexOf(t);~r&&i.entities.splice(r,1)}}var s=componentPropertyName(e);t._Components.splice(n,1),delete t[s]}},EntityManager.prototype.queryComponents=function(t){var e=this._groups[groupKey(t)];return e||(e=this._indexGroup(t)),e.entities},EntityManager.prototype.queryTag=function(t){var e=this._tags[t];return void 0===e&&(e=this._tags[t]=[]),e},EntityManager.prototype.count=function(){return this._entities.length},EntityManager.prototype._indexGroup=function(t){var e=groupKey(t);if(!this._groups[e]){for(var n=this._groups[e]=new Group(t),o=0;o<this._entities.length;o++){var i=this._entities[o];i.hasAllComponents(t)&&n.entities.push(i)}return n}};

},{"./Entity.js":8,"reuse-pool":192,"typedef":193}],10:[function(require,module,exports){
"use strict";function toObject(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function shouldUseNative(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(r).map(function(e){return r[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=shouldUseNative()?Object.assign:function(e,r){for(var t,n,o=toObject(e),a=1;a<arguments.length;a++){t=Object(arguments[a]);for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);if(getOwnPropertySymbols){n=getOwnPropertySymbols(t);for(var c=0;c<n.length;c++)propIsEnumerable.call(t,n[c])&&(o[n[c]]=t[n[c]])}}return o};

},{}],11:[function(require,module,exports){
"use strict";module.exports=function(e,r){r=r||{};for(var o={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},t=o.parser[r.strictMode?"strict":"loose"].exec(e),s={},a=14;a--;)s[o.key[a]]=t[a]||"";return s[o.q.name]={},s[o.key[12]].replace(o.q.parser,function(e,r,t){r&&(s[o.q.name][r]=t)}),s};

},{}],12:[function(require,module,exports){
(function (process){
function normalizeArray(r,t){for(var e=0,n=r.length-1;n>=0;n--){var s=r[n];"."===s?r.splice(n,1):".."===s?(r.splice(n,1),e++):e&&(r.splice(n,1),e--)}if(t)for(;e--;e)r.unshift("..");return r}function filter(r,t){if(r.filter)return r.filter(t);for(var e=[],n=0;n<r.length;n++)t(r[n],n,r)&&e.push(r[n]);return e}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,splitPath=function(r){return splitPathRe.exec(r).slice(1)};exports.resolve=function(){for(var r="",t=!1,e=arguments.length-1;e>=-1&&!t;e--){var n=e>=0?arguments[e]:process.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(r=n+"/"+r,t="/"===n.charAt(0))}return r=normalizeArray(filter(r.split("/"),function(r){return!!r}),!t).join("/"),(t?"/":"")+r||"."},exports.normalize=function(r){var t=exports.isAbsolute(r),e="/"===substr(r,-1);return(r=normalizeArray(filter(r.split("/"),function(r){return!!r}),!t).join("/"))||t||(r="."),r&&e&&(r+="/"),(t?"/":"")+r},exports.isAbsolute=function(r){return"/"===r.charAt(0)},exports.join=function(){var r=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(r,function(r,t){if("string"!=typeof r)throw new TypeError("Arguments to path.join must be strings");return r}).join("/"))},exports.relative=function(r,t){function e(r){for(var t=0;t<r.length&&""===r[t];t++);for(var e=r.length-1;e>=0&&""===r[e];e--);return t>e?[]:r.slice(t,e-t+1)}r=exports.resolve(r).substr(1),t=exports.resolve(t).substr(1);for(var n=e(r.split("/")),s=e(t.split("/")),i=Math.min(n.length,s.length),o=i,u=0;u<i;u++)if(n[u]!==s[u]){o=u;break}for(var l=[],u=o;u<n.length;u++)l.push("..");return(l=l.concat(s.slice(o))).join("/")},exports.sep="/",exports.delimiter=":",exports.dirname=function(r){var t=splitPath(r),e=t[0],n=t[1];return e||n?(n&&(n=n.substr(0,n.length-1)),e+n):"."},exports.basename=function(r,t){var e=splitPath(r)[2];return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e},exports.extname=function(r){return splitPath(r)[3]};var substr="b"==="ab".substr(-1)?function(r,t,e){return r.substr(t,e)}:function(r,t,e){return t<0&&(t=r.length+t),r.substr(t,e)};

}).call(this,require('_process'))
},{"_process":179}],13:[function(require,module,exports){
var EMPTY_ARRAY_BUFFER=new ArrayBuffer(0),Buffer=function(e,t,f,r){this.gl=e,this.buffer=e.createBuffer(),this.type=t||e.ARRAY_BUFFER,this.drawType=r||e.STATIC_DRAW,this.data=EMPTY_ARRAY_BUFFER,f&&this.upload(f),this._updateID=0};Buffer.prototype.upload=function(e,t,f){f||this.bind();var r=this.gl;e=e||this.data,t=t||0,this.data.byteLength>=e.byteLength?r.bufferSubData(this.type,t,e):r.bufferData(this.type,e,this.drawType),this.data=e},Buffer.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},Buffer.createVertexBuffer=function(e,t,f){return new Buffer(e,e.ARRAY_BUFFER,t,f)},Buffer.createIndexBuffer=function(e,t,f){return new Buffer(e,e.ELEMENT_ARRAY_BUFFER,t,f)},Buffer.create=function(e,t,f,r){return new Buffer(e,t,f,r)},Buffer.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},module.exports=Buffer;

},{}],14:[function(require,module,exports){
var Texture=require("./GLTexture"),Framebuffer=function(e,t,r){this.gl=e,this.framebuffer=e.createFramebuffer(),this.stencil=null,this.texture=null,this.width=t||100,this.height=r||100};Framebuffer.prototype.enableTexture=function(e){var t=this.gl;this.texture=e||new Texture(t),this.texture.bind(),this.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0)},Framebuffer.prototype.enableStencil=function(){if(!this.stencil){var e=this.gl;this.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.stencil),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.width,this.height)}},Framebuffer.prototype.clear=function(e,t,r,i){this.bind();var f=this.gl;f.clearColor(e,t,r,i),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT)},Framebuffer.prototype.bind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)},Framebuffer.prototype.unbind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)},Framebuffer.prototype.resize=function(e,t){var r=this.gl;this.width=e,this.height=t,this.texture&&this.texture.uploadData(null,e,t),this.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,this.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e,t))},Framebuffer.prototype.destroy=function(){var e=this.gl;this.texture&&this.texture.destroy(),e.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},Framebuffer.createRGBA=function(e,t,r,i){var f=Texture.fromData(e,null,t,r);f.enableNearestScaling(),f.enableWrapClamp();var n=new Framebuffer(e,t,r);return n.enableTexture(f),n.unbind(),n},Framebuffer.createFloat32=function(e,t,r,i){var f=new Texture.fromData(e,i,t,r);f.enableNearestScaling(),f.enableWrapClamp();var n=new Framebuffer(e,t,r);return n.enableTexture(f),n.unbind(),n},module.exports=Framebuffer;

},{"./GLTexture":16}],15:[function(require,module,exports){
var compileProgram=require("./shader/compileProgram"),extractAttributes=require("./shader/extractAttributes"),extractUniforms=require("./shader/extractUniforms"),setPrecision=require("./shader/setPrecision"),generateUniformAccessObject=require("./shader/generateUniformAccessObject"),Shader=function(r,t,e,i,s){this.gl=r,i&&(t=setPrecision(t,i),e=setPrecision(e,i)),this.program=compileProgram(r,t,e,s),this.attributes=extractAttributes(r,this.program),this.uniformData=extractUniforms(r,this.program),this.uniforms=generateUniformAccessObject(r,this.uniformData)};Shader.prototype.bind=function(){return this.gl.useProgram(this.program),this},Shader.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null;this.gl.deleteProgram(this.program)},module.exports=Shader;

},{"./shader/compileProgram":21,"./shader/extractAttributes":23,"./shader/extractUniforms":24,"./shader/generateUniformAccessObject":25,"./shader/setPrecision":29}],16:[function(require,module,exports){
var Texture=function(t,e,i,r,T){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=i||-1,this.format=r||t.RGBA,this.type=T||t.UNSIGNED_BYTE};Texture.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var i=t.videoWidth||t.width,r=t.videoHeight||t.height;r!==this.height||i!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=i,this.height=r};var FLOATING_POINT_AVAILABLE=!1;Texture.prototype.uploadData=function(t,e,i){this.bind();var r=this.gl;if(t instanceof Float32Array){if(!FLOATING_POINT_AVAILABLE){if(!r.getExtension("OES_texture_float"))throw new Error("floating point textures not available");FLOATING_POINT_AVAILABLE=!0}this.type=r.FLOAT}else this.type=this.type||r.UNSIGNED_BYTE;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||i!==this.height?r.texImage2D(r.TEXTURE_2D,0,this.format,e,i,0,this.format,this.type,t||null):r.texSubImage2D(r.TEXTURE_2D,0,0,0,e,i,this.format,this.type,t||null),this.width=e,this.height=i},Texture.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},Texture.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},Texture.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},Texture.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},Texture.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},Texture.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},Texture.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},Texture.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},Texture.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},Texture.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},Texture.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},Texture.fromSource=function(t,e,i){var r=new Texture(t);return r.premultiplyAlpha=i||!1,r.upload(e),r},Texture.fromData=function(t,e,i,r){var T=new Texture(t);return T.uploadData(e,i,r),T},module.exports=Texture;

},{}],17:[function(require,module,exports){
function VertexArrayObject(t,e){if(this.nativeVaoExtension=null,VertexArrayObject.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var r=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(r),attribState:new Array(r)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var setVertexAttribArrays=require("./setVertexAttribArrays");VertexArrayObject.prototype.constructor=VertexArrayObject,module.exports=VertexArrayObject,VertexArrayObject.FORCE_NATIVE=!1,VertexArrayObject.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},VertexArrayObject.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},VertexArrayObject.prototype.activate=function(){for(var t=this.gl,e=null,r=0;r<this.attributes.length;r++){var i=this.attributes[r];e!==i.buffer&&(i.buffer.bind(),e=i.buffer),t.vertexAttribPointer(i.attribute.location,i.attribute.size,i.type||t.FLOAT,i.normalized||!1,i.stride||0,i.start||0)}return setVertexAttribArrays(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},VertexArrayObject.prototype.addAttribute=function(t,e,r,i,a,n){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:r||this.gl.FLOAT,normalized:i||!1,stride:a||0,start:n||0}),this.dirty=!0,this},VertexArrayObject.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},VertexArrayObject.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},VertexArrayObject.prototype.draw=function(t,e,r){var i=this.gl;return this.indexBuffer?i.drawElements(t,e||this.indexBuffer.data.length,i.UNSIGNED_SHORT,2*(r||0)):i.drawArrays(t,r,e||this.getSize()),this},VertexArrayObject.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},VertexArrayObject.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)};

},{"./setVertexAttribArrays":20}],18:[function(require,module,exports){
var createContext=function(e,t){var r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);if(!r)throw new Error("This browser does not support webGL. Try using the canvas renderer");return r};module.exports=createContext;

},{}],19:[function(require,module,exports){
var gl={createContext:require("./createContext"),setVertexAttribArrays:require("./setVertexAttribArrays"),GLBuffer:require("./GLBuffer"),GLFramebuffer:require("./GLFramebuffer"),GLShader:require("./GLShader"),GLTexture:require("./GLTexture"),VertexArrayObject:require("./VertexArrayObject"),shader:require("./shader")};"undefined"!=typeof module&&module.exports&&(module.exports=gl),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=gl);

},{"./GLBuffer":13,"./GLFramebuffer":14,"./GLShader":15,"./GLTexture":16,"./VertexArrayObject":17,"./createContext":18,"./setVertexAttribArrays":20,"./shader":26}],20:[function(require,module,exports){
var setVertexAttribArrays=function(t,r,e){var a;if(e){var i=e.tempAttribState,b=e.attribState;for(a=0;a<i.length;a++)i[a]=!1;for(a=0;a<r.length;a++)i[r[a].attribute.location]=!0;for(a=0;a<b.length;a++)b[a]!==i[a]&&(b[a]=i[a],e.attribState[a]?t.enableVertexAttribArray(a):t.disableVertexAttribArray(a))}else for(a=0;a<r.length;a++){var l=r[a];t.enableVertexAttribArray(l.attribute.location)}};module.exports=setVertexAttribArrays;

},{}],21:[function(require,module,exports){
var compileProgram=function(r,e,o,a){var t=compileShader(r,r.VERTEX_SHADER,e),g=compileShader(r,r.FRAGMENT_SHADER,o),l=r.createProgram();if(r.attachShader(l,t),r.attachShader(l,g),a)for(var n in a)r.bindAttribLocation(l,a[n],n);return r.linkProgram(l),r.getProgramParameter(l,r.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",r.getProgramParameter(l,r.VALIDATE_STATUS)),console.error("gl.getError()",r.getError()),""!==r.getProgramInfoLog(l)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(l)),r.deleteProgram(l),l=null),r.deleteShader(t),r.deleteShader(g),l},compileShader=function(r,e,o){var a=r.createShader(e);return r.shaderSource(a,o),r.compileShader(a),r.getShaderParameter(a,r.COMPILE_STATUS)?a:(console.log(r.getShaderInfoLog(a)),null)};module.exports=compileProgram;

},{}],22:[function(require,module,exports){
var defaultValue=function(r,e){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return booleanArray(2*e);case"bvec3":return booleanArray(3*e);case"bvec4":return booleanArray(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},booleanArray=function(r){for(var e=new Array(r),a=0;a<e.length;a++)e[a]=!1;return e};module.exports=defaultValue;

},{}],23:[function(require,module,exports){
var mapType=require("./mapType"),mapSize=require("./mapSize"),extractAttributes=function(t,e){for(var r={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<i;a++){var o=t.getActiveAttrib(e,a),p=mapType(t,o.type);r[o.name]={type:p,size:mapSize(p),location:t.getAttribLocation(e,o.name),pointer:pointer}}return r},pointer=function(t,e,r,i){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,r||0,i||0)};module.exports=extractAttributes;

},{"./mapSize":27,"./mapType":28}],24:[function(require,module,exports){
var mapType=require("./mapType"),defaultValue=require("./defaultValue"),extractUniforms=function(e,a){for(var r={},t=e.getProgramParameter(a,e.ACTIVE_UNIFORMS),i=0;i<t;i++){var o=e.getActiveUniform(a,i),u=o.name.replace(/\[.*?\]/,""),m=mapType(e,o.type);r[u]={type:m,size:o.size,location:e.getUniformLocation(a,u),value:defaultValue(m,o.size)}}return r};module.exports=extractUniforms;

},{"./defaultValue":22,"./mapType":28}],25:[function(require,module,exports){
function generateSetter(n,i){return function(t){this.data[n].value=t;var f=this.data[n].location;1===i.size?GLSL_SINGLE_SETTERS[i.type](this.gl,f,t):GLSL_ARRAY_SETTERS[i.type](this.gl,f,t)}}function getUniformGroup(n,i){for(var t=i,f=0;f<n.length-1;f++){var o=t[n[f]]||{data:{}};t[n[f]]=o,t=o}return t}var generateUniformAccessObject=function(n,i){var t={data:{}};t.gl=n;for(var f=Object.keys(i),o=0;o<f.length;o++){var e=f[o],u=e.split("."),r=u[u.length-1],c=getUniformGroup(u,t),v=i[e];c.data[r]=v,c.gl=n,Object.defineProperty(c,r,{get:generateGetter(r),set:generateSetter(r,v)})}return t},generateGetter=function(n){return function(){return this.data[n].value}},GLSL_SINGLE_SETTERS={float:function(n,i,t){n.uniform1f(i,t)},vec2:function(n,i,t){n.uniform2f(i,t[0],t[1])},vec3:function(n,i,t){n.uniform3f(i,t[0],t[1],t[2])},vec4:function(n,i,t){n.uniform4f(i,t[0],t[1],t[2],t[3])},int:function(n,i,t){n.uniform1i(i,t)},ivec2:function(n,i,t){n.uniform2i(i,t[0],t[1])},ivec3:function(n,i,t){n.uniform3i(i,t[0],t[1],t[2])},ivec4:function(n,i,t){n.uniform4i(i,t[0],t[1],t[2],t[3])},bool:function(n,i,t){n.uniform1i(i,t)},bvec2:function(n,i,t){n.uniform2i(i,t[0],t[1])},bvec3:function(n,i,t){n.uniform3i(i,t[0],t[1],t[2])},bvec4:function(n,i,t){n.uniform4i(i,t[0],t[1],t[2],t[3])},mat2:function(n,i,t){n.uniformMatrix2fv(i,!1,t)},mat3:function(n,i,t){n.uniformMatrix3fv(i,!1,t)},mat4:function(n,i,t){n.uniformMatrix4fv(i,!1,t)},sampler2D:function(n,i,t){n.uniform1i(i,t)}},GLSL_ARRAY_SETTERS={float:function(n,i,t){n.uniform1fv(i,t)},vec2:function(n,i,t){n.uniform2fv(i,t)},vec3:function(n,i,t){n.uniform3fv(i,t)},vec4:function(n,i,t){n.uniform4fv(i,t)},int:function(n,i,t){n.uniform1iv(i,t)},ivec2:function(n,i,t){n.uniform2iv(i,t)},ivec3:function(n,i,t){n.uniform3iv(i,t)},ivec4:function(n,i,t){n.uniform4iv(i,t)},bool:function(n,i,t){n.uniform1iv(i,t)},bvec2:function(n,i,t){n.uniform2iv(i,t)},bvec3:function(n,i,t){n.uniform3iv(i,t)},bvec4:function(n,i,t){n.uniform4iv(i,t)},sampler2D:function(n,i,t){n.uniform1iv(i,t)}};module.exports=generateUniformAccessObject;

},{}],26:[function(require,module,exports){
module.exports={compileProgram:require("./compileProgram"),defaultValue:require("./defaultValue"),extractAttributes:require("./extractAttributes"),extractUniforms:require("./extractUniforms"),generateUniformAccessObject:require("./generateUniformAccessObject"),setPrecision:require("./setPrecision"),mapSize:require("./mapSize"),mapType:require("./mapType")};

},{"./compileProgram":21,"./defaultValue":22,"./extractAttributes":23,"./extractUniforms":24,"./generateUniformAccessObject":25,"./mapSize":27,"./mapType":28,"./setPrecision":29}],27:[function(require,module,exports){
var mapSize=function(e){return GLSL_TO_SIZE[e]},GLSL_TO_SIZE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};module.exports=mapSize;

},{}],28:[function(require,module,exports){
var mapType=function(L,T){if(!GL_TABLE){var _=Object.keys(GL_TO_GLSL_TYPES);GL_TABLE={};for(var O=0;O<_.length;++O){var e=_[O];GL_TABLE[L[e]]=GL_TO_GLSL_TYPES[e]}}return GL_TABLE[T]},GL_TABLE=null,GL_TO_GLSL_TYPES={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};module.exports=mapType;

},{}],29:[function(require,module,exports){
var setPrecision=function(i,e){return"precision"!==i.substring(0,9)?"precision "+e+" float;\n"+i:i};module.exports=setPrecision;

},{}],30:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _core=require("../core"),core=_interopRequireWildcard(_core),_ismobilejs=require("ismobilejs"),_ismobilejs2=_interopRequireDefault(_ismobilejs),_accessibleTarget=require("./accessibleTarget"),_accessibleTarget2=_interopRequireDefault(_accessibleTarget);core.utils.mixins.delayMixin(core.DisplayObject.prototype,_accessibleTarget2.default);var KEY_CODE_TAB=9,DIV_TOUCH_SIZE=100,DIV_TOUCH_POS_X=0,DIV_TOUCH_POS_Y=0,DIV_TOUCH_ZINDEX=2,DIV_HOOK_SIZE=1,DIV_HOOK_POS_X=-1e3,DIV_HOOK_POS_Y=-1e3,DIV_HOOK_ZINDEX=2,AccessibilityManager=function(){function e(t){_classCallCheck(this,e),!_ismobilejs2.default.tablet&&!_ismobilejs2.default.phone||navigator.isCocoonJS||this.createTouchHook();var i=document.createElement("div");i.style.width=DIV_TOUCH_SIZE+"px",i.style.height=DIV_TOUCH_SIZE+"px",i.style.position="absolute",i.style.top=DIV_TOUCH_POS_X+"px",i.style.left=DIV_TOUCH_POS_Y+"px",i.style.zIndex=DIV_TOUCH_ZINDEX,this.div=i,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return e.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width=DIV_HOOK_SIZE+"px",t.style.height=DIV_HOOK_SIZE+"px",t.style.position="absolute",t.style.top=DIV_HOOK_POS_X+"px",t.style.left=DIV_HOOK_POS_Y+"px",t.style.zIndex=DIV_HOOK_ZINDEX,t.style.backgroundColor="#FF0000",t.title="HOOK DIV",t.addEventListener("focus",function(){e.isMobileAccessabillity=!0,e.activate(),document.body.removeChild(t)}),document.body.appendChild(t)},e.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},e.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(e){if(e.visible){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);for(var t=e.children,i=t.length-1;i>=0;i--)this.updateAccessibleObjects(t[i])}},e.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),t=e.width/this.renderer.width,i=e.height/this.renderer.height,s=this.div;s.style.left=e.left+"px",s.style.top=e.top+"px",s.style.width=this.renderer.width+"px",s.style.height=this.renderer.height+"px";for(var n=0;n<this.children.length;n++){var r=this.children[n];if(r.renderId!==this.renderId)r._accessibleActive=!1,core.utils.removeItems(this.children,n,1),this.div.removeChild(r._accessibleDiv),this.pool.push(r._accessibleDiv),r._accessibleDiv=null,n--,0===this.children.length&&this.deactivate();else{s=r._accessibleDiv;var o=r.hitArea,l=r.worldTransform;r.hitArea?(s.style.left=(l.tx+o.x*l.a)*t+"px",s.style.top=(l.ty+o.y*l.d)*i+"px",s.style.width=o.width*l.a*t+"px",s.style.height=o.height*l.d*i+"px"):(o=r.getBounds(),this.capHitArea(o),s.style.left=o.x*t+"px",s.style.top=o.y*i+"px",s.style.width=o.width*t+"px",s.style.height=o.height*i+"px")}}this.renderId++}},e.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0),e.x+e.width>this.renderer.width&&(e.width=this.renderer.width-e.x),e.y+e.height>this.renderer.height&&(e.height=this.renderer.height-e.y)},e.prototype.addChild=function(e){var t=this.pool.pop();t||((t=document.createElement("button")).style.width=DIV_TOUCH_SIZE+"px",t.style.height=DIV_TOUCH_SIZE+"px",t.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=DIV_TOUCH_ZINDEX,t.style.borderStyle="none",t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),e.accessibleTitle?t.title=e.accessibleTitle:e.accessibleTitle||e.accessibleHint||(t.title="displayObject "+this.tabIndex),e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},e.prototype._onClick=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"click",t.eventData)},e.prototype._onFocus=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseover",t.eventData)},e.prototype._onFocusOut=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseout",t.eventData)},e.prototype._onKeyDown=function(e){e.keyCode===KEY_CODE_TAB&&this.activate()},e.prototype._onMouseMove=function(){this.deactivate()},e.prototype.destroy=function(){this.div=null;for(var e=0;e<this.children.length;e++)this.children[e].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e}();exports.default=AccessibilityManager,core.WebGLRenderer.registerPlugin("accessibility",AccessibilityManager),core.CanvasRenderer.registerPlugin("accessibility",AccessibilityManager);

},{"../core":55,"./accessibleTarget":31,"ismobilejs":5}],31:[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1};

},{}],32:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _accessibleTarget=require("./accessibleTarget");Object.defineProperty(exports,"accessibleTarget",{enumerable:!0,get:function(){return _interopRequireDefault(_accessibleTarget).default}});var _AccessibilityManager=require("./AccessibilityManager");Object.defineProperty(exports,"AccessibilityManager",{enumerable:!0,get:function(){return _interopRequireDefault(_AccessibilityManager).default}});

},{"./AccessibilityManager":30,"./accessibleTarget":31}],33:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),_autoDetectRenderer=require("./autoDetectRenderer"),_Container=require("./display/Container"),_Container2=_interopRequireDefault(_Container),_ticker=require("./ticker"),_settings=require("./settings"),_settings2=_interopRequireDefault(_settings),_const=require("./const"),Application=function(){function e(t,r,i,n,s){_classCallCheck(this,e),"number"==typeof t&&(t=Object.assign({width:t,height:r||_settings2.default.RENDER_OPTIONS.height,forceCanvas:!!n,sharedTicker:!!s},i)),this._options=t=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},t),this.renderer=(0,_autoDetectRenderer.autoDetectRenderer)(t),this.stage=new _Container2.default,this._ticker=null,this.ticker=t.sharedTicker?_ticker.shared:new _ticker.Ticker,t.autoStart&&this.start()}return e.prototype.render=function(){this.renderer.render(this.stage)},e.prototype.stop=function(){this._ticker.stop()},e.prototype.start=function(){this._ticker.start()},e.prototype.destroy=function(e){var t=this._ticker;this.ticker=null,t.destroy(),this.stage.destroy(),this.stage=null,this.renderer.destroy(e),this.renderer=null,this._options=null},_createClass(e,[{key:"ticker",set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,_const.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),e}();exports.default=Application;

},{"./autoDetectRenderer":35,"./const":36,"./display/Container":38,"./settings":91,"./ticker":111}],34:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function checkPrecision(e,t){if(e instanceof Array){if("precision"!==e[0].substring(0,9)){var r=e.slice(0);return r.unshift("precision "+t+" float;"),r}}else if("precision"!==e.substring(0,9))return"precision "+t+" float;\n"+e;return e}exports.__esModule=!0;var _pixiGlCore=require("pixi-gl-core"),_settings=require("./settings"),_settings2=_interopRequireDefault(_settings),Shader=function(e){function t(r,n,i){return _classCallCheck(this,t),_possibleConstructorReturn(this,e.call(this,r,checkPrecision(n,_settings2.default.PRECISION_VERTEX),checkPrecision(i,_settings2.default.PRECISION_FRAGMENT)))}return _inherits(t,e),t}(_pixiGlCore.GLShader);exports.default=Shader;

},{"./settings":91,"pixi-gl-core":19}],35:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}function autoDetectRenderer(e,r,n,t){var u=e&&e.forceCanvas;return void 0!==t&&(u=t),!u&&utils.isWebGLSupported()?new _WebGLRenderer2.default(e,r,n):new _CanvasRenderer2.default(e,r,n)}exports.__esModule=!0,exports.autoDetectRenderer=autoDetectRenderer;var _utils=require("./utils"),utils=_interopRequireWildcard(_utils),_CanvasRenderer=require("./renderers/canvas/CanvasRenderer"),_CanvasRenderer2=_interopRequireDefault(_CanvasRenderer),_WebGLRenderer=require("./renderers/webgl/WebGLRenderer"),_WebGLRenderer2=_interopRequireDefault(_WebGLRenderer);

},{"./renderers/canvas/CanvasRenderer":67,"./renderers/webgl/WebGLRenderer":74,"./utils":115}],36:[function(require,module,exports){
"use strict";exports.__esModule=!0;var VERSION=exports.VERSION="4.6.2",PI_2=exports.PI_2=2*Math.PI,RAD_TO_DEG=exports.RAD_TO_DEG=180/Math.PI,DEG_TO_RAD=exports.DEG_TO_RAD=Math.PI/180,RENDERER_TYPE=exports.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES=exports.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},DRAW_MODES=exports.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES=exports.SCALE_MODES={LINEAR:0,NEAREST:1},WRAP_MODES=exports.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},GC_MODES=exports.GC_MODES={AUTO:0,MANUAL:1},URL_FILE_EXTENSION=exports.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,DATA_URI=exports.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,SVG_SIZE=exports.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,SHAPES=exports.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},PRECISION=exports.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},TRANSFORM_MODE=exports.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},TEXT_GRADIENT=exports.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},UPDATE_PRIORITY=exports.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50};

},{}],37:[function(require,module,exports){
"use strict";function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _math=require("../math"),Bounds=function(){function i(){_classCallCheck(this,i),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return i.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},i.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},i.prototype.getRectangle=function(i){return this.minX>this.maxX||this.minY>this.maxY?_math.Rectangle.EMPTY:(i=i||new _math.Rectangle(0,0,1,1),i.x=this.minX,i.y=this.minY,i.width=this.maxX-this.minX,i.height=this.maxY-this.minY,i)},i.prototype.addPoint=function(i){this.minX=Math.min(this.minX,i.x),this.maxX=Math.max(this.maxX,i.x),this.minY=Math.min(this.minY,i.y),this.maxY=Math.max(this.maxY,i.y)},i.prototype.addQuad=function(i){var t=this.minX,m=this.minY,n=this.maxX,a=this.maxY,s=i[0],h=i[1];t=s<t?s:t,m=h<m?h:m,n=s>n?s:n,a=h>a?h:a,s=i[2],h=i[3],t=s<t?s:t,m=h<m?h:m,n=s>n?s:n,a=h>a?h:a,s=i[4],h=i[5],t=s<t?s:t,m=h<m?h:m,n=s>n?s:n,a=h>a?h:a,s=i[6],h=i[7],t=s<t?s:t,m=h<m?h:m,n=s>n?s:n,a=h>a?h:a,this.minX=t,this.minY=m,this.maxX=n,this.maxY=a},i.prototype.addFrame=function(i,t,m,n,a){var s=i.worldTransform,h=s.a,x=s.b,Y=s.c,X=s.d,o=s.tx,r=s.ty,e=this.minX,c=this.minY,d=this.maxX,u=this.maxY,p=h*t+Y*m+o,f=x*t+X*m+r;e=p<e?p:e,c=f<c?f:c,d=p>d?p:d,u=f>u?f:u,f=x*n+X*m+r,e=(p=h*n+Y*m+o)<e?p:e,c=f<c?f:c,d=p>d?p:d,u=f>u?f:u,f=x*t+X*a+r,e=(p=h*t+Y*a+o)<e?p:e,c=f<c?f:c,d=p>d?p:d,u=f>u?f:u,f=x*n+X*a+r,e=(p=h*n+Y*a+o)<e?p:e,c=f<c?f:c,d=p>d?p:d,u=f>u?f:u,this.minX=e,this.minY=c,this.maxX=d,this.maxY=u},i.prototype.addVertices=function(i,t,m,n){for(var a=i.worldTransform,s=a.a,h=a.b,x=a.c,Y=a.d,X=a.tx,o=a.ty,r=this.minX,e=this.minY,c=this.maxX,d=this.maxY,u=m;u<n;u+=2){var p=t[u],f=t[u+1],y=s*p+x*f+X,l=Y*f+h*p+o;r=y<r?y:r,e=l<e?l:e,c=y>c?y:c,d=l>d?l:d}this.minX=r,this.minY=e,this.maxX=c,this.maxY=d},i.prototype.addBounds=function(i){var t=this.minX,m=this.minY,n=this.maxX,a=this.maxY;this.minX=i.minX<t?i.minX:t,this.minY=i.minY<m?i.minY:m,this.maxX=i.maxX>n?i.maxX:n,this.maxY=i.maxY>a?i.maxY:a},i.prototype.addBoundsMask=function(i,t){var m=i.minX>t.minX?i.minX:t.minX,n=i.minY>t.minY?i.minY:t.minY,a=i.maxX<t.maxX?i.maxX:t.maxX,s=i.maxY<t.maxY?i.maxY:t.maxY;if(m<=a&&n<=s){var h=this.minX,x=this.minY,Y=this.maxX,X=this.maxY;this.minX=m<h?m:h,this.minY=n<x?n:x,this.maxX=a>Y?a:Y,this.maxY=s>X?s:X}},i.prototype.addBoundsArea=function(i,t){var m=i.minX>t.x?i.minX:t.x,n=i.minY>t.y?i.minY:t.y,a=i.maxX<t.x+t.width?i.maxX:t.x+t.width,s=i.maxY<t.y+t.height?i.maxY:t.y+t.height;if(m<=a&&n<=s){var h=this.minX,x=this.minY,Y=this.maxX,X=this.maxY;this.minX=m<h?m:h,this.minY=n<x?n:x,this.maxX=a>Y?a:Y,this.maxY=s>X?s:X}},i}();exports.default=Bounds;

},{"../math":60}],38:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_utils=require("../utils"),_DisplayObject2=require("./DisplayObject"),_DisplayObject3=_interopRequireDefault(_DisplayObject2),Container=function(e){function t(){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,e.call(this));return r.children=[],r}return _inherits(t,e),t.prototype.onChildrenChange=function(){},t.prototype.addChild=function(e){var t=arguments.length;if(t>1)for(var r=0;r<t;r++)this.addChild(arguments[r]);else e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),e.emit("added",this);return e},t.prototype.addChildAt=function(e,t){if(t<0||t>this.children.length)throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),e},t.prototype.swapChildren=function(e,t){if(e!==t){var r=this.getChildIndex(e),n=this.getChildIndex(t);this.children[r]=t,this.children[n]=e,this.onChildrenChange(r<n?r:n)}},t.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},t.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The supplied index is out of bounds");var r=this.getChildIndex(e);(0,_utils.removeItems)(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(e){var t=arguments.length;if(t>1)for(var r=0;r<t;r++)this.removeChild(arguments[r]);else{var n=this.children.indexOf(e);if(-1===n)return null;e.parent=null,e.transform._parentID=-1,(0,_utils.removeItems)(this.children,n,1),this._boundsID++,this.onChildrenChange(n),e.emit("removed",this)}return e},t.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,(0,_utils.removeItems)(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),t},t.prototype.removeChildren=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],r=e,n="number"==typeof t?t:this.children.length,i=n-r,s=void 0;if(i>0&&i<=n){s=this.children.splice(r,i);for(var h=0;h<s.length;++h)s[h].parent=null,s[h].transform&&(s[h].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var o=0;o<s.length;++o)s[o].emit("removed",this);return s}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var r=this.children[e];r.visible&&r.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var t=this.children[e];t.visible&&t.renderable&&(t.calculateBounds(),t._mask?(t._mask.calculateBounds(),this._bounds.addBoundsMask(t._bounds,t._mask._bounds)):t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds))}this._lastBoundsID=this._boundsID},t.prototype._calculateBounds=function(){},t.prototype.renderWebGL=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(e);else{this._renderWebGL(e);for(var t=0,r=this.children.length;t<r;++t)this.children[t].renderWebGL(e)}},t.prototype.renderAdvancedWebGL=function(e){e.flush();var t=this._filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<t.length;n++)t[n].enabled&&this._enabledFilters.push(t[n]);this._enabledFilters.length&&e.filterManager.pushFilter(this,this._enabledFilters)}r&&e.maskManager.pushMask(this,this._mask),this._renderWebGL(e);for(var i=0,s=this.children.length;i<s;i++)this.children[i].renderWebGL(e);e.flush(),r&&e.maskManager.popMask(this,this._mask),t&&this._enabledFilters&&this._enabledFilters.length&&e.filterManager.popFilter()},t.prototype._renderWebGL=function(e){},t.prototype._renderCanvas=function(e){},t.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&e.maskManager.pushMask(this._mask),this._renderCanvas(e);for(var t=0,r=this.children.length;t<r;++t)this.children[t].renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},t.prototype.destroy=function(t){e.prototype.destroy.call(this);var r="boolean"==typeof t?t:t&&t.children,n=this.removeChildren(0,this.children.length);if(r)for(var i=0;i<n.length;++i)n[i].destroy(t)},_createClass(t,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}}]),t}(_DisplayObject3.default);exports.default=Container,Container.prototype.containerUpdateTransform=Container.prototype.updateTransform;

},{"../utils":115,"./DisplayObject":39}],39:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),_eventemitter=require("eventemitter3"),_eventemitter2=_interopRequireDefault(_eventemitter),_const=require("../const"),_settings=require("../settings"),_settings2=_interopRequireDefault(_settings),_TransformStatic=require("./TransformStatic"),_TransformStatic2=_interopRequireDefault(_TransformStatic),_Transform=require("./Transform"),_Transform2=_interopRequireDefault(_Transform),_Bounds=require("./Bounds"),_Bounds2=_interopRequireDefault(_Bounds),_math=require("../math"),DisplayObject=function(t){function e(){_classCallCheck(this,e);var r=_possibleConstructorReturn(this,t.call(this)),n=_settings2.default.TRANSFORM_MODE===_const.TRANSFORM_MODE.STATIC?_TransformStatic2.default:_Transform2.default;return r.tempDisplayObjectParent=null,r.transform=new n,r.alpha=1,r.visible=!0,r.renderable=!0,r.parent=null,r.worldAlpha=1,r.filterArea=null,r._filters=null,r._enabledFilters=null,r._bounds=new _Bounds2.default,r._boundsID=0,r._lastBoundsID=-1,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._destroyed=!1,r}return _inherits(e,t),e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new _math.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new _math.Rectangle),t=this._localBoundsRect);var n=this.getBounds(!1,t);return this.parent=r,this.transform=e,n},e.prototype.toGlobal=function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,r,n){return e&&(t=e.toGlobal(t,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},e.prototype.renderWebGL=function(t){},e.prototype.renderCanvas=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=r||1,this.scale.y=n||1,this.rotation=s,this.skew.x=i,this.skew.y=o,this.pivot.x=a,this.pivot.y=l,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},_createClass(e,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0),this._mask=t,this._mask&&(this._mask.renderable=!1)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(_eventemitter2.default);exports.default=DisplayObject,DisplayObject.prototype.displayObjectUpdateTransform=DisplayObject.prototype.updateTransform;

},{"../const":36,"../math":60,"../settings":91,"./Bounds":37,"./Transform":40,"./TransformStatic":42,"eventemitter3":3}],40:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var o=e[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,s,o){return s&&t(e.prototype,s),o&&t(e,o),e}}(),_math=require("../math"),_TransformBase2=require("./TransformBase"),_TransformBase3=_interopRequireDefault(_TransformBase2),Transform=function(t){function e(){_classCallCheck(this,e);var s=_possibleConstructorReturn(this,t.call(this));return s.position=new _math.Point(0,0),s.scale=new _math.Point(1,1),s.skew=new _math.ObservablePoint(s.updateSkew,s,0,0),s.pivot=new _math.Point(0,0),s._rotation=0,s._cx=1,s._sx=0,s._cy=0,s._sy=1,s}return _inherits(e,t),e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},e.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},e.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var s=t.worldTransform,o=this.worldTransform;o.a=e.a*s.a+e.b*s.c,o.b=e.a*s.b+e.b*s.d,o.c=e.c*s.a+e.d*s.c,o.d=e.c*s.b+e.d*s.d,o.tx=e.tx*s.a+e.ty*s.c+s.tx,o.ty=e.tx*s.b+e.ty*s.d+s.ty,this._worldID++},e.prototype.setFromMatrix=function(t){t.decompose(this)},_createClass(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(_TransformBase3.default);exports.default=Transform;

},{"../math":60,"./TransformBase":41}],41:[function(require,module,exports){
"use strict";function _classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _math=require("../math"),TransformBase=function(){function r(){_classCallCheck(this,r),this.worldTransform=new _math.Matrix,this.localTransform=new _math.Matrix,this._worldID=0,this._parentID=0}return r.prototype.updateLocalTransform=function(){},r.prototype.updateTransform=function(r){var a=r.worldTransform,t=this.worldTransform,o=this.localTransform;t.a=o.a*a.a+o.b*a.c,t.b=o.a*a.b+o.b*a.d,t.c=o.c*a.a+o.d*a.c,t.d=o.c*a.b+o.d*a.d,t.tx=o.tx*a.a+o.ty*a.c+a.tx,t.ty=o.tx*a.b+o.ty*a.d+a.ty,this._worldID++},r}();exports.default=TransformBase,TransformBase.prototype.updateWorldTransform=TransformBase.prototype.updateTransform,TransformBase.IDENTITY=new TransformBase;

},{"../math":60}],42:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var o=e[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,s,o){return s&&t(e.prototype,s),o&&t(e,o),e}}(),_math=require("../math"),_TransformBase2=require("./TransformBase"),_TransformBase3=_interopRequireDefault(_TransformBase2),TransformStatic=function(t){function e(){_classCallCheck(this,e);var s=_possibleConstructorReturn(this,t.call(this));return s.position=new _math.ObservablePoint(s.onChange,s,0,0),s.scale=new _math.ObservablePoint(s.onChange,s,1,1),s.pivot=new _math.ObservablePoint(s.onChange,s,0,0),s.skew=new _math.ObservablePoint(s.updateSkew,s,0,0),s._rotation=0,s._cx=1,s._sx=0,s._cy=0,s._sy=1,s._localID=0,s._currentLocalID=0,s}return _inherits(e,t),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var s=t.worldTransform,o=this.worldTransform;o.a=e.a*s.a+e.b*s.c,o.b=e.a*s.b+e.b*s.d,o.c=e.c*s.a+e.d*s.c,o.d=e.c*s.b+e.d*s.d,o.tx=e.tx*s.a+e.ty*s.c+s.tx,o.ty=e.tx*s.b+e.ty*s.d+s.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},_createClass(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(_TransformBase3.default);exports.default=TransformStatic;

},{"../math":60,"./TransformBase":41}],43:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _Container2=require("../display/Container"),_Container3=_interopRequireDefault(_Container2),_RenderTexture=require("../textures/RenderTexture"),_RenderTexture2=_interopRequireDefault(_RenderTexture),_Texture=require("../textures/Texture"),_Texture2=_interopRequireDefault(_Texture),_GraphicsData=require("./GraphicsData"),_GraphicsData2=_interopRequireDefault(_GraphicsData),_Sprite=require("../sprites/Sprite"),_Sprite2=_interopRequireDefault(_Sprite),_math=require("../math"),_utils=require("../utils"),_const=require("../const"),_Bounds=require("../display/Bounds"),_Bounds2=_interopRequireDefault(_Bounds),_bezierCurveTo2=require("./utils/bezierCurveTo"),_bezierCurveTo3=_interopRequireDefault(_bezierCurveTo2),_CanvasRenderer=require("../renderers/canvas/CanvasRenderer"),_CanvasRenderer2=_interopRequireDefault(_CanvasRenderer),canvasRenderer=void 0,tempMatrix=new _math.Matrix,tempPoint=new _math.Point,tempColor1=new Float32Array(4),tempColor2=new Float32Array(4),Graphics=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_classCallCheck(this,e);var i=_possibleConstructorReturn(this,t.call(this));return i.fillAlpha=1,i.lineWidth=0,i.nativeLines=r,i.lineColor=0,i.graphicsData=[],i.tint=16777215,i._prevTint=16777215,i.blendMode=_const.BLEND_MODES.NORMAL,i.currentPath=null,i._webGL={},i.isMask=!1,i.boundsPadding=0,i._localBounds=new _Bounds2.default,i.dirty=0,i.fastRectDirty=-1,i.clearDirty=0,i.boundsDirty=-1,i.cachedSpriteDirty=!1,i._spriteRect=null,i._fastRect=!1,i}return _inherits(e,t),e.prototype.clone=function(){var t=new e;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var r=0;r<this.graphicsData.length;++r)t.graphicsData.push(this.graphicsData[r].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},e.prototype.lineStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=r,this.currentPath)if(this.currentPath.shape.points.length){var i=new _math.Polygon(this.currentPath.shape.points.slice(-2));i.closed=!1,this.drawShape(i)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},e.prototype.moveTo=function(t,e){var r=new _math.Polygon([t,e]);return r.closed=!1,this.drawShape(r),this},e.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty++,this},e.prototype.quadraticCurveTo=function(t,e,r,i){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var a=this.currentPath.shape.points,n=0,s=0;0===a.length&&this.moveTo(0,0);for(var h=a[a.length-2],o=a[a.length-1],l=1;l<=20;++l){var p=l/20;n=h+(t-h)*p,s=o+(e-o)*p,a.push(n+(t+(r-t)*p-n)*p,s+(e+(i-e)*p-s)*p)}return this.dirty++,this},e.prototype.bezierCurveTo=function(t,e,r,i,a,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var s=this.currentPath.shape.points,h=s[s.length-2],o=s[s.length-1];return s.length-=2,(0,_bezierCurveTo3.default)(h,o,t,e,r,i,a,n,s),this.dirty++,this},e.prototype.arcTo=function(t,e,r,i,a){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var n=this.currentPath.shape.points,s=n[n.length-2],h=n[n.length-1]-e,o=s-t,l=i-e,p=r-t,u=Math.abs(h*p-o*l);if(u<1e-8||0===a)n[n.length-2]===t&&n[n.length-1]===e||n.push(t,e);else{var c=h*h+o*o,d=l*l+p*p,f=h*l+o*p,_=a*Math.sqrt(c)/u,g=a*Math.sqrt(d)/u,y=_*f/c,v=g*f/d,P=_*p+g*o,R=_*l+g*h,m=o*(g+y),D=h*(g+y),w=p*(_+v),b=l*(_+v),C=Math.atan2(D-R,m-P),T=Math.atan2(b-R,w-P);this.arc(P+t,R+e,a,C,T,o*l>p*h)}return this.dirty++,this},e.prototype.arc=function(t,e,r,i,a){var n=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(i===a)return this;!n&&a<=i?a+=2*Math.PI:n&&i<=a&&(i+=2*Math.PI);var s=a-i,h=40*Math.ceil(Math.abs(s)/(2*Math.PI));if(0===s)return this;var o=t+Math.cos(i)*r,l=e+Math.sin(i)*r,p=this.currentPath?this.currentPath.shape.points:null;p?p[p.length-2]===o&&p[p.length-1]===l||p.push(o,l):(this.moveTo(o,l),p=this.currentPath.shape.points);for(var u=s/(2*h),c=2*u,d=Math.cos(u),f=Math.sin(u),_=h-1,g=_%1/_,y=0;y<=_;++y){var v=u+i+c*(y+g*y),P=Math.cos(v),R=-Math.sin(v);p.push((d*P+f*R)*r+t,(d*-R+f*P)*r+e)}return this.dirty++,this},e.prototype.beginFill=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.prototype.drawRect=function(t,e,r,i){return this.drawShape(new _math.Rectangle(t,e,r,i)),this},e.prototype.drawRoundedRect=function(t,e,r,i,a){return this.drawShape(new _math.RoundedRectangle(t,e,r,i,a)),this},e.prototype.drawCircle=function(t,e,r){return this.drawShape(new _math.Circle(t,e,r)),this},e.prototype.drawEllipse=function(t,e,r,i){return this.drawShape(new _math.Ellipse(t,e,r,i)),this},e.prototype.drawPolygon=function(t){var e=t,r=!0;if(e instanceof _math.Polygon&&(r=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var i=0;i<e.length;++i)e[i]=arguments[i]}var a=new _math.Polygon(e);return a.closed=r,this.drawShape(a),this},e.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},e.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===_const.SHAPES.RECT&&!this.graphicsData[0].lineWidth},e.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},e.prototype._renderSpriteRect=function(t){var e=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new _Sprite2.default(new _Texture2.default(_Texture2.default.WHITE)));var r=this._spriteRect;if(16777215===this.tint)r.tint=this.graphicsData[0].fillColor;else{var i=tempColor1,a=tempColor2;(0,_utils.hex2rgb)(this.graphicsData[0].fillColor,i),(0,_utils.hex2rgb)(this.tint,a),i[0]*=a[0],i[1]*=a[1],i[2]*=a[2],r.tint=(0,_utils.rgb2hex)(i)}r.alpha=this.graphicsData[0].fillAlpha,r.worldAlpha=this.worldAlpha*r.alpha,r.blendMode=this.blendMode,r._texture._frame.width=e.width,r._texture._frame.height=e.height,r.transform.worldTransform=this.transform.worldTransform,r.anchor.set(-e.x/e.width,-e.y/e.height),r._onAnchorUpdate(),r._renderWebGL(t)},e.prototype._renderCanvas=function(t){!0!==this.isMask&&t.plugins.graphics.render(this)},e.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,tempPoint);for(var e=this.graphicsData,r=0;r<e.length;++r){var i=e[r];if(i.fill&&(i.shape&&i.shape.contains(tempPoint.x,tempPoint.y))){if(i.holes)for(var a=0;a<i.holes.length;a++){if(i.holes[a].contains(tempPoint.x,tempPoint.y))return!1}return!0}}return!1},e.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,r=1/0,i=-1/0;if(this.graphicsData.length)for(var a=0,n=0,s=0,h=0,o=0,l=0;l<this.graphicsData.length;l++){var p=this.graphicsData[l],u=p.type,c=p.lineWidth;if(a=p.shape,u===_const.SHAPES.RECT||u===_const.SHAPES.RREC)n=a.x-c/2,s=a.y-c/2,h=a.width+c,o=a.height+c,t=n<t?n:t,e=n+h>e?n+h:e,r=s<r?s:r,i=s+o>i?s+o:i;else if(u===_const.SHAPES.CIRC)n=a.x,s=a.y,h=a.radius+c/2,o=a.radius+c/2,t=n-h<t?n-h:t,e=n+h>e?n+h:e,r=s-o<r?s-o:r,i=s+o>i?s+o:i;else if(u===_const.SHAPES.ELIP)n=a.x,s=a.y,h=a.width+c/2,o=a.height+c/2,t=n-h<t?n-h:t,e=n+h>e?n+h:e,r=s-o<r?s-o:r,i=s+o>i?s+o:i;else for(var d=a.points,f=0,_=0,g=0,y=0,v=0,P=0,R=0,m=0,D=0;D+2<d.length;D+=2)n=d[D],s=d[D+1],f=d[D+2],_=d[D+3],g=Math.abs(f-n),y=Math.abs(_-s),o=c,(h=Math.sqrt(g*g+y*y))<1e-9||(P=(o/h*g+y)/2,m=(_+s)/2,t=(R=(f+n)/2)-(v=(o/h*y+g)/2)<t?R-v:t,e=R+v>e?R+v:e,r=m-P<r?m-P:r,i=m+P>i?m+P:i)}else t=0,e=0,r=0,i=0;var w=this.boundsPadding;this._localBounds.minX=t-w,this._localBounds.maxX=e+w,this._localBounds.minY=r-w,this._localBounds.maxY=i+w},e.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new _GraphicsData2.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t);return this.graphicsData.push(e),e.type===_const.SHAPES.POLY&&(e.shape.closed=e.shape.closed||this.filling,this.currentPath=e),this.dirty++,e},e.prototype.generateCanvasTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.getLocalBounds(),i=_RenderTexture2.default.create(r.width,r.height,t,e);canvasRenderer||(canvasRenderer=new _CanvasRenderer2.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(tempMatrix),tempMatrix.invert(),tempMatrix.tx-=r.x,tempMatrix.ty-=r.y,canvasRenderer.render(this,i,!0,tempMatrix);var a=_Texture2.default.fromCanvas(i.baseTexture._canvasRenderTarget.canvas,t,"graphics");return a.baseTexture.resolution=e,a.baseTexture.update(),a},e.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},e.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();for(var i in this._webgl)for(var a=0;a<this._webgl[i].data.length;++a)this._webgl[i].data[a].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},e}(_Container3.default);exports.default=Graphics,Graphics._SPRITE_TEXTURE=null;

},{"../const":36,"../display/Bounds":37,"../display/Container":38,"../math":60,"../renderers/canvas/CanvasRenderer":67,"../sprites/Sprite":92,"../textures/RenderTexture":103,"../textures/Texture":105,"../utils":115,"./GraphicsData":44,"./utils/bezierCurveTo":46}],44:[function(require,module,exports){
"use strict";function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var GraphicsData=function(){function i(t,l,s,h,e,n,o,a){_classCallCheck(this,i),this.lineWidth=t,this.nativeLines=o,this.lineColor=l,this.lineAlpha=s,this._lineTint=l,this.fillColor=h,this.fillAlpha=e,this._fillTint=h,this.fill=n,this.holes=[],this.shape=a,this.type=a.type}return i.prototype.clone=function(){return new i(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},i.prototype.addHole=function(i){this.holes.push(i)},i.prototype.destroy=function(){this.shape=null,this.holes=null},i}();exports.default=GraphicsData;

},{}],45:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _CanvasRenderer=require("../../renderers/canvas/CanvasRenderer"),_CanvasRenderer2=_interopRequireDefault(_CanvasRenderer),_const=require("../../const"),CanvasGraphicsRenderer=function(){function e(t){_classCallCheck(this,e),this.renderer=t}return e.prototype.render=function(e){var t=this.renderer,l=t.context,r=e.worldAlpha,i=e.transform.worldTransform,n=t.resolution;this._prevTint!==this.tint&&(this.dirty=!0),l.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n,i.ty*n),e.dirty&&(this.updateGraphicsTint(e),e.dirty=!1),t.setBlendMode(e.blendMode);for(var o=0;o<e.graphicsData.length;o++){var a=e.graphicsData[o],s=a.shape,h=a._fillTint,p=a._lineTint;if(l.lineWidth=a.lineWidth,a.type===_const.SHAPES.POLY){l.beginPath(),this.renderPolygon(s.points,s.closed,l);for(var f=0;f<a.holes.length;f++)this.renderPolygon(a.holes[f].points,!0,l);a.fill&&(l.globalAlpha=a.fillAlpha*r,l.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),l.fill()),a.lineWidth&&(l.globalAlpha=a.lineAlpha*r,l.strokeStyle="#"+("00000"+(0|p).toString(16)).substr(-6),l.stroke())}else if(a.type===_const.SHAPES.RECT)(a.fillColor||0===a.fillColor)&&(l.globalAlpha=a.fillAlpha*r,l.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),l.fillRect(s.x,s.y,s.width,s.height)),a.lineWidth&&(l.globalAlpha=a.lineAlpha*r,l.strokeStyle="#"+("00000"+(0|p).toString(16)).substr(-6),l.strokeRect(s.x,s.y,s.width,s.height));else if(a.type===_const.SHAPES.CIRC)l.beginPath(),l.arc(s.x,s.y,s.radius,0,2*Math.PI),l.closePath(),a.fill&&(l.globalAlpha=a.fillAlpha*r,l.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),l.fill()),a.lineWidth&&(l.globalAlpha=a.lineAlpha*r,l.strokeStyle="#"+("00000"+(0|p).toString(16)).substr(-6),l.stroke());else if(a.type===_const.SHAPES.ELIP){var d=2*s.width,u=2*s.height,c=s.x-d/2,g=s.y-u/2;l.beginPath();var v=d/2*.5522848,y=u/2*.5522848,C=c+d,b=g+u,S=c+d/2,T=g+u/2;l.moveTo(c,T),l.bezierCurveTo(c,T-y,S-v,g,S,g),l.bezierCurveTo(S+v,g,C,T-y,C,T),l.bezierCurveTo(C,T+y,S+v,b,S,b),l.bezierCurveTo(S-v,b,c,T+y,c,T),l.closePath(),a.fill&&(l.globalAlpha=a.fillAlpha*r,l.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),l.fill()),a.lineWidth&&(l.globalAlpha=a.lineAlpha*r,l.strokeStyle="#"+("00000"+(0|p).toString(16)).substr(-6),l.stroke())}else if(a.type===_const.SHAPES.RREC){var A=s.x,_=s.y,P=s.width,R=s.height,k=s.radius,x=Math.min(P,R)/2|0;k=k>x?x:k,l.beginPath(),l.moveTo(A,_+k),l.lineTo(A,_+R-k),l.quadraticCurveTo(A,_+R,A+k,_+R),l.lineTo(A+P-k,_+R),l.quadraticCurveTo(A+P,_+R,A+P,_+R-k),l.lineTo(A+P,_+k),l.quadraticCurveTo(A+P,_,A+P-k,_),l.lineTo(A+k,_),l.quadraticCurveTo(A,_,A,_+k),l.closePath(),(a.fillColor||0===a.fillColor)&&(l.globalAlpha=a.fillAlpha*r,l.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),l.fill()),a.lineWidth&&(l.globalAlpha=a.lineAlpha*r,l.strokeStyle="#"+("00000"+(0|p).toString(16)).substr(-6),l.stroke())}}},e.prototype.updateGraphicsTint=function(e){e._prevTint=e.tint;for(var t=(e.tint>>16&255)/255,l=(e.tint>>8&255)/255,r=(255&e.tint)/255,i=0;i<e.graphicsData.length;++i){var n=e.graphicsData[i],o=0|n.fillColor,a=0|n.lineColor;n._fillTint=((o>>16&255)/255*t*255<<16)+((o>>8&255)/255*l*255<<8)+(255&o)/255*r*255,n._lineTint=((a>>16&255)/255*t*255<<16)+((a>>8&255)/255*l*255<<8)+(255&a)/255*r*255}},e.prototype.renderPolygon=function(e,t,l){l.moveTo(e[0],e[1]);for(var r=1;r<e.length/2;++r)l.lineTo(e[2*r],e[2*r+1]);t&&l.closePath()},e.prototype.destroy=function(){this.renderer=null},e}();exports.default=CanvasGraphicsRenderer,_CanvasRenderer2.default.registerPlugin("graphics",CanvasGraphicsRenderer);

},{"../../const":36,"../../renderers/canvas/CanvasRenderer":67}],46:[function(require,module,exports){
"use strict";function bezierCurveTo(e,r,u,o,t,s,i,v){var n=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],p=0,a=0,d=0,f=0,h=0;n.push(e,r);for(var l=1,b=0;l<=20;++l)d=(a=(p=1-(b=l/20))*p)*p,h=(f=b*b)*b,n.push(d*e+3*a*b*u+3*p*f*t+h*i,d*r+3*a*b*o+3*p*f*s+h*v);return n}exports.__esModule=!0,exports.default=bezierCurveTo;

},{}],47:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _utils=require("../../utils"),_const=require("../../const"),_ObjectRenderer2=require("../../renderers/webgl/utils/ObjectRenderer"),_ObjectRenderer3=_interopRequireDefault(_ObjectRenderer2),_WebGLRenderer=require("../../renderers/webgl/WebGLRenderer"),_WebGLRenderer2=_interopRequireDefault(_WebGLRenderer),_WebGLGraphicsData=require("./WebGLGraphicsData"),_WebGLGraphicsData2=_interopRequireDefault(_WebGLGraphicsData),_PrimitiveShader=require("./shaders/PrimitiveShader"),_PrimitiveShader2=_interopRequireDefault(_PrimitiveShader),_buildPoly=require("./utils/buildPoly"),_buildPoly2=_interopRequireDefault(_buildPoly),_buildRectangle=require("./utils/buildRectangle"),_buildRectangle2=_interopRequireDefault(_buildRectangle),_buildRoundedRectangle=require("./utils/buildRoundedRectangle"),_buildRoundedRectangle2=_interopRequireDefault(_buildRoundedRectangle),_buildCircle=require("./utils/buildCircle"),_buildCircle2=_interopRequireDefault(_buildCircle),GraphicsRenderer=function(e){function t(r){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,e.call(this,r));return i.graphicsDataPool=[],i.primitiveShader=null,i.gl=r.gl,i.CONTEXT_UID=0,i}return _inherits(t,e),t.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new _PrimitiveShader2.default(this.gl)},t.prototype.destroy=function(){_ObjectRenderer3.default.prototype.destroy.call(this);for(var e=0;e<this.graphicsDataPool.length;++e)this.graphicsDataPool[e].destroy();this.graphicsDataPool=null},t.prototype.render=function(e){var t=this.renderer,r=t.gl,i=void 0,a=e._webGL[this.CONTEXT_UID];a&&e.dirty===a.dirty||(this.updateGraphics(e),a=e._webGL[this.CONTEXT_UID]);var n=this.primitiveShader;t.bindShader(n),t.state.setBlendMode(e.blendMode);for(var l=0,o=a.data.length;l<o;l++){var s=(i=a.data[l]).shader;t.bindShader(s),s.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),s.uniforms.tint=(0,_utils.hex2rgb)(e.tint),s.uniforms.alpha=e.worldAlpha,t.bindVao(i.vao),i.nativeLines?r.drawArrays(r.LINES,0,i.points.length/6):i.vao.draw(r.TRIANGLE_STRIP,i.indices.length)}},t.prototype.updateGraphics=function(e){var t=this.renderer.gl,r=e._webGL[this.CONTEXT_UID];if(r||(r=e._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:t,clearDirty:-1,dirty:-1}),r.dirty=e.dirty,e.clearDirty!==r.clearDirty){r.clearDirty=e.clearDirty;for(var i=0;i<r.data.length;i++)this.graphicsDataPool.push(r.data[i]);r.data.length=0,r.lastIndex=0}for(var a=void 0,n=void 0,l=r.lastIndex;l<e.graphicsData.length;l++){var o=e.graphicsData[l];a=this.getWebGLData(r,0),o.nativeLines&&o.lineWidth&&(n=this.getWebGLData(r,0,!0),r.lastIndex++),o.type===_const.SHAPES.POLY&&(0,_buildPoly2.default)(o,a,n),o.type===_const.SHAPES.RECT?(0,_buildRectangle2.default)(o,a,n):o.type===_const.SHAPES.CIRC||o.type===_const.SHAPES.ELIP?(0,_buildCircle2.default)(o,a,n):o.type===_const.SHAPES.RREC&&(0,_buildRoundedRectangle2.default)(o,a,n),r.lastIndex++}this.renderer.bindVao(null);for(var s=0;s<r.data.length;s++)(a=r.data[s]).dirty&&a.upload()},t.prototype.getWebGLData=function(e,t,r){var i=e.data[e.data.length-1];return(!i||i.nativeLines!==r||i.points.length>32e4)&&((i=this.graphicsDataPool.pop()||new _WebGLGraphicsData2.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState)).nativeLines=r,i.reset(t),e.data.push(i)),i.dirty=!0,i},t}(_ObjectRenderer3.default);exports.default=GraphicsRenderer,_WebGLRenderer2.default.registerPlugin("graphics",GraphicsRenderer);

},{"../../const":36,"../../renderers/webgl/WebGLRenderer":74,"../../renderers/webgl/utils/ObjectRenderer":84,"../../utils":115,"./WebGLGraphicsData":48,"./shaders/PrimitiveShader":49,"./utils/buildCircle":50,"./utils/buildPoly":52,"./utils/buildRectangle":53,"./utils/buildRoundedRectangle":54}],48:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _pixiGlCore=require("pixi-gl-core"),_pixiGlCore2=_interopRequireDefault(_pixiGlCore),WebGLGraphicsData=function(){function t(i,e,s){_classCallCheck(this,t),this.gl=i,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=_pixiGlCore2.default.GLBuffer.createVertexBuffer(i),this.indexBuffer=_pixiGlCore2.default.GLBuffer.createIndexBuffer(i),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=e,this.vao=new _pixiGlCore2.default.VertexArrayObject(i,s).addIndex(this.indexBuffer).addAttribute(this.buffer,e.attributes.aVertexPosition,i.FLOAT,!1,24,0).addAttribute(this.buffer,e.attributes.aColor,i.FLOAT,!1,24,8)}return t.prototype.reset=function(){this.points.length=0,this.indices.length=0},t.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},t.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},t}();exports.default=WebGLGraphicsData;

},{"pixi-gl-core":19}],49:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _Shader2=require("../../../Shader"),_Shader3=_interopRequireDefault(_Shader2),PrimitiveShader=function(e){function t(r){return _classCallCheck(this,t),_possibleConstructorReturn(this,e.call(this,r,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return _inherits(t,e),t}(_Shader3.default);exports.default=PrimitiveShader;

},{"../../../Shader":34}],50:[function(require,module,exports){
"use strict";function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function buildCircle(i,t,e){var r=i.shape,u=r.x,s=r.y,l=void 0,o=void 0;if(i.type===_const.SHAPES.CIRC?(l=r.radius,o=r.radius):(l=r.width,o=r.height),0!==l&&0!==o){var a=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(r.width+r.height)),h=2*Math.PI/a;if(i.fill){var n=(0,_utils.hex2rgb)(i.fillColor),d=i.fillAlpha,p=n[0]*d,f=n[1]*d,_=n[2]*d,c=t.points,M=t.indices,v=c.length/6;M.push(v);for(var b=0;b<a+1;b++)c.push(u,s,p,f,_,d),c.push(u+Math.sin(h*b)*l,s+Math.cos(h*b)*o,p,f,_,d),M.push(v++,v++);M.push(v-1)}if(i.lineWidth){var q=i.points;i.points=[];for(var C=0;C<a+1;C++)i.points.push(u+Math.sin(h*C)*l,s+Math.cos(h*C)*o);(0,_buildLine2.default)(i,t,e),i.points=q}}}exports.__esModule=!0,exports.default=buildCircle;var _buildLine=require("./buildLine"),_buildLine2=_interopRequireDefault(_buildLine),_const=require("../../../const"),_utils=require("../../../utils");

},{"../../../const":36,"../../../utils":115,"./buildLine":51}],51:[function(require,module,exports){
"use strict";function buildLine(h,s){var t=h.points;if(0!==t.length){var i=new _math.Point(t[0],t[1]),u=new _math.Point(t[t.length-2],t[t.length-1]);if(i.x===u.x&&i.y===u.y){(t=t.slice()).pop(),t.pop();var e=(u=new _math.Point(t[t.length-2],t[t.length-1])).x+.5*(i.x-u.x),n=u.y+.5*(i.y-u.y);t.unshift(e,n),t.push(e,n)}var p=s.points,l=s.indices,r=t.length/2,a=t.length,o=p.length/6,v=h.lineWidth/2,f=(0,_utils.hex2rgb)(h.lineColor),g=h.lineAlpha,x=f[0]*g,_=f[1]*g,d=f[2]*g,b=t[0],q=t[1],M=t[2],c=t[3],m=0,y=0,L=-(q-c),w=b-M,P=0,A=0,C=0,N=0,W=Math.sqrt(L*L+w*w);L/=W,w/=W,L*=v,w*=v,p.push(b-L,q-w,x,_,d,g),p.push(b+L,q+w,x,_,d,g);for(var j=1;j<r-1;++j){b=t[2*(j-1)],q=t[2*(j-1)+1],M=t[2*j],c=t[2*j+1],m=t[2*(j+1)],y=t[2*(j+1)+1],L=-(q-c),w=b-M,L/=W=Math.sqrt(L*L+w*w),w/=W,L*=v,w*=v,P=-(c-y),A=M-m,P/=W=Math.sqrt(P*P+A*A),A/=W;var k=-w+q-(-w+c),z=-L+M-(-L+b),B=(-L+b)*(-w+c)-(-L+M)*(-w+q),D=-(A*=v)+y-(-A+c),E=-(P*=v)+M-(-P+m),F=(-P+m)*(-A+c)-(-P+M)*(-A+y),G=k*E-D*z;if(Math.abs(G)<.1)G+=10.1,p.push(M-L,c-w,x,_,d,g),p.push(M+L,c+w,x,_,d,g);else{var H=(z*F-E*B)/G,I=(D*B-k*F)/G;(H-M)*(H-M)+(I-c)*(I-c)>196*v*v?(C=L-P,N=w-A,C/=W=Math.sqrt(C*C+N*N),N/=W,C*=v,N*=v,p.push(M-C,c-N),p.push(x,_,d,g),p.push(M+C,c+N),p.push(x,_,d,g),p.push(M-C,c-N),p.push(x,_,d,g),a++):(p.push(H,I),p.push(x,_,d,g),p.push(M-(H-M),c-(I-c)),p.push(x,_,d,g))}}b=t[2*(r-2)],q=t[2*(r-2)+1],M=t[2*(r-1)],L=-(q-(c=t[2*(r-1)+1])),w=b-M,L/=W=Math.sqrt(L*L+w*w),w/=W,L*=v,w*=v,p.push(M-L,c-w),p.push(x,_,d,g),p.push(M+L,c+w),p.push(x,_,d,g),l.push(o);for(var J=0;J<a;++J)l.push(o++);l.push(o-1)}}function buildNativeLine(h,s){var t=0,i=h.points;if(0!==i.length){var u=s.points,e=i.length/2,n=(0,_utils.hex2rgb)(h.lineColor),p=h.lineAlpha,l=n[0]*p,r=n[1]*p,a=n[2]*p;for(t=1;t<e;t++){var o=i[2*(t-1)],v=i[2*(t-1)+1],f=i[2*t],g=i[2*t+1];u.push(o,v),u.push(l,r,a,p),u.push(f,g),u.push(l,r,a,p)}}}exports.__esModule=!0,exports.default=function(h,s,t){h.nativeLines?buildNativeLine(h,t):buildLine(h,s)};var _math=require("../../../math"),_utils=require("../../../utils");

},{"../../../math":60,"../../../utils":115}],52:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function buildPoly(e,i,u){e.points=e.shape.points.slice();var t=e.points;if(e.fill&&t.length>=6){for(var l=[],r=e.holes,n=0;n<r.length;n++){var s=r[n];l.push(t.length/2),t=t.concat(s.points)}var o=i.points,a=i.indices,p=t.length/2,h=(0,_utils.hex2rgb)(e.fillColor),f=e.fillAlpha,_=h[0]*f,d=h[1]*f,c=h[2]*f,b=(0,_earcut2.default)(t,l,2);if(!b)return;for(var g=o.length/6,v=0;v<b.length;v+=3)a.push(b[v]+g),a.push(b[v]+g),a.push(b[v+1]+g),a.push(b[v+2]+g),a.push(b[v+2]+g);for(var q=0;q<p;q++)o.push(t[2*q],t[2*q+1],_,d,c,f)}e.lineWidth>0&&(0,_buildLine2.default)(e,i,u)}exports.__esModule=!0,exports.default=buildPoly;var _buildLine=require("./buildLine"),_buildLine2=_interopRequireDefault(_buildLine),_utils=require("../../../utils"),_earcut=require("earcut"),_earcut2=_interopRequireDefault(_earcut);

},{"../../../utils":115,"./buildLine":51,"earcut":2}],53:[function(require,module,exports){
"use strict";function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function buildRectangle(i,e,u){var l=i.shape,t=l.x,s=l.y,n=l.width,p=l.height;if(i.fill){var r=(0,_utils.hex2rgb)(i.fillColor),h=i.fillAlpha,d=r[0]*h,o=r[1]*h,a=r[2]*h,f=e.points,_=e.indices,b=f.length/6;f.push(t,s),f.push(d,o,a,h),f.push(t+n,s),f.push(d,o,a,h),f.push(t,s+p),f.push(d,o,a,h),f.push(t+n,s+p),f.push(d,o,a,h),_.push(b,b,b+1,b+2,b+3,b+3)}if(i.lineWidth){var c=i.points;i.points=[t,s,t+n,s,t+n,s+p,t,s+p,t,s],(0,_buildLine2.default)(i,e,u),i.points=c}}exports.__esModule=!0,exports.default=buildRectangle;var _buildLine=require("./buildLine"),_buildLine2=_interopRequireDefault(_buildLine),_utils=require("../../../utils");

},{"../../../utils":115,"./buildLine":51}],54:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function buildRoundedRectangle(e,t,u){var i=e.shape,r=i.x,l=i.y,n=i.width,a=i.height,d=i.radius,s=[];if(s.push(r,l+d),quadraticBezierCurve(r,l+a-d,r,l+a,r+d,l+a,s),quadraticBezierCurve(r+n-d,l+a,r+n,l+a,r+n,l+a-d,s),quadraticBezierCurve(r+n,l+d,r+n,l,r+n-d,l,s),quadraticBezierCurve(r+d,l,r,l,r,l+d+1e-10,s),e.fill){for(var o=(0,_utils.hex2rgb)(e.fillColor),f=e.fillAlpha,h=o[0]*f,p=o[1]*f,c=o[2]*f,_=t.points,g=t.indices,v=_.length/6,q=(0,_earcut2.default)(s,null,2),b=0,P=q.length;b<P;b+=3)g.push(q[b]+v),g.push(q[b]+v),g.push(q[b+1]+v),g.push(q[b+2]+v),g.push(q[b+2]+v);for(var R=0,C=s.length;R<C;R++)_.push(s[R],s[++R],h,p,c,f)}if(e.lineWidth){var z=e.points;e.points=s,(0,_buildLine2.default)(e,t,u),e.points=z}}function getPt(e,t,u){return e+(t-e)*u}function quadraticBezierCurve(e,t,u,i,r,l){for(var n=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],a=0,d=0,s=0,o=0,f=0,h=0,p=0,c=0;p<=20;++p)a=getPt(e,u,c=p/20),d=getPt(t,i,c),s=getPt(u,r,c),o=getPt(i,l,c),f=getPt(a,s,c),h=getPt(d,o,c),n.push(f,h);return n}exports.__esModule=!0,exports.default=buildRoundedRectangle;var _earcut=require("earcut"),_earcut2=_interopRequireDefault(_earcut),_buildLine=require("./buildLine"),_buildLine2=_interopRequireDefault(_buildLine),_utils=require("../../../utils");

},{"../../../utils":115,"./buildLine":51,"earcut":2}],55:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.autoDetectRenderer=exports.Application=exports.Filter=exports.SpriteMaskFilter=exports.Quad=exports.RenderTarget=exports.ObjectRenderer=exports.WebGLManager=exports.Shader=exports.CanvasRenderTarget=exports.TextureUvs=exports.VideoBaseTexture=exports.BaseRenderTexture=exports.RenderTexture=exports.BaseTexture=exports.TextureMatrix=exports.Texture=exports.Spritesheet=exports.CanvasGraphicsRenderer=exports.GraphicsRenderer=exports.GraphicsData=exports.Graphics=exports.TextMetrics=exports.TextStyle=exports.Text=exports.SpriteRenderer=exports.CanvasTinter=exports.CanvasSpriteRenderer=exports.Sprite=exports.TransformBase=exports.TransformStatic=exports.Transform=exports.Container=exports.DisplayObject=exports.Bounds=exports.glCore=exports.WebGLRenderer=exports.CanvasRenderer=exports.ticker=exports.utils=exports.settings=void 0;var _const=require("./const");Object.keys(_const).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _const[e]}})});var _math=require("./math");Object.keys(_math).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _math[e]}})});var _pixiGlCore=require("pixi-gl-core");Object.defineProperty(exports,"glCore",{enumerable:!0,get:function(){return _interopRequireDefault(_pixiGlCore).default}});var _Bounds=require("./display/Bounds");Object.defineProperty(exports,"Bounds",{enumerable:!0,get:function(){return _interopRequireDefault(_Bounds).default}});var _DisplayObject=require("./display/DisplayObject");Object.defineProperty(exports,"DisplayObject",{enumerable:!0,get:function(){return _interopRequireDefault(_DisplayObject).default}});var _Container=require("./display/Container");Object.defineProperty(exports,"Container",{enumerable:!0,get:function(){return _interopRequireDefault(_Container).default}});var _Transform=require("./display/Transform");Object.defineProperty(exports,"Transform",{enumerable:!0,get:function(){return _interopRequireDefault(_Transform).default}});var _TransformStatic=require("./display/TransformStatic");Object.defineProperty(exports,"TransformStatic",{enumerable:!0,get:function(){return _interopRequireDefault(_TransformStatic).default}});var _TransformBase=require("./display/TransformBase");Object.defineProperty(exports,"TransformBase",{enumerable:!0,get:function(){return _interopRequireDefault(_TransformBase).default}});var _Sprite=require("./sprites/Sprite");Object.defineProperty(exports,"Sprite",{enumerable:!0,get:function(){return _interopRequireDefault(_Sprite).default}});var _CanvasSpriteRenderer=require("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(exports,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(_CanvasSpriteRenderer).default}});var _CanvasTinter=require("./sprites/canvas/CanvasTinter");Object.defineProperty(exports,"CanvasTinter",{enumerable:!0,get:function(){return _interopRequireDefault(_CanvasTinter).default}});var _SpriteRenderer=require("./sprites/webgl/SpriteRenderer");Object.defineProperty(exports,"SpriteRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(_SpriteRenderer).default}});var _Text=require("./text/Text");Object.defineProperty(exports,"Text",{enumerable:!0,get:function(){return _interopRequireDefault(_Text).default}});var _TextStyle=require("./text/TextStyle");Object.defineProperty(exports,"TextStyle",{enumerable:!0,get:function(){return _interopRequireDefault(_TextStyle).default}});var _TextMetrics=require("./text/TextMetrics");Object.defineProperty(exports,"TextMetrics",{enumerable:!0,get:function(){return _interopRequireDefault(_TextMetrics).default}});var _Graphics=require("./graphics/Graphics");Object.defineProperty(exports,"Graphics",{enumerable:!0,get:function(){return _interopRequireDefault(_Graphics).default}});var _GraphicsData=require("./graphics/GraphicsData");Object.defineProperty(exports,"GraphicsData",{enumerable:!0,get:function(){return _interopRequireDefault(_GraphicsData).default}});var _GraphicsRenderer=require("./graphics/webgl/GraphicsRenderer");Object.defineProperty(exports,"GraphicsRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(_GraphicsRenderer).default}});var _CanvasGraphicsRenderer=require("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(exports,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(_CanvasGraphicsRenderer).default}});var _Spritesheet=require("./textures/Spritesheet");Object.defineProperty(exports,"Spritesheet",{enumerable:!0,get:function(){return _interopRequireDefault(_Spritesheet).default}});var _Texture=require("./textures/Texture");Object.defineProperty(exports,"Texture",{enumerable:!0,get:function(){return _interopRequireDefault(_Texture).default}});var _TextureMatrix=require("./textures/TextureMatrix");Object.defineProperty(exports,"TextureMatrix",{enumerable:!0,get:function(){return _interopRequireDefault(_TextureMatrix).default}});var _BaseTexture=require("./textures/BaseTexture");Object.defineProperty(exports,"BaseTexture",{enumerable:!0,get:function(){return _interopRequireDefault(_BaseTexture).default}});var _RenderTexture=require("./textures/RenderTexture");Object.defineProperty(exports,"RenderTexture",{enumerable:!0,get:function(){return _interopRequireDefault(_RenderTexture).default}});var _BaseRenderTexture=require("./textures/BaseRenderTexture");Object.defineProperty(exports,"BaseRenderTexture",{enumerable:!0,get:function(){return _interopRequireDefault(_BaseRenderTexture).default}});var _VideoBaseTexture=require("./textures/VideoBaseTexture");Object.defineProperty(exports,"VideoBaseTexture",{enumerable:!0,get:function(){return _interopRequireDefault(_VideoBaseTexture).default}});var _TextureUvs=require("./textures/TextureUvs");Object.defineProperty(exports,"TextureUvs",{enumerable:!0,get:function(){return _interopRequireDefault(_TextureUvs).default}});var _CanvasRenderTarget=require("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(exports,"CanvasRenderTarget",{enumerable:!0,get:function(){return _interopRequireDefault(_CanvasRenderTarget).default}});var _Shader=require("./Shader");Object.defineProperty(exports,"Shader",{enumerable:!0,get:function(){return _interopRequireDefault(_Shader).default}});var _WebGLManager=require("./renderers/webgl/managers/WebGLManager");Object.defineProperty(exports,"WebGLManager",{enumerable:!0,get:function(){return _interopRequireDefault(_WebGLManager).default}});var _ObjectRenderer=require("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(exports,"ObjectRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(_ObjectRenderer).default}});var _RenderTarget=require("./renderers/webgl/utils/RenderTarget");Object.defineProperty(exports,"RenderTarget",{enumerable:!0,get:function(){return _interopRequireDefault(_RenderTarget).default}});var _Quad=require("./renderers/webgl/utils/Quad");Object.defineProperty(exports,"Quad",{enumerable:!0,get:function(){return _interopRequireDefault(_Quad).default}});var _SpriteMaskFilter=require("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(exports,"SpriteMaskFilter",{enumerable:!0,get:function(){return _interopRequireDefault(_SpriteMaskFilter).default}});var _Filter=require("./renderers/webgl/filters/Filter");Object.defineProperty(exports,"Filter",{enumerable:!0,get:function(){return _interopRequireDefault(_Filter).default}});var _Application=require("./Application");Object.defineProperty(exports,"Application",{enumerable:!0,get:function(){return _interopRequireDefault(_Application).default}});var _autoDetectRenderer=require("./autoDetectRenderer");Object.defineProperty(exports,"autoDetectRenderer",{enumerable:!0,get:function(){return _autoDetectRenderer.autoDetectRenderer}});var _utils=require("./utils"),utils=_interopRequireWildcard(_utils),_ticker=require("./ticker"),ticker=_interopRequireWildcard(_ticker),_settings=require("./settings"),_settings2=_interopRequireDefault(_settings),_CanvasRenderer=require("./renderers/canvas/CanvasRenderer"),_CanvasRenderer2=_interopRequireDefault(_CanvasRenderer),_WebGLRenderer=require("./renderers/webgl/WebGLRenderer"),_WebGLRenderer2=_interopRequireDefault(_WebGLRenderer);exports.settings=_settings2.default,exports.utils=utils,exports.ticker=ticker,exports.CanvasRenderer=_CanvasRenderer2.default,exports.WebGLRenderer=_WebGLRenderer2.default;

},{"./Application":33,"./Shader":34,"./autoDetectRenderer":35,"./const":36,"./display/Bounds":37,"./display/Container":38,"./display/DisplayObject":39,"./display/Transform":40,"./display/TransformBase":41,"./display/TransformStatic":42,"./graphics/Graphics":43,"./graphics/GraphicsData":44,"./graphics/canvas/CanvasGraphicsRenderer":45,"./graphics/webgl/GraphicsRenderer":47,"./math":60,"./renderers/canvas/CanvasRenderer":67,"./renderers/canvas/utils/CanvasRenderTarget":69,"./renderers/webgl/WebGLRenderer":74,"./renderers/webgl/filters/Filter":76,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":79,"./renderers/webgl/managers/WebGLManager":83,"./renderers/webgl/utils/ObjectRenderer":84,"./renderers/webgl/utils/Quad":85,"./renderers/webgl/utils/RenderTarget":86,"./settings":91,"./sprites/Sprite":92,"./sprites/canvas/CanvasSpriteRenderer":93,"./sprites/canvas/CanvasTinter":94,"./sprites/webgl/SpriteRenderer":96,"./text/Text":98,"./text/TextMetrics":99,"./text/TextStyle":100,"./textures/BaseRenderTexture":101,"./textures/BaseTexture":102,"./textures/RenderTexture":103,"./textures/Spritesheet":104,"./textures/Texture":105,"./textures/TextureMatrix":106,"./textures/TextureUvs":107,"./textures/VideoBaseTexture":108,"./ticker":111,"./utils":115,"pixi-gl-core":19}],56:[function(require,module,exports){
"use strict";function _interopRequireDefault(u){return u&&u.__esModule?u:{default:u}}function signum(u){return u<0?-1:u>0?1:0}function init(){for(var u=0;u<16;u++){var r=[];mul.push(r);for(var t=0;t<16;t++)for(var n=signum(ux[u]*ux[t]+vx[u]*uy[t]),i=signum(uy[u]*ux[t]+vy[u]*uy[t]),e=signum(ux[u]*vx[t]+vx[u]*vy[t]),o=signum(uy[u]*vx[t]+vy[u]*vy[t]),a=0;a<16;a++)if(ux[a]===n&&uy[a]===i&&vx[a]===e&&vy[a]===o){r.push(a);break}}for(var v=0;v<16;v++){var p=new _Matrix2.default;p.set(ux[v],uy[v],vx[v],vy[v],0,0),tempMatrices.push(p)}}exports.__esModule=!0;var _Matrix=require("./Matrix"),_Matrix2=_interopRequireDefault(_Matrix),ux=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],tempMatrices=[],mul=[];init();var GroupD8={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(u){return ux[u]},uY:function(u){return uy[u]},vX:function(u){return vx[u]},vY:function(u){return vy[u]},inv:function(u){return 8&u?15&u:7&-u},add:function(u,r){return mul[u][r]},sub:function(u,r){return mul[u][GroupD8.inv(r)]},rotate180:function(u){return 4^u},isVertical:function(u){return 2==(3&u)},byDirection:function(u,r){return 2*Math.abs(u)<=Math.abs(r)?r>=0?GroupD8.S:GroupD8.N:2*Math.abs(r)<=Math.abs(u)?u>0?GroupD8.E:GroupD8.W:r>0?u>0?GroupD8.SE:GroupD8.SW:u>0?GroupD8.NE:GroupD8.NW},matrixAppendRotationInv:function(u,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=tempMatrices[GroupD8.inv(r)];i.tx=t,i.ty=n,u.append(i)}};exports.default=GroupD8;

},{"./Matrix":57}],57:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _createClass=function(){function t(t,i){for(var s=0;s<i.length;s++){var h=i[s];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}return function(i,s,h){return s&&t(i.prototype,s),h&&t(i,h),i}}(),_Point=require("./Point"),_Point2=_interopRequireDefault(_Point),Matrix=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,e=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;_classCallCheck(this,t),this.a=i,this.b=s,this.c=h,this.d=n,this.tx=r,this.ty=e,this.array=null}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,i,s,h,n,r){return this.a=t,this.b=i,this.c=s,this.d=h,this.tx=n,this.ty=r,this},t.prototype.toArray=function(t,i){this.array||(this.array=new Float32Array(9));var s=i||this.array;return t?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s},t.prototype.apply=function(t,i){i=i||new _Point2.default;var s=t.x,h=t.y;return i.x=this.a*s+this.c*h+this.tx,i.y=this.b*s+this.d*h+this.ty,i},t.prototype.applyInverse=function(t,i){i=i||new _Point2.default;var s=1/(this.a*this.d+this.c*-this.b),h=t.x,n=t.y;return i.x=this.d*s*h+-this.c*s*n+(this.ty*this.c-this.tx*this.d)*s,i.y=this.a*s*n+-this.b*s*h+(-this.ty*this.a+this.tx*this.b)*s,i},t.prototype.translate=function(t,i){return this.tx+=t,this.ty+=i,this},t.prototype.scale=function(t,i){return this.a*=t,this.d*=i,this.c*=t,this.b*=i,this.tx*=t,this.ty*=i,this},t.prototype.rotate=function(t){var i=Math.cos(t),s=Math.sin(t),h=this.a,n=this.c,r=this.tx;return this.a=h*i-this.b*s,this.b=h*s+this.b*i,this.c=n*i-this.d*s,this.d=n*s+this.d*i,this.tx=r*i-this.ty*s,this.ty=r*s+this.ty*i,this},t.prototype.append=function(t){var i=this.a,s=this.b,h=this.c,n=this.d;return this.a=t.a*i+t.b*h,this.b=t.a*s+t.b*n,this.c=t.c*i+t.d*h,this.d=t.c*s+t.d*n,this.tx=t.tx*i+t.ty*h+this.tx,this.ty=t.tx*s+t.ty*n+this.ty,this},t.prototype.setTransform=function(t,i,s,h,n,r,e,a,o){var c=Math.sin(e),y=Math.cos(e),u=Math.cos(o),p=Math.sin(o),d=-Math.sin(a),l=Math.cos(a),f=y*n,x=c*n,b=-c*r,v=y*r;return this.a=u*f+p*b,this.b=u*x+p*v,this.c=d*f+l*b,this.d=d*x+l*v,this.tx=t+(s*f+h*b),this.ty=i+(s*x+h*v),this},t.prototype.prepend=function(t){var i=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var s=this.a,h=this.c;this.a=s*t.a+this.b*t.c,this.b=s*t.b+this.b*t.d,this.c=h*t.a+this.d*t.c,this.d=h*t.b+this.d*t.d}return this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var i=this.a,s=this.b,h=this.c,n=this.d,r=-Math.atan2(-h,n),e=Math.atan2(s,i);return Math.abs(r+e)<1e-5?(t.rotation=e,i<0&&n>=0&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.skew.x=r,t.skew.y=e),t.scale.x=Math.sqrt(i*i+s*s),t.scale.y=Math.sqrt(h*h+n*n),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,i=this.b,s=this.c,h=this.d,n=this.tx,r=t*h-i*s;return this.a=h/r,this.b=-i/r,this.c=-s/r,this.d=t/r,this.tx=(s*this.ty-h*n)/r,this.ty=-(t*this.ty-i*n)/r,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var i=new t;return i.a=this.a,i.b=this.b,i.c=this.c,i.d=this.d,i.tx=this.tx,i.ty=this.ty,i},t.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},_createClass(t,null,[{key:"IDENTITY",get:function(){return new t}},{key:"TEMP_MATRIX",get:function(){return new t}}]),t}();exports.default=Matrix;

},{"./Point":59}],58:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,s,i){return s&&t(e.prototype,s),i&&t(e,i),e}}(),ObservablePoint=function(){function t(e,s){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;_classCallCheck(this,t),this._x=i,this._y=n,this.cb=e,this.scope=s}return t.prototype.set=function(t,e){var s=t||0,i=e||(0!==e?s:0);this._x===s&&this._y===i||(this._x=s,this._y=i,this.cb.call(this.scope))},t.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},_createClass(t,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),t}();exports.default=ObservablePoint;

},{}],59:[function(require,module,exports){
"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var Point=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,t),this.x=n,this.y=o}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,n){this.x=t||0,this.y=n||(0!==n?this.x:0)},t}();exports.default=Point;

},{}],60:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _Point=require("./Point");Object.defineProperty(exports,"Point",{enumerable:!0,get:function(){return _interopRequireDefault(_Point).default}});var _ObservablePoint=require("./ObservablePoint");Object.defineProperty(exports,"ObservablePoint",{enumerable:!0,get:function(){return _interopRequireDefault(_ObservablePoint).default}});var _Matrix=require("./Matrix");Object.defineProperty(exports,"Matrix",{enumerable:!0,get:function(){return _interopRequireDefault(_Matrix).default}});var _GroupD=require("./GroupD8");Object.defineProperty(exports,"GroupD8",{enumerable:!0,get:function(){return _interopRequireDefault(_GroupD).default}});var _Circle=require("./shapes/Circle");Object.defineProperty(exports,"Circle",{enumerable:!0,get:function(){return _interopRequireDefault(_Circle).default}});var _Ellipse=require("./shapes/Ellipse");Object.defineProperty(exports,"Ellipse",{enumerable:!0,get:function(){return _interopRequireDefault(_Ellipse).default}});var _Polygon=require("./shapes/Polygon");Object.defineProperty(exports,"Polygon",{enumerable:!0,get:function(){return _interopRequireDefault(_Polygon).default}});var _Rectangle=require("./shapes/Rectangle");Object.defineProperty(exports,"Rectangle",{enumerable:!0,get:function(){return _interopRequireDefault(_Rectangle).default}});var _RoundedRectangle=require("./shapes/RoundedRectangle");Object.defineProperty(exports,"RoundedRectangle",{enumerable:!0,get:function(){return _interopRequireDefault(_RoundedRectangle).default}});

},{"./GroupD8":56,"./Matrix":57,"./ObservablePoint":58,"./Point":59,"./shapes/Circle":61,"./shapes/Ellipse":62,"./shapes/Polygon":63,"./shapes/Rectangle":64,"./shapes/RoundedRectangle":65}],61:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _Rectangle=require("./Rectangle"),_Rectangle2=_interopRequireDefault(_Rectangle),_const=require("../../const"),Circle=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck(this,t),this.x=e,this.y=i,this.radius=s,this.type=_const.SHAPES.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,s=this.x-t,n=this.y-e;return s*=s,n*=n,s+n<=i},t.prototype.getBounds=function(){return new _Rectangle2.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}();exports.default=Circle;

},{"../../const":36,"./Rectangle":64}],62:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _Rectangle=require("./Rectangle"),_Rectangle2=_interopRequireDefault(_Rectangle),_const=require("../../const"),Ellipse=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;_classCallCheck(this,t),this.x=e,this.y=i,this.width=h,this.height=n,this.type=_const.SHAPES.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,h=(e-this.y)/this.height;return i*=i,h*=h,i+h<=1},t.prototype.getBounds=function(){return new _Rectangle2.default(this.x-this.width,this.y-this.height,this.width,this.height)},t}();exports.default=Ellipse;

},{"../../const":36,"./Rectangle":64}],63:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _Point=require("../Point"),_Point2=_interopRequireDefault(_Point),_const=require("../../const"),Polygon=function(){function t(){for(var n=arguments.length,o=Array(n),e=0;e<n;e++)o[e]=arguments[e];if(_classCallCheck(this,t),Array.isArray(o[0])&&(o=o[0]),o[0]instanceof _Point2.default){for(var i=[],s=0,r=o.length;s<r;s++)i.push(o[s].x,o[s].y);o=i}this.closed=!0,this.points=o,this.type=_const.SHAPES.POLY}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},t.prototype.contains=function(t,n){for(var o=!1,e=this.points.length/2,i=0,s=e-1;i<e;s=i++){var r=this.points[2*i],a=this.points[2*i+1],l=this.points[2*s],u=this.points[2*s+1];a>n!=u>n&&t<(n-a)/(u-a)*(l-r)+r&&(o=!o)}return o},t}();exports.default=Polygon;

},{"../../const":36,"../Point":59}],64:[function(require,module,exports){
"use strict";function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _createClass=function(){function t(t,i){for(var h=0;h<i.length;h++){var e=i[h];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(i,h,e){return h&&t(i.prototype,h),e&&t(i,e),i}}(),_const=require("../../const"),Rectangle=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;_classCallCheck(this,t),this.x=Number(i),this.y=Number(h),this.width=Number(e),this.height=Number(s),this.type=_const.SHAPES.RECT}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.contains=function(t,i){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&i>=this.y&&i<this.y+this.height)},t.prototype.pad=function(t,i){t=t||0,i=i||(0!==i?t:0),this.x-=t,this.y-=i,this.width+=2*t,this.height+=2*i},t.prototype.fit=function(t){this.x<t.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=t.x),this.y<t.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=t.y),this.x+this.width>t.x+t.width&&(this.width=t.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>t.y+t.height&&(this.height=t.height-this.y,this.height<0&&(this.height=0))},t.prototype.enlarge=function(t){var i=Math.min(this.x,t.x),h=Math.max(this.x+this.width,t.x+t.width),e=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);this.x=i,this.width=h-i,this.y=e,this.height=s-e},_createClass(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new t(0,0,0,0)}}]),t}();exports.default=Rectangle;

},{"../../const":36}],65:[function(require,module,exports){
"use strict";function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _const=require("../../const"),RoundedRectangle=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;_classCallCheck(this,t),this.x=i,this.y=s,this.width=h,this.height=r,this.radius=e,this.type=_const.SHAPES.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,i){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height){if(i>=this.y+this.radius&&i<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var s=t-(this.x+this.radius),h=i-(this.y+this.radius),r=this.radius*this.radius;if(s*s+h*h<=r)return!0;if((s=t-(this.x+this.width-this.radius))*s+h*h<=r)return!0;if(h=i-(this.y+this.height-this.radius),s*s+h*h<=r)return!0;if((s=t-(this.x+this.radius))*s+h*h<=r)return!0}return!1},t}();exports.default=RoundedRectangle;

},{"../../const":36}],66:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_utils=require("../utils"),_math=require("../math"),_const=require("../const"),_settings=require("../settings"),_settings2=_interopRequireDefault(_settings),_Container=require("../display/Container"),_Container2=_interopRequireDefault(_Container),_RenderTexture=require("../textures/RenderTexture"),_RenderTexture2=_interopRequireDefault(_RenderTexture),_eventemitter=require("eventemitter3"),_eventemitter2=_interopRequireDefault(_eventemitter),tempMatrix=new _math.Matrix,SystemRenderer=function(e){function t(r,n,i,o){_classCallCheck(this,t);var s=_possibleConstructorReturn(this,e.call(this));return(0,_utils.sayHello)(r),"number"==typeof n&&(n=Object.assign({width:n,height:i||_settings2.default.RENDER_OPTIONS.height},o)),n=Object.assign({},_settings2.default.RENDER_OPTIONS,n),s.options=n,s.type=_const.RENDERER_TYPE.UNKNOWN,s.screen=new _math.Rectangle(0,0,n.width,n.height),s.view=n.view||document.createElement("canvas"),s.resolution=n.resolution||_settings2.default.RESOLUTION,s.transparent=n.transparent,s.autoResize=n.autoResize||!1,s.blendModes=null,s.preserveDrawingBuffer=n.preserveDrawingBuffer,s.clearBeforeRender=n.clearBeforeRender,s.roundPixels=n.roundPixels,s._backgroundColor=0,s._backgroundColorRgba=[0,0,0,0],s._backgroundColorString="#000000",s.backgroundColor=n.backgroundColor||s._backgroundColor,s._tempDisplayObjectParent=new _Container2.default,s._lastObjectRendered=s._tempDisplayObjectParent,s}return _inherits(t,e),t.prototype.resize=function(e,t){this.screen.width=e,this.screen.height=t,this.view.width=e*this.resolution,this.view.height=t*this.resolution,this.autoResize&&(this.view.style.width=e+"px",this.view.style.height=t+"px")},t.prototype.generateTexture=function(e,t,r,n){n=n||e.getLocalBounds();var i=_RenderTexture2.default.create(0|n.width,0|n.height,t,r);return tempMatrix.tx=-n.x,tempMatrix.ty=-n.y,this.render(e,i,!1,tempMatrix,!0),i},t.prototype.destroy=function(e){e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=_const.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},_createClass(t,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=(0,_utils.hex2string)(e),(0,_utils.hex2rgb)(e,this._backgroundColorRgba)}}]),t}(_eventemitter2.default);exports.default=SystemRenderer;

},{"../const":36,"../display/Container":38,"../math":60,"../settings":91,"../textures/RenderTexture":103,"../utils":115,"eventemitter3":3}],67:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _SystemRenderer2=require("../SystemRenderer"),_SystemRenderer3=_interopRequireDefault(_SystemRenderer2),_CanvasMaskManager=require("./utils/CanvasMaskManager"),_CanvasMaskManager2=_interopRequireDefault(_CanvasMaskManager),_CanvasRenderTarget=require("./utils/CanvasRenderTarget"),_CanvasRenderTarget2=_interopRequireDefault(_CanvasRenderTarget),_mapCanvasBlendModesToPixi=require("./utils/mapCanvasBlendModesToPixi"),_mapCanvasBlendModesToPixi2=_interopRequireDefault(_mapCanvasBlendModesToPixi),_utils=require("../../utils"),_const=require("../../const"),_settings=require("../../settings"),_settings2=_interopRequireDefault(_settings),CanvasRenderer=function(e){function t(n,o,r){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,e.call(this,"Canvas",n,o,r));return i.type=_const.RENDERER_TYPE.CANVAS,i.rootContext=i.view.getContext("2d",{alpha:i.transparent}),i.context=i.rootContext,i.refresh=!0,i.maskManager=new _CanvasMaskManager2.default(i),i.smoothProperty="imageSmoothingEnabled",i.rootContext.imageSmoothingEnabled||(i.rootContext.webkitImageSmoothingEnabled?i.smoothProperty="webkitImageSmoothingEnabled":i.rootContext.mozImageSmoothingEnabled?i.smoothProperty="mozImageSmoothingEnabled":i.rootContext.oImageSmoothingEnabled?i.smoothProperty="oImageSmoothingEnabled":i.rootContext.msImageSmoothingEnabled&&(i.smoothProperty="msImageSmoothingEnabled")),i.initPlugins(),i.blendModes=(0,_mapCanvasBlendModesToPixi2.default)(),i._activeBlendMode=null,i.renderingToScreen=!1,i.resize(i.options.width,i.options.height),i}return _inherits(t,e),t.prototype.render=function(e,t,n,o,r){if(this.view){this.renderingToScreen=!t,this.emit("prerender");var i=this.resolution;t?((t=t.baseTexture||t)._canvasRenderTarget||(t._canvasRenderTarget=new _CanvasRenderTarget2.default(t.width,t.height,t.resolution),t.source=t._canvasRenderTarget.canvas,t.valid=!0),this.context=t._canvasRenderTarget.context,this.resolution=t._canvasRenderTarget.resolution):this.context=this.rootContext;var s=this.context;if(t||(this._lastObjectRendered=e),!r){var a=e.parent,l=this._tempDisplayObjectParent.transform.worldTransform;o?(o.copy(l),this._tempDisplayObjectParent.transform._worldID=-1):l.identity(),e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=a}s.save(),s.setTransform(1,0,0,1,0,0),s.globalAlpha=1,this._activeBlendMode=_const.BLEND_MODES.NORMAL,s.globalCompositeOperation=this.blendModes[_const.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(s.fillStyle="black",s.clear()),(void 0!==n?n:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?s.clearRect(0,0,this.width,this.height):(s.fillStyle=this._backgroundColorString,s.fillRect(0,0,this.width,this.height)));var h=this.context;this.context=s,e.renderCanvas(this),this.context=h,s.restore(),this.resolution=i,this.emit("postrender")}},t.prototype.clear=function(e){var t=this.context;e=e||this._backgroundColorString,!this.transparent&&e?(t.fillStyle=e,t.fillRect(0,0,this.width,this.height)):t.clearRect(0,0,this.width,this.height)},t.prototype.setBlendMode=function(e){this._activeBlendMode!==e&&(this._activeBlendMode=e,this.context.globalCompositeOperation=this.blendModes[e])},t.prototype.destroy=function(t){this.destroyPlugins(),e.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},t.prototype.resize=function(t,n){e.prototype.resize.call(this,t,n),this.smoothProperty&&(this.rootContext[this.smoothProperty]=_settings2.default.SCALE_MODE===_const.SCALE_MODES.LINEAR)},t.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},t}(_SystemRenderer3.default);exports.default=CanvasRenderer,_utils.pluginTarget.mixin(CanvasRenderer);

},{"../../const":36,"../../settings":91,"../../utils":115,"../SystemRenderer":66,"./utils/CanvasMaskManager":68,"./utils/CanvasRenderTarget":69,"./utils/mapCanvasBlendModesToPixi":71}],68:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _const=require("../../../const"),CanvasMaskManager=function(){function e(t){_classCallCheck(this,e),this.renderer=t}return e.prototype.pushMask=function(e){var t=this.renderer;t.context.save();var r=e.alpha,a=e.transform.worldTransform,o=t.resolution;t.context.setTransform(a.a*o,a.b*o,a.c*o,a.d*o,a.tx*o,a.ty*o),e._texture||(this.renderGraphicsShape(e),t.context.clip()),e.worldAlpha=r},e.prototype.renderGraphicsShape=function(e){var t=this.renderer.context,r=e.graphicsData.length;if(0!==r){t.beginPath();for(var a=0;a<r;a++){var o=e.graphicsData[a],n=o.shape;if(o.type===_const.SHAPES.POLY){var s=n.points;t.moveTo(s[0],s[1]);for(var i=1;i<s.length/2;i++)t.lineTo(s[2*i],s[2*i+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&t.closePath()}else if(o.type===_const.SHAPES.RECT)t.rect(n.x,n.y,n.width,n.height),t.closePath();else if(o.type===_const.SHAPES.CIRC)t.arc(n.x,n.y,n.radius,0,2*Math.PI),t.closePath();else if(o.type===_const.SHAPES.ELIP){var c=2*n.width,h=2*n.height,l=n.x-c/2,p=n.y-h/2,u=c/2*.5522848,v=h/2*.5522848,d=l+c,f=p+h,T=l+c/2,C=p+h/2;t.moveTo(l,C),t.bezierCurveTo(l,C-v,T-u,p,T,p),t.bezierCurveTo(T+u,p,d,C-v,d,C),t.bezierCurveTo(d,C+v,T+u,f,T,f),t.bezierCurveTo(T-u,f,l,C+v,l,C),t.closePath()}else if(o.type===_const.SHAPES.RREC){var y=n.x,P=n.y,x=n.width,g=n.height,S=n.radius,_=Math.min(x,g)/2|0;S=S>_?_:S,t.moveTo(y,P+S),t.lineTo(y,P+g-S),t.quadraticCurveTo(y,P+g,y+S,P+g),t.lineTo(y+x-S,P+g),t.quadraticCurveTo(y+x,P+g,y+x,P+g-S),t.lineTo(y+x,P+S),t.quadraticCurveTo(y+x,P,y+x-S,P),t.lineTo(y+S,P),t.quadraticCurveTo(y,P,y,P+S),t.closePath()}}}},e.prototype.popMask=function(e){e.context.restore(),e.invalidateBlendMode()},e.prototype.destroy=function(){},e}();exports.default=CanvasMaskManager;

},{"../../../const":36}],69:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),_settings=require("../../../settings"),_settings2=_interopRequireDefault(_settings),CanvasRenderTarget=function(){function t(e,n,s){_classCallCheck(this,t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=s||_settings2.default.RESOLUTION,this.resize(e,n)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},_createClass(t,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),t}();exports.default=CanvasRenderTarget;

},{"../../../settings":91}],70:[function(require,module,exports){
"use strict";function createColoredCanvas(e){var t=document.createElement("canvas");t.width=6,t.height=1;var a=t.getContext("2d");return a.fillStyle=e,a.fillRect(0,0,6,1),t}function canUseNewCanvasBlendModes(){if("undefined"==typeof document)return!1;var e=createColoredCanvas("#ff00ff"),t=createColoredCanvas("#ffff00"),a=document.createElement("canvas");a.width=6,a.height=1;var n=a.getContext("2d");n.globalCompositeOperation="multiply",n.drawImage(e,0,0),n.drawImage(t,2,0);var r=n.getImageData(2,0,1,1);if(!r)return!1;var o=r.data;return 255===o[0]&&0===o[1]&&0===o[2]}exports.__esModule=!0,exports.default=canUseNewCanvasBlendModes;

},{}],71:[function(require,module,exports){
"use strict";function _interopRequireDefault(E){return E&&E.__esModule?E:{default:E}}function mapCanvasBlendModesToPixi(){var E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,_canUseNewCanvasBlendModes2.default)()?(E[_const.BLEND_MODES.NORMAL]="source-over",E[_const.BLEND_MODES.ADD]="lighter",E[_const.BLEND_MODES.MULTIPLY]="multiply",E[_const.BLEND_MODES.SCREEN]="screen",E[_const.BLEND_MODES.OVERLAY]="overlay",E[_const.BLEND_MODES.DARKEN]="darken",E[_const.BLEND_MODES.LIGHTEN]="lighten",E[_const.BLEND_MODES.COLOR_DODGE]="color-dodge",E[_const.BLEND_MODES.COLOR_BURN]="color-burn",E[_const.BLEND_MODES.HARD_LIGHT]="hard-light",E[_const.BLEND_MODES.SOFT_LIGHT]="soft-light",E[_const.BLEND_MODES.DIFFERENCE]="difference",E[_const.BLEND_MODES.EXCLUSION]="exclusion",E[_const.BLEND_MODES.HUE]="hue",E[_const.BLEND_MODES.SATURATION]="saturate",E[_const.BLEND_MODES.COLOR]="color",E[_const.BLEND_MODES.LUMINOSITY]="luminosity"):(E[_const.BLEND_MODES.NORMAL]="source-over",E[_const.BLEND_MODES.ADD]="lighter",E[_const.BLEND_MODES.MULTIPLY]="source-over",E[_const.BLEND_MODES.SCREEN]="source-over",E[_const.BLEND_MODES.OVERLAY]="source-over",E[_const.BLEND_MODES.DARKEN]="source-over",E[_const.BLEND_MODES.LIGHTEN]="source-over",E[_const.BLEND_MODES.COLOR_DODGE]="source-over",E[_const.BLEND_MODES.COLOR_BURN]="source-over",E[_const.BLEND_MODES.HARD_LIGHT]="source-over",E[_const.BLEND_MODES.SOFT_LIGHT]="source-over",E[_const.BLEND_MODES.DIFFERENCE]="source-over",E[_const.BLEND_MODES.EXCLUSION]="source-over",E[_const.BLEND_MODES.HUE]="source-over",E[_const.BLEND_MODES.SATURATION]="source-over",E[_const.BLEND_MODES.COLOR]="source-over",E[_const.BLEND_MODES.LUMINOSITY]="source-over"),E[_const.BLEND_MODES.NORMAL_NPM]=E[_const.BLEND_MODES.NORMAL],E[_const.BLEND_MODES.ADD_NPM]=E[_const.BLEND_MODES.ADD],E[_const.BLEND_MODES.SCREEN_NPM]=E[_const.BLEND_MODES.SCREEN],E}exports.__esModule=!0,exports.default=mapCanvasBlendModesToPixi;var _const=require("../../../const"),_canUseNewCanvasBlendModes=require("./canUseNewCanvasBlendModes"),_canUseNewCanvasBlendModes2=_interopRequireDefault(_canUseNewCanvasBlendModes);

},{"../../../const":36,"./canUseNewCanvasBlendModes":70}],72:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _const=require("../../const"),_settings=require("../../settings"),_settings2=_interopRequireDefault(_settings),TextureGarbageCollector=function(){function t(e){_classCallCheck(this,t),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=_settings2.default.GC_MAX_IDLE,this.checkCountMax=_settings2.default.GC_MAX_CHECK_COUNT,this.mode=_settings2.default.GC_MODE}return t.prototype.update=function(){this.count++,this.mode!==_const.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},t.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,r=!1,n=0;n<e.length;n++){var s=e[n];!s._glRenderTargets&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),e[n]=null,r=!0)}if(r){for(var u=0,o=0;o<e.length;o++)null!==e[o]&&(e[u++]=e[o]);e.length=u}},t.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var r=t.children.length-1;r>=0;r--)this.unload(t.children[r])},t}();exports.default=TextureGarbageCollector;

},{"../../const":36,"../../settings":91}],73:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _pixiGlCore=require("pixi-gl-core"),_const=require("../../const"),_RenderTarget=require("./utils/RenderTarget"),_RenderTarget2=_interopRequireDefault(_RenderTarget),_utils=require("../../utils"),TextureManager=function(){function e(t){_classCallCheck(this,e),this.renderer=t,this.gl=t.gl,this._managedTextures=[]}return e.prototype.bindTexture=function(){},e.prototype.getTexture=function(){},e.prototype.updateTexture=function(e,t){var r=this.gl,s=!!e._glRenderTargets;if(!e.hasLoaded)return null;var i=this.renderer.boundTextures;if(void 0===t){t=0;for(var a=0;a<i.length;++a)if(i[a]===e){t=a;break}}i[t]=e,r.activeTexture(r.TEXTURE0+t);var n=e._glTextures[this.renderer.CONTEXT_UID];if(n)s?e._glRenderTargets[this.renderer.CONTEXT_UID].resize(e.width,e.height):n.upload(e.source);else{if(s){var u=new _RenderTarget2.default(this.gl,e.width,e.height,e.scaleMode,e.resolution);u.resize(e.width,e.height),e._glRenderTargets[this.renderer.CONTEXT_UID]=u,n=u.texture}else(n=new _pixiGlCore.GLTexture(this.gl,null,null,null,null)).bind(t),n.premultiplyAlpha=!0,n.upload(e.source);e._glTextures[this.renderer.CONTEXT_UID]=n,e.on("update",this.updateTexture,this),e.on("dispose",this.destroyTexture,this),this._managedTextures.push(e),e.isPowerOfTwo?(e.mipmap&&n.enableMipmap(),e.wrapMode===_const.WRAP_MODES.CLAMP?n.enableWrapClamp():e.wrapMode===_const.WRAP_MODES.REPEAT?n.enableWrapRepeat():n.enableWrapMirrorRepeat()):n.enableWrapClamp(),e.scaleMode===_const.SCALE_MODES.NEAREST?n.enableNearestScaling():n.enableLinearScaling()}return n},e.prototype.destroyTexture=function(e,t){if((e=e.baseTexture||e).hasLoaded){var r=this.renderer.CONTEXT_UID,s=e._glTextures,i=e._glRenderTargets;if(s[r]&&(this.renderer.unbindTexture(e),s[r].destroy(),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this),delete s[r],!t)){var a=this._managedTextures.indexOf(e);-1!==a&&(0,_utils.removeItems)(this._managedTextures,a,1)}i&&i[r]&&(i[r].destroy(),delete i[r])}},e.prototype.removeAll=function(){for(var e=0;e<this._managedTextures.length;++e){var t=this._managedTextures[e];t._glTextures[this.renderer.CONTEXT_UID]&&delete t._glTextures[this.renderer.CONTEXT_UID]}},e.prototype.destroy=function(){for(var e=0;e<this._managedTextures.length;++e){var t=this._managedTextures[e];this.destroyTexture(t,!0),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this)}this._managedTextures=null},e}();exports.default=TextureManager;

},{"../../const":36,"../../utils":115,"./utils/RenderTarget":86,"pixi-gl-core":19}],74:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _SystemRenderer2=require("../SystemRenderer"),_SystemRenderer3=_interopRequireDefault(_SystemRenderer2),_MaskManager=require("./managers/MaskManager"),_MaskManager2=_interopRequireDefault(_MaskManager),_StencilManager=require("./managers/StencilManager"),_StencilManager2=_interopRequireDefault(_StencilManager),_FilterManager=require("./managers/FilterManager"),_FilterManager2=_interopRequireDefault(_FilterManager),_RenderTarget=require("./utils/RenderTarget"),_RenderTarget2=_interopRequireDefault(_RenderTarget),_ObjectRenderer=require("./utils/ObjectRenderer"),_ObjectRenderer2=_interopRequireDefault(_ObjectRenderer),_TextureManager=require("./TextureManager"),_TextureManager2=_interopRequireDefault(_TextureManager),_BaseTexture=require("../../textures/BaseTexture"),_BaseTexture2=_interopRequireDefault(_BaseTexture),_TextureGarbageCollector=require("./TextureGarbageCollector"),_TextureGarbageCollector2=_interopRequireDefault(_TextureGarbageCollector),_WebGLState=require("./WebGLState"),_WebGLState2=_interopRequireDefault(_WebGLState),_mapWebGLDrawModesToPixi=require("./utils/mapWebGLDrawModesToPixi"),_mapWebGLDrawModesToPixi2=_interopRequireDefault(_mapWebGLDrawModesToPixi),_validateContext=require("./utils/validateContext"),_validateContext2=_interopRequireDefault(_validateContext),_utils=require("../../utils"),_pixiGlCore=require("pixi-gl-core"),_pixiGlCore2=_interopRequireDefault(_pixiGlCore),_const=require("../../const"),CONTEXT_UID=0,WebGLRenderer=function(e){function t(r,n,i){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,e.call(this,"WebGL",r,n,i));return a.legacy=a.options.legacy,a.legacy&&(_pixiGlCore2.default.VertexArrayObject.FORCE_NATIVE=!0),a.type=_const.RENDERER_TYPE.WEBGL,a.handleContextLost=a.handleContextLost.bind(a),a.handleContextRestored=a.handleContextRestored.bind(a),a.view.addEventListener("webglcontextlost",a.handleContextLost,!1),a.view.addEventListener("webglcontextrestored",a.handleContextRestored,!1),a._contextOptions={alpha:a.transparent,antialias:a.options.antialias,premultipliedAlpha:a.transparent&&"notMultiplied"!==a.transparent,stencil:!0,preserveDrawingBuffer:a.options.preserveDrawingBuffer,powerPreference:a.options.powerPreference},a._backgroundColorRgba[3]=a.transparent?0:1,a.maskManager=new _MaskManager2.default(a),a.stencilManager=new _StencilManager2.default(a),a.emptyRenderer=new _ObjectRenderer2.default(a),a.currentRenderer=a.emptyRenderer,a.textureManager=null,a.filterManager=null,a.initPlugins(),a.options.context&&(0,_validateContext2.default)(a.options.context),a.gl=a.options.context||_pixiGlCore2.default.createContext(a.view,a._contextOptions),a.CONTEXT_UID=CONTEXT_UID++,a.state=new _WebGLState2.default(a.gl),a.renderingToScreen=!0,a.boundTextures=null,a._activeShader=null,a._activeVao=null,a._activeRenderTarget=null,a._initContext(),a.drawModes=(0,_mapWebGLDrawModesToPixi2.default)(a.gl),a._nextTextureLocation=0,a.setBlendMode(0),a}return _inherits(t,e),t.prototype._initContext=function(){var e=this.gl;e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext();var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(t),this.emptyTextures=new Array(t),this.textureManager=new _TextureManager2.default(this),this.filterManager=new _FilterManager2.default(this),this.textureGC=new _TextureGarbageCollector2.default(this),this.state.resetToDefault(),this.rootRenderTarget=new _RenderTarget2.default(e,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var r=new _pixiGlCore2.default.GLTexture.fromData(e,null,1,1),n={_glTextures:{}};n._glTextures[this.CONTEXT_UID]={};for(var i=0;i<t;i++){var a=new _BaseTexture2.default;a._glTextures[this.CONTEXT_UID]=r,this.boundTextures[i]=n,this.emptyTextures[i]=a,this.bindTexture(null,i)}this.emit("context",e),this.resize(this.screen.width,this.screen.height)},t.prototype.render=function(e,t,r,n,i){if(this.renderingToScreen=!t,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,t||(this._lastObjectRendered=e),!i){var a=e.parent;e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=a}this.bindRenderTexture(t,n),this.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this._activeRenderTarget.clear(),e.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},t.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.resize=function(e,t){_SystemRenderer3.default.prototype.resize.call(this,e,t),this.rootRenderTarget.resize(e,t),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},t.prototype.setBlendMode=function(e){this.state.setBlendMode(e)},t.prototype.clear=function(e){this._activeRenderTarget.clear(e)},t.prototype.setTransform=function(e){this._activeRenderTarget.transform=e},t.prototype.clearRenderTexture=function(e,t){var r=e.baseTexture._glRenderTargets[this.CONTEXT_UID];return r&&r.clear(t),this},t.prototype.bindRenderTexture=function(e,t){var r=void 0;if(e){var n=e.baseTexture;n._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(n,0),this.unbindTexture(n),(r=n._glRenderTargets[this.CONTEXT_UID]).setFrame(e.frame)}else r=this.rootRenderTarget;return r.transform=t,this.bindRenderTarget(r),this},t.prototype.bindRenderTarget=function(e){return e!==this._activeRenderTarget&&(this._activeRenderTarget=e,e.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=e.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(e.stencilMaskStack)),this},t.prototype.bindShader=function(e,t){return this._activeShader!==e&&(this._activeShader=e,e.bind(),!1!==t&&(e.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},t.prototype.bindTexture=function(e,t,r){if(e=e||this.emptyTextures[t],e=e.baseTexture||e,e.touched=this.textureGC.count,r)t=t||0;else{for(var n=0;n<this.boundTextures.length;n++)if(this.boundTextures[n]===e)return n;void 0===t&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,t=this.boundTextures.length-this._nextTextureLocation-1)}var i=this.gl,a=e._glTextures[this.CONTEXT_UID];return a?(this.boundTextures[t]=e,i.activeTexture(i.TEXTURE0+t),i.bindTexture(i.TEXTURE_2D,a.texture)):this.textureManager.updateTexture(e,t),t},t.prototype.unbindTexture=function(e){var t=this.gl;e=e.baseTexture||e;for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]===e&&(this.boundTextures[r]=this.emptyTextures[r],t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_2D,this.emptyTextures[r]._glTextures[this.CONTEXT_UID].texture));return this},t.prototype.createVao=function(){return new _pixiGlCore2.default.VertexArrayObject(this.gl,this.state.attribState)},t.prototype.bindVao=function(e){return this._activeVao===e?this:(e?e.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=e,this)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.emptyTextures[e];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},t.prototype.handleContextLost=function(e){e.preventDefault()},t.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},t.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),e.prototype.destroy.call(this,t),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},t}(_SystemRenderer3.default);exports.default=WebGLRenderer,_utils.pluginTarget.mixin(WebGLRenderer);

},{"../../const":36,"../../textures/BaseTexture":102,"../../utils":115,"../SystemRenderer":66,"./TextureGarbageCollector":72,"./TextureManager":73,"./WebGLState":75,"./managers/FilterManager":80,"./managers/MaskManager":81,"./managers/StencilManager":82,"./utils/ObjectRenderer":84,"./utils/RenderTarget":86,"./utils/mapWebGLDrawModesToPixi":89,"./utils/validateContext":90,"pixi-gl-core":19}],75:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _mapWebGLBlendModesToPixi=require("./utils/mapWebGLBlendModesToPixi"),_mapWebGLBlendModesToPixi2=_interopRequireDefault(_mapWebGLBlendModesToPixi),BLEND=0,DEPTH_TEST=1,FRONT_FACE=2,CULL_FACE=3,BLEND_FUNC=4,WebGLState=function(){function t(e){_classCallCheck(this,t),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,_mapWebGLBlendModesToPixi2.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return t.prototype.push=function(){var t=this.stack[this.stackIndex];t||(t=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var e=0;e<this.activeState.length;e++)t[e]=this.activeState[e]},t.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},t.prototype.setState=function(t){this.setBlend(t[BLEND]),this.setDepthTest(t[DEPTH_TEST]),this.setFrontFace(t[FRONT_FACE]),this.setCullFace(t[CULL_FACE]),this.setBlendMode(t[BLEND_FUNC])},t.prototype.setBlend=function(t){t=t?1:0,this.activeState[BLEND]!==t&&(this.activeState[BLEND]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},t.prototype.setBlendMode=function(t){if(t!==this.activeState[BLEND_FUNC]){this.activeState[BLEND_FUNC]=t;var e=this.blendModes[t];2===e.length?this.gl.blendFunc(e[0],e[1]):this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3])}},t.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[DEPTH_TEST]!==t&&(this.activeState[DEPTH_TEST]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},t.prototype.setCullFace=function(t){t=t?1:0,this.activeState[CULL_FACE]!==t&&(this.activeState[CULL_FACE]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},t.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[FRONT_FACE]!==t&&(this.activeState[FRONT_FACE]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},t.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var i=1;i<this.maxAttribs;i++)this.gl.disableVertexAttribArray(i)},t.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},t}();exports.default=WebGLState;

},{"./utils/mapWebGLBlendModesToPixi":88}],76:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),_extractUniformsFromSrc=require("./extractUniformsFromSrc"),_extractUniformsFromSrc2=_interopRequireDefault(_extractUniformsFromSrc),_utils=require("../../../utils"),_const=require("../../../const"),_settings=require("../../../settings"),_settings2=_interopRequireDefault(_settings),SOURCE_KEY_MAP={},Filter=function(){function e(t,r,i){_classCallCheck(this,e),this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=r||e.defaultFragmentSrc,this._blendMode=_const.BLEND_MODES.NORMAL,this.uniformData=i||(0,_extractUniformsFromSrc2.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var o in this.uniformData)this.uniforms[o]=this.uniformData[o].value,this.uniformData[o].type&&(this.uniformData[o].type=this.uniformData[o].type.toLowerCase());this.glShaders={},SOURCE_KEY_MAP[this.vertexSrc+this.fragmentSrc]||(SOURCE_KEY_MAP[this.vertexSrc+this.fragmentSrc]=(0,_utils.uid)()),this.glShaderKey=SOURCE_KEY_MAP[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=_settings2.default.RESOLUTION,this.enabled=!0,this.autoFit=!0}return e.prototype.apply=function(e,t,r,i,o){e.applyFilter(this,t,r,i)},_createClass(e,[{key:"blendMode",get:function(){return this._blendMode},set:function(e){this._blendMode=e}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),e}();exports.default=Filter;

},{"../../../const":36,"../../../settings":91,"../../../utils":115,"./extractUniformsFromSrc":77}],77:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function extractUniformsFromSrc(e,r,t){var i=extractUniformsFromString(e,t),a=extractUniformsFromString(r,t);return Object.assign(i,a)}function extractUniformsFromString(e){for(var r=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),t={},i=void 0,a=e.replace(/\s+/g," ").split(/\s*;\s*/),o=0;o<a.length;o++){var l=a[o].trim();if(l.indexOf("uniform")>-1){var n=l.split(" "),u=n[1],f=n[2],s=1;f.indexOf("[")>-1&&(f=(i=f.split(/\[|]/))[0],s*=Number(i[1])),f.match(r)||(t[f]={value:defaultValue(u,s),name:f,type:u})}}return t}exports.__esModule=!0,exports.default=extractUniformsFromSrc;var _pixiGlCore=require("pixi-gl-core"),_pixiGlCore2=_interopRequireDefault(_pixiGlCore),defaultValue=_pixiGlCore2.default.shader.defaultValue;

},{"pixi-gl-core":19}],78:[function(require,module,exports){
"use strict";function calculateScreenSpaceMatrix(e,t,a){var r=e.identity();return r.translate(t.x/a.width,t.y/a.height),r.scale(a.width,a.height),r}function calculateNormalizedScreenSpaceMatrix(e,t,a){var r=e.identity();r.translate(t.x/a.width,t.y/a.height);var i=a.width/t.width,c=a.height/t.height;return r.scale(i,c),r}function calculateSpriteMatrix(e,t,a,r){var i=r._texture.orig,c=e.set(a.width,0,0,a.height,t.x,t.y),l=r.worldTransform.copy(_math.Matrix.TEMP_MATRIX);return l.invert(),c.prepend(l),c.scale(1/i.width,1/i.height),c.translate(r.anchor.x,r.anchor.y),c}exports.__esModule=!0,exports.calculateScreenSpaceMatrix=calculateScreenSpaceMatrix,exports.calculateNormalizedScreenSpaceMatrix=calculateNormalizedScreenSpaceMatrix,exports.calculateSpriteMatrix=calculateSpriteMatrix;var _math=require("../../../math");

},{"../../../math":60}],79:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}exports.__esModule=!0;var _Filter2=require("../Filter"),_Filter3=_interopRequireDefault(_Filter2),_math=require("../../../../math"),_path=require("path"),_TextureMatrix=require("../../../../textures/TextureMatrix"),_TextureMatrix2=_interopRequireDefault(_TextureMatrix),SpriteMaskFilter=function(e){function r(t){_classCallCheck(this,r);var a=new _math.Matrix,n=_possibleConstructorReturn(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return t.renderable=!1,n.maskSprite=t,n.maskMatrix=a,n}return _inherits(r,e),r.prototype.apply=function(e,r,t){var a=this.maskSprite,n=this.maskSprite.texture;n.valid&&(n.transform||(n.transform=new _TextureMatrix2.default(n,0)),n.transform.update(),this.uniforms.mask=n,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(n.transform.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=n.transform.uClampFrame,e.applyFilter(this,r,t))},r}(_Filter3.default);exports.default=SpriteMaskFilter;

},{"../../../../math":60,"../../../../textures/TextureMatrix":106,"../Filter":76,"path":12}],80:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _WebGLManager2=require("./WebGLManager"),_WebGLManager3=_interopRequireDefault(_WebGLManager2),_RenderTarget=require("../utils/RenderTarget"),_RenderTarget2=_interopRequireDefault(_RenderTarget),_Quad=require("../utils/Quad"),_Quad2=_interopRequireDefault(_Quad),_math=require("../../../math"),_Shader=require("../../../Shader"),_Shader2=_interopRequireDefault(_Shader),_filterTransforms=require("../filters/filterTransforms"),filterTransforms=_interopRequireWildcard(_filterTransforms),_bitTwiddle=require("bit-twiddle"),_bitTwiddle2=_interopRequireDefault(_bitTwiddle),FilterState=function e(){_classCallCheck(this,e),this.renderTarget=null,this.sourceFrame=new _math.Rectangle,this.destinationFrame=new _math.Rectangle,this.filters=[],this.target=null,this.resolution=1},FilterManager=function(e){function r(t){_classCallCheck(this,r);var a=_possibleConstructorReturn(this,e.call(this,t));return a.gl=a.renderer.gl,a.quad=new _Quad2.default(a.gl,t.state.attribState),a.shaderCache={},a.pool={},a.filterData=null,a.managedFilters=[],a}return _inherits(r,e),r.prototype.pushFilter=function(e,r){var t=this.renderer,a=this.filterData;if(!a){a=this.renderer._activeRenderTarget.filterStack;var i=new FilterState;i.sourceFrame=i.destinationFrame=this.renderer._activeRenderTarget.size,i.renderTarget=t._activeRenderTarget,this.renderer._activeRenderTarget.filterData=a={index:0,stack:[i]},this.filterData=a}var n=a.stack[++a.index];n||(n=a.stack[a.index]=new FilterState);var s=r[0].resolution,o=0|r[0].padding,l=e.filterArea||e.getBounds(!0),d=n.sourceFrame,u=n.destinationFrame;d.x=(l.x*s|0)/s,d.y=(l.y*s|0)/s,d.width=(l.width*s|0)/s,d.height=(l.height*s|0)/s,a.stack[0].renderTarget.transform||r[0].autoFit&&d.fit(a.stack[0].destinationFrame),d.pad(o),u.width=d.width,u.height=d.height;var h=this.getPotRenderTarget(t.gl,d.width,d.height,s);n.target=e,n.filters=r,n.resolution=s,n.renderTarget=h,h.setFrame(u,d),t.bindRenderTarget(h),h.clear()},r.prototype.popFilter=function(){var e=this.filterData,r=e.stack[e.index-1],t=e.stack[e.index];this.quad.map(t.renderTarget.size,t.sourceFrame).upload();var a=t.filters;if(1===a.length)a[0].apply(this,t.renderTarget,r.renderTarget,!1,t),this.freePotRenderTarget(t.renderTarget);else{var i=t.renderTarget,n=this.getPotRenderTarget(this.renderer.gl,t.sourceFrame.width,t.sourceFrame.height,t.resolution);n.setFrame(t.destinationFrame,t.sourceFrame),n.clear();var s=0;for(s=0;s<a.length-1;++s){a[s].apply(this,i,n,!0,t);var o=i;i=n,n=o}a[s].apply(this,i,r.renderTarget,!1,t),this.freePotRenderTarget(i),this.freePotRenderTarget(n)}e.index--,0===e.index&&(this.filterData=null)},r.prototype.applyFilter=function(e,r,t,a){var i=this.renderer,n=i.gl,s=e.glShaders[i.CONTEXT_UID];s||(e.glShaderKey?(s=this.shaderCache[e.glShaderKey])||(s=new _Shader2.default(this.gl,e.vertexSrc,e.fragmentSrc),e.glShaders[i.CONTEXT_UID]=this.shaderCache[e.glShaderKey]=s,this.managedFilters.push(e)):(s=e.glShaders[i.CONTEXT_UID]=new _Shader2.default(this.gl,e.vertexSrc,e.fragmentSrc),this.managedFilters.push(e)),i.bindVao(null),this.quad.initVao(s)),i.bindVao(this.quad.vao),i.bindRenderTarget(t),a&&(n.disable(n.SCISSOR_TEST),i.clear(),n.enable(n.SCISSOR_TEST)),t===i.maskManager.scissorRenderTarget&&i.maskManager.pushScissorMask(null,i.maskManager.scissorData),i.bindShader(s);var o=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=o,this.syncUniforms(s,e),i.state.setBlendMode(e.blendMode),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,r.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),n.bindTexture(n.TEXTURE_2D,o._glTextures[this.renderer.CONTEXT_UID].texture)},r.prototype.syncUniforms=function(e,r){var t=r.uniformData,a=r.uniforms,i=1,n=void 0;if(e.uniforms.filterArea){n=this.filterData.stack[this.filterData.index];var s=e.uniforms.filterArea;s[0]=n.renderTarget.size.width,s[1]=n.renderTarget.size.height,s[2]=n.sourceFrame.x,s[3]=n.sourceFrame.y,e.uniforms.filterArea=s}if(e.uniforms.filterClamp){n=n||this.filterData.stack[this.filterData.index];var o=e.uniforms.filterClamp;o[0]=0,o[1]=0,o[2]=(n.sourceFrame.width-1)/n.renderTarget.size.width,o[3]=(n.sourceFrame.height-1)/n.renderTarget.size.height,e.uniforms.filterClamp=o}for(var l in t){var d=t[l].type;if("sampler2d"===d&&0!==a[l]){if(a[l].baseTexture)e.uniforms[l]=this.renderer.bindTexture(a[l].baseTexture,i);else{e.uniforms[l]=i;var u=this.renderer.gl;this.renderer.boundTextures[i]=this.renderer.emptyTextures[i],u.activeTexture(u.TEXTURE0+i),a[l].texture.bind()}i++}else if("mat3"===d)void 0!==a[l].a?e.uniforms[l]=a[l].toArray(!0):e.uniforms[l]=a[l];else if("vec2"===d)if(void 0!==a[l].x){var h=e.uniforms[l]||new Float32Array(2);h[0]=a[l].x,h[1]=a[l].y,e.uniforms[l]=h}else e.uniforms[l]=a[l];else"float"===d?e.uniforms.data[l].value!==t[l]&&(e.uniforms[l]=a[l]):e.uniforms[l]=a[l]}},r.prototype.getRenderTarget=function(e,r){var t=this.filterData.stack[this.filterData.index],a=this.getPotRenderTarget(this.renderer.gl,t.sourceFrame.width,t.sourceFrame.height,r||t.resolution);return a.setFrame(t.destinationFrame,t.sourceFrame),a},r.prototype.returnRenderTarget=function(e){this.freePotRenderTarget(e)},r.prototype.calculateScreenSpaceMatrix=function(e){var r=this.filterData.stack[this.filterData.index];return filterTransforms.calculateScreenSpaceMatrix(e,r.sourceFrame,r.renderTarget.size)},r.prototype.calculateNormalizedScreenSpaceMatrix=function(e){var r=this.filterData.stack[this.filterData.index];return filterTransforms.calculateNormalizedScreenSpaceMatrix(e,r.sourceFrame,r.renderTarget.size,r.destinationFrame)},r.prototype.calculateSpriteMatrix=function(e,r){var t=this.filterData.stack[this.filterData.index];return filterTransforms.calculateSpriteMatrix(e,t.sourceFrame,t.renderTarget.size,r)},r.prototype.destroy=function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.renderer,t=this.managedFilters,a=0;a<t.length;a++)e||t[a].glShaders[r.CONTEXT_UID].destroy(),delete t[a].glShaders[r.CONTEXT_UID];this.shaderCache={},e?this.pool={}:this.emptyPool()},r.prototype.getPotRenderTarget=function(e,r,t,a){var i=(65535&(r=_bitTwiddle2.default.nextPow2(r*a)))<<16|65535&(t=_bitTwiddle2.default.nextPow2(t*a));this.pool[i]||(this.pool[i]=[]);var n=this.pool[i].pop();if(!n){var s=this.renderer.boundTextures[0];e.activeTexture(e.TEXTURE0),n=new _RenderTarget2.default(e,r,t,null,1),e.bindTexture(e.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)}return n.resolution=a,n.defaultFrame.width=n.size.width=r/a,n.defaultFrame.height=n.size.height=t/a,n},r.prototype.emptyPool=function(){for(var e in this.pool){var r=this.pool[e];if(r)for(var t=0;t<r.length;t++)r[t].destroy(!0)}this.pool={}},r.prototype.freePotRenderTarget=function(e){var r=(65535&e.size.width*e.resolution)<<16|65535&e.size.height*e.resolution;this.pool[r].push(e)},r}(_WebGLManager3.default);exports.default=FilterManager;

},{"../../../Shader":34,"../../../math":60,"../filters/filterTransforms":78,"../utils/Quad":85,"../utils/RenderTarget":86,"./WebGLManager":83,"bit-twiddle":1}],81:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _WebGLManager2=require("./WebGLManager"),_WebGLManager3=_interopRequireDefault(_WebGLManager2),_SpriteMaskFilter=require("../filters/spriteMask/SpriteMaskFilter"),_SpriteMaskFilter2=_interopRequireDefault(_SpriteMaskFilter),MaskManager=function(e){function t(r){_classCallCheck(this,t);var s=_possibleConstructorReturn(this,e.call(this,r));return s.scissor=!1,s.scissorData=null,s.scissorRenderTarget=null,s.enableScissor=!0,s.alphaMaskPool=[],s.alphaMaskIndex=0,s}return _inherits(t,e),t.prototype.pushMask=function(e,t){if(t.texture)this.pushSpriteMask(e,t);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&t.isFastRect()){var r=t.worldTransform,s=Math.atan2(r.b,r.a);(s=Math.round(s*(180/Math.PI)))%90?this.pushStencilMask(t):this.pushScissorMask(e,t)}else this.pushStencilMask(t)},t.prototype.popMask=function(e,t){t.texture?this.popSpriteMask(e,t):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(e,t):this.popStencilMask(e,t)},t.prototype.pushSpriteMask=function(e,t){var r=this.alphaMaskPool[this.alphaMaskIndex];r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new _SpriteMaskFilter2.default(t)]),r[0].resolution=this.renderer.resolution,r[0].maskSprite=t,e.filterArea=t.getBounds(!0),this.renderer.filterManager.pushFilter(e,r),this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},t.prototype.pushStencilMask=function(e){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(e)},t.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},t.prototype.pushScissorMask=function(e,t){t.renderable=!0;var r=this.renderer._activeRenderTarget,s=t.getBounds();s.fit(r.size),t.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var i=this.renderer.resolution;this.renderer.gl.scissor(s.x*i,(r.root?r.size.height-s.y-s.height:s.y)*i,s.width*i,s.height*i),this.scissorRenderTarget=r,this.scissorData=t,this.scissor=!0},t.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var e=this.renderer.gl;e.disable(e.SCISSOR_TEST)},t}(_WebGLManager3.default);exports.default=MaskManager;

},{"../filters/spriteMask/SpriteMaskFilter":79,"./WebGLManager":83}],82:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _WebGLManager2=require("./WebGLManager"),_WebGLManager3=_interopRequireDefault(_WebGLManager2),StencilManager=function(e){function t(r){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,e.call(this,r));return n.stencilMaskStack=null,n}return _inherits(t,e),t.prototype.setMaskStack=function(e){this.stencilMaskStack=e;var t=this.renderer.gl;0===e.length?t.disable(t.STENCIL_TEST):t.enable(t.STENCIL_TEST)},t.prototype.pushStencil=function(e){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var t=this.renderer.gl,r=this.stencilMaskStack.length;0===r&&t.enable(t.STENCIL_TEST),this.stencilMaskStack.push(e),t.colorMask(!1,!1,!1,!1),t.stencilFunc(t.EQUAL,r,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.INCR),this.renderer.plugins.graphics.render(e),this._useCurrent()},t.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var e=this.renderer.gl,t=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),this.renderer.plugins.graphics.render(t),this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},t.prototype.destroy=function(){_WebGLManager3.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},t}(_WebGLManager3.default);exports.default=StencilManager;

},{"./WebGLManager":83}],83:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var WebGLManager=function(){function e(t){_classCallCheck(this,e),this.renderer=t,this.renderer.on("context",this.onContextChange,this)}return e.prototype.onContextChange=function(){},e.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},e}();exports.default=WebGLManager;

},{}],84:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _WebGLManager2=require("../managers/WebGLManager"),_WebGLManager3=_interopRequireDefault(_WebGLManager2),ObjectRenderer=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(t,e),t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.flush=function(){},t.prototype.render=function(e){},t}(_WebGLManager3.default);exports.default=ObjectRenderer;

},{"../managers/WebGLManager":83}],85:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _pixiGlCore=require("pixi-gl-core"),_pixiGlCore2=_interopRequireDefault(_pixiGlCore),_createIndicesForQuads=require("../../../utils/createIndicesForQuads"),_createIndicesForQuads2=_interopRequireDefault(_createIndicesForQuads),Quad=function(){function e(t,i){_classCallCheck(this,e),this.gl=t,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var r=0;r<4;r++)this.interleaved[4*r]=this.vertices[2*r],this.interleaved[4*r+1]=this.vertices[2*r+1],this.interleaved[4*r+2]=this.uvs[2*r],this.interleaved[4*r+3]=this.uvs[2*r+1];this.indices=(0,_createIndicesForQuads2.default)(1),this.vertexBuffer=_pixiGlCore2.default.GLBuffer.createVertexBuffer(t,this.interleaved,t.STATIC_DRAW),this.indexBuffer=_pixiGlCore2.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.vao=new _pixiGlCore2.default.VertexArrayObject(t,i)}return e.prototype.initVao=function(e){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,e.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,e.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},e.prototype.map=function(e,t){var i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+t.width/e.width,this.uvs[3]=r,this.uvs[4]=i+t.width/e.width,this.uvs[5]=r+t.height/e.height,this.uvs[6]=i,this.uvs[7]=r+t.height/e.height,i=t.x,r=t.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+t.width,this.vertices[3]=r,this.vertices[4]=i+t.width,this.vertices[5]=r+t.height,this.vertices[6]=i,this.vertices[7]=r+t.height,this},e.prototype.upload=function(){for(var e=0;e<4;e++)this.interleaved[4*e]=this.vertices[2*e],this.interleaved[4*e+1]=this.vertices[2*e+1],this.interleaved[4*e+2]=this.uvs[2*e],this.interleaved[4*e+3]=this.uvs[2*e+1];return this.vertexBuffer.upload(this.interleaved),this},e.prototype.destroy=function(){var e=this.gl;e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer)},e}();exports.default=Quad;

},{"../../../utils/createIndicesForQuads":113,"pixi-gl-core":19}],86:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _math=require("../../../math"),_const=require("../../../const"),_settings=require("../../../settings"),_settings2=_interopRequireDefault(_settings),_pixiGlCore=require("pixi-gl-core"),RenderTarget=function(){function t(e,i,r,s,a,n){_classCallCheck(this,t),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new _math.Rectangle(0,0,1,1),this.resolution=a||_settings2.default.RESOLUTION,this.projectionMatrix=new _math.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new _math.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=void 0!==s?s:_settings2.default.SCALE_MODE,this.root=n,this.root?(this.frameBuffer=new _pixiGlCore.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=_pixiGlCore.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===_const.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(i,r)}return t.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},t.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||this.destinationFrame},t.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},t.prototype.calculateProjection=function(t,e){var i=this.projectionMatrix;e=e||t,i.identity(),this.root?(i.a=1/t.width*2,i.d=-1/t.height*2,i.tx=-1-e.x*i.a,i.ty=1-e.y*i.d):(i.a=1/t.width*2,i.d=1/t.height*2,i.tx=-1-e.x*i.a,i.ty=-1-e.y*i.d)},t.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var i=this.frame||this.size;this.calculateProjection(i)}},t.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},t}();exports.default=RenderTarget;

},{"../../../const":36,"../../../math":60,"../../../settings":91,"pixi-gl-core":19}],87:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function checkMaxIfStatmentsInShader(e,t){var r=!t;if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(r){var a=document.createElement("canvas");a.width=1,a.height=1,t=_pixiGlCore2.default.createContext(a)}for(var o=t.createShader(t.FRAGMENT_SHADER);;){var i=fragTemplate.replace(/%forloop%/gi,generateIfTestSrc(e));if(t.shaderSource(o,i),t.compileShader(o),t.getShaderParameter(o,t.COMPILE_STATUS))break;e=e/2|0}return r&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").loseContext(),e}function generateIfTestSrc(e){for(var t="",r=0;r<e;++r)r>0&&(t+="\nelse "),r<e-1&&(t+="if(test == "+r+".0){}");return t}exports.__esModule=!0,exports.default=checkMaxIfStatmentsInShader;var _pixiGlCore=require("pixi-gl-core"),_pixiGlCore2=_interopRequireDefault(_pixiGlCore),fragTemplate=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");

},{"pixi-gl-core":19}],88:[function(require,module,exports){
"use strict";function mapWebGLBlendModesToPixi(_){var N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return N[_const.BLEND_MODES.NORMAL]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.ADD]=[_.ONE,_.DST_ALPHA],N[_const.BLEND_MODES.MULTIPLY]=[_.DST_COLOR,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.SCREEN]=[_.ONE,_.ONE_MINUS_SRC_COLOR],N[_const.BLEND_MODES.OVERLAY]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.DARKEN]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.LIGHTEN]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.COLOR_DODGE]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.COLOR_BURN]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.HARD_LIGHT]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.SOFT_LIGHT]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.DIFFERENCE]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.EXCLUSION]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.HUE]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.SATURATION]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.COLOR]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.LUMINOSITY]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.NORMAL_NPM]=[_.SRC_ALPHA,_.ONE_MINUS_SRC_ALPHA,_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.ADD_NPM]=[_.SRC_ALPHA,_.DST_ALPHA,_.ONE,_.DST_ALPHA],N[_const.BLEND_MODES.SCREEN_NPM]=[_.SRC_ALPHA,_.ONE_MINUS_SRC_COLOR,_.ONE,_.ONE_MINUS_SRC_COLOR],N}exports.__esModule=!0,exports.default=mapWebGLBlendModesToPixi;var _const=require("../../../const");

},{"../../../const":36}],89:[function(require,module,exports){
"use strict";function mapWebGLDrawModesToPixi(_){var E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return E[_const.DRAW_MODES.POINTS]=_.POINTS,E[_const.DRAW_MODES.LINES]=_.LINES,E[_const.DRAW_MODES.LINE_LOOP]=_.LINE_LOOP,E[_const.DRAW_MODES.LINE_STRIP]=_.LINE_STRIP,E[_const.DRAW_MODES.TRIANGLES]=_.TRIANGLES,E[_const.DRAW_MODES.TRIANGLE_STRIP]=_.TRIANGLE_STRIP,E[_const.DRAW_MODES.TRIANGLE_FAN]=_.TRIANGLE_FAN,E}exports.__esModule=!0,exports.default=mapWebGLDrawModesToPixi;var _const=require("../../../const");

},{"../../../const":36}],90:[function(require,module,exports){
"use strict";function validateContext(e){e.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}exports.__esModule=!0,exports.default=validateContext;

},{}],91:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _maxRecommendedTextures=require("./utils/maxRecommendedTextures"),_maxRecommendedTextures2=_interopRequireDefault(_maxRecommendedTextures),_canUploadSameBuffer=require("./utils/canUploadSameBuffer"),_canUploadSameBuffer2=_interopRequireDefault(_canUploadSameBuffer);exports.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,_maxRecommendedTextures2.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,_canUploadSameBuffer2.default)()};

},{"./utils/canUploadSameBuffer":112,"./utils/maxRecommendedTextures":117}],92:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),_math=require("../math"),_utils=require("../utils"),_const=require("../const"),_Texture=require("../textures/Texture"),_Texture2=_interopRequireDefault(_Texture),_Container2=require("../display/Container"),_Container3=_interopRequireDefault(_Container2),tempPoint=new _math.Point,Sprite=function(t){function e(r){_classCallCheck(this,e);var i=_possibleConstructorReturn(this,t.call(this));return i._anchor=new _math.ObservablePoint(i._onAnchorUpdate,i),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=_const.BLEND_MODES.NORMAL,i.shader=null,i.cachedTint=16777215,i.texture=r||_Texture2.default.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.pluginName="sprite",i}return _inherits(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,_utils.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,_utils.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,r=e.a,i=e.b,n=e.c,s=e.d,o=e.tx,h=e.ty,a=this.vertexData,u=t.trim,_=t.orig,c=this._anchor,l=0,d=0,f=0,x=0;u?(l=(d=u.x-c._x*_.width)+u.width,f=(x=u.y-c._y*_.height)+u.height):(l=(d=-c._x*_.width)+_.width,f=(x=-c._y*_.height)+_.height),a[0]=r*d+n*x+o,a[1]=s*x+i*d+h,a[2]=r*l+n*x+o,a[3]=s*x+i*l+h,a[4]=r*l+n*f+o,a[5]=s*f+i*l+h,a[6]=r*d+n*f+o,a[7]=s*f+i*d+h}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,r=t.orig,i=this._anchor,n=this.transform.worldTransform,s=n.a,o=n.b,h=n.c,a=n.d,u=n.tx,_=n.ty,c=-i._x*r.width,l=c+r.width,d=-i._y*r.height,f=d+r.height;e[0]=s*c+h*d+u,e[1]=a*d+o*c+_,e[2]=s*l+h*d+u,e[3]=a*d+o*l+_,e[4]=s*l+h*f+u,e[5]=a*f+o*l+_,e[6]=s*c+h*f+u,e[7]=a*f+o*c+_},e.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new _math.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,tempPoint);var e=this._texture.orig.width,r=this._texture.orig.height,i=-e*this.anchor.x,n=0;return tempPoint.x>=i&&tempPoint.x<i+e&&(n=-r*this.anchor.y,tempPoint.y>=n&&tempPoint.y<n+r)},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._anchor=null;if("boolean"==typeof e?e:e&&e.texture){var r="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!r)}this._texture=null,this.shader=null},e.from=function(t){return new e(_Texture2.default.from(t))},e.fromFrame=function(t){var r=_utils.TextureCache[t];if(!r)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new e(r)},e.fromImage=function(t,r,i){return new e(_Texture2.default.fromImage(t,r,i))},_createClass(e,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,_utils.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,_utils.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),e}(_Container3.default);exports.default=Sprite;

},{"../const":36,"../display/Container":38,"../math":60,"../textures/Texture":105,"../utils":115}],93:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _CanvasRenderer=require("../../renderers/canvas/CanvasRenderer"),_CanvasRenderer2=_interopRequireDefault(_CanvasRenderer),_const=require("../../const"),_math=require("../../math"),_CanvasTinter=require("./CanvasTinter"),_CanvasTinter2=_interopRequireDefault(_CanvasTinter),canvasRenderWorldTransform=new _math.Matrix,CanvasSpriteRenderer=function(){function e(r){_classCallCheck(this,e),this.renderer=r}return e.prototype.render=function(e){var r=e._texture,t=this.renderer,n=r._frame.width,o=r._frame.height,a=e.transform.worldTransform,i=0,s=0;if(!(r.orig.width<=0||r.orig.height<=0)&&r.baseTexture.source&&(t.setBlendMode(e.blendMode),r.valid)){t.context.globalAlpha=e.worldAlpha;var u=r.baseTexture.scaleMode===_const.SCALE_MODES.LINEAR;t.smoothProperty&&t.context[t.smoothProperty]!==u&&(t.context[t.smoothProperty]=u),r.trim?(i=r.trim.width/2+r.trim.x-e.anchor.x*r.orig.width,s=r.trim.height/2+r.trim.y-e.anchor.y*r.orig.height):(i=(.5-e.anchor.x)*r.orig.width,s=(.5-e.anchor.y)*r.orig.height),r.rotate&&(a.copy(canvasRenderWorldTransform),a=canvasRenderWorldTransform,_math.GroupD8.matrixAppendRotationInv(a,r.rotate,i,s),i=0,s=0),i-=n/2,s-=o/2,t.roundPixels?(t.context.setTransform(a.a,a.b,a.c,a.d,a.tx*t.resolution|0,a.ty*t.resolution|0),i|=0,s|=0):t.context.setTransform(a.a,a.b,a.c,a.d,a.tx*t.resolution,a.ty*t.resolution);var d=r.baseTexture.resolution;16777215!==e.tint?(e.cachedTint===e.tint&&e.tintedTexture.tintId===e._texture._updateID||(e.cachedTint=e.tint,e.tintedTexture=_CanvasTinter2.default.getTintedTexture(e,e.tint)),t.context.drawImage(e.tintedTexture,0,0,n*d,o*d,i*t.resolution,s*t.resolution,n*t.resolution,o*t.resolution)):t.context.drawImage(r.baseTexture.source,r._frame.x*d,r._frame.y*d,n*d,o*d,i*t.resolution,s*t.resolution,n*t.resolution,o*t.resolution)}},e.prototype.destroy=function(){this.renderer=null},e}();exports.default=CanvasSpriteRenderer,_CanvasRenderer2.default.registerPlugin("sprite",CanvasSpriteRenderer);

},{"../../const":36,"../../math":60,"../../renderers/canvas/CanvasRenderer":67,"./CanvasTinter":94}],94:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _utils=require("../../utils"),_canUseNewCanvasBlendModes=require("../../renderers/canvas/utils/canUseNewCanvasBlendModes"),_canUseNewCanvasBlendModes2=_interopRequireDefault(_canUseNewCanvasBlendModes),CanvasTinter={getTintedTexture:function(e,t){var i=e._texture,a="#"+("00000"+(0|(t=CanvasTinter.roundColor(t))).toString(16)).substr(-6);i.tintCache=i.tintCache||{};var n=i.tintCache[a],r=void 0;if(n){if(n.tintId===i._updateID)return i.tintCache[a];r=i.tintCache[a]}else r=CanvasTinter.canvas||document.createElement("canvas");if(CanvasTinter.tintMethod(i,t,r),r.tintId=i._updateID,CanvasTinter.convertTintToImage){var h=new Image;h.src=r.toDataURL(),i.tintCache[a]=h}else i.tintCache[a]=r,CanvasTinter.canvas=null;return r},tintWithMultiply:function(e,t,i){var a=i.getContext("2d"),n=e._frame.clone(),r=e.baseTexture.resolution;n.x*=r,n.y*=r,n.width*=r,n.height*=r,i.width=Math.ceil(n.width),i.height=Math.ceil(n.height),a.save(),a.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),a.fillRect(0,0,n.width,n.height),a.globalCompositeOperation="multiply",a.drawImage(e.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),a.globalCompositeOperation="destination-atop",a.drawImage(e.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),a.restore()},tintWithOverlay:function(e,t,i){var a=i.getContext("2d"),n=e._frame.clone(),r=e.baseTexture.resolution;n.x*=r,n.y*=r,n.width*=r,n.height*=r,i.width=Math.ceil(n.width),i.height=Math.ceil(n.height),a.save(),a.globalCompositeOperation="copy",a.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),a.fillRect(0,0,n.width,n.height),a.globalCompositeOperation="destination-atop",a.drawImage(e.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),a.restore()},tintWithPerPixel:function(e,t,i){var a=i.getContext("2d"),n=e._frame.clone(),r=e.baseTexture.resolution;n.x*=r,n.y*=r,n.width*=r,n.height*=r,i.width=Math.ceil(n.width),i.height=Math.ceil(n.height),a.save(),a.globalCompositeOperation="copy",a.drawImage(e.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),a.restore();for(var h=(0,_utils.hex2rgb)(t),o=h[0],s=h[1],l=h[2],u=a.getImageData(0,0,n.width,n.height),d=u.data,c=0;c<d.length;c+=4)d[c+0]*=o,d[c+1]*=s,d[c+2]*=l;a.putImageData(u,0,0)},roundColor:function(e){var t=CanvasTinter.cacheStepsPerColorChannel,i=(0,_utils.hex2rgb)(e);return i[0]=Math.min(255,i[0]/t*t),i[1]=Math.min(255,i[1]/t*t),i[2]=Math.min(255,i[2]/t*t),(0,_utils.rgb2hex)(i)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,_canUseNewCanvasBlendModes2.default)(),tintMethod:0};CanvasTinter.tintMethod=CanvasTinter.canUseMultiply?CanvasTinter.tintWithMultiply:CanvasTinter.tintWithPerPixel,exports.default=CanvasTinter;

},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":70,"../../utils":115}],95:[function(require,module,exports){
"use strict";function _classCallCheck(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var Buffer=function(){function t(s){_classCallCheck(this,t),this.vertices=new ArrayBuffer(s),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();exports.default=Buffer;

},{}],96:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _ObjectRenderer2=require("../../renderers/webgl/utils/ObjectRenderer"),_ObjectRenderer3=_interopRequireDefault(_ObjectRenderer2),_WebGLRenderer=require("../../renderers/webgl/WebGLRenderer"),_WebGLRenderer2=_interopRequireDefault(_WebGLRenderer),_createIndicesForQuads=require("../../utils/createIndicesForQuads"),_createIndicesForQuads2=_interopRequireDefault(_createIndicesForQuads),_generateMultiTextureShader=require("./generateMultiTextureShader"),_generateMultiTextureShader2=_interopRequireDefault(_generateMultiTextureShader),_checkMaxIfStatmentsInShader=require("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"),_checkMaxIfStatmentsInShader2=_interopRequireDefault(_checkMaxIfStatmentsInShader),_BatchBuffer=require("./BatchBuffer"),_BatchBuffer2=_interopRequireDefault(_BatchBuffer),_settings=require("../../settings"),_settings2=_interopRequireDefault(_settings),_utils=require("../../utils"),_pixiGlCore=require("pixi-gl-core"),_pixiGlCore2=_interopRequireDefault(_pixiGlCore),_bitTwiddle=require("bit-twiddle"),_bitTwiddle2=_interopRequireDefault(_bitTwiddle),TICK=0,TEXTURE_TICK=0,SpriteRenderer=function(e){function t(r){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,e.call(this,r));i.vertSize=5,i.vertByteSize=4*i.vertSize,i.size=_settings2.default.SPRITE_BATCH_SIZE,i.buffers=[];for(var s=1;s<=_bitTwiddle2.default.nextPow2(i.size);s*=2)i.buffers.push(new _BatchBuffer2.default(4*s*i.vertByteSize));i.indices=(0,_createIndicesForQuads2.default)(i.size),i.shader=null,i.currentIndex=0,i.groups=[];for(var n=0;n<i.size;n++)i.groups[n]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return i.sprites=[],i.vertexBuffers=[],i.vaos=[],i.vaoMax=2,i.vertexCount=0,i.renderer.on("prerender",i.onPrerender,i),i}return _inherits(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),_settings2.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,_checkMaxIfStatmentsInShader2.default)(this.MAX_TEXTURES,e)),this.shader=(0,_generateMultiTextureShader2.default)(e,this.MAX_TEXTURES),this.indexBuffer=_pixiGlCore2.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.renderer.bindVao(null);for(var t=this.shader.attributes,r=0;r<this.vaoMax;r++){var i=this.vertexBuffers[r]=_pixiGlCore2.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),s=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(i,t.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(i,t.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(i,t.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);t.aTextureId&&s.addAttribute(i,t.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[r]=s}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},t.prototype.onPrerender=function(){this.vertexCount=0},t.prototype.render=function(e){this.currentIndex>=this.size&&this.flush(),e._texture._uvs&&(this.sprites[this.currentIndex++]=e)},t.prototype.flush=function(){if(0!==this.currentIndex){var e=this.renderer.gl,t=this.MAX_TEXTURES,r=_bitTwiddle2.default.nextPow2(this.currentIndex),i=_bitTwiddle2.default.log2(r),s=this.buffers[i],n=this.sprites,u=this.groups,d=s.float32View,a=s.uint32View,o=this.boundTextures,l=this.renderer.boundTextures,h=this.renderer.textureGC.count,f=0,_=void 0,x=void 0,c=1,p=0,v=u[0],T=void 0,b=void 0,I=_utils.premultiplyBlendMode[n[0]._texture.baseTexture.premultipliedAlpha?1:0][n[0].blendMode];v.textureCount=0,v.start=0,v.blend=I,TICK++;var B=void 0;for(B=0;B<t;++B){var S=l[B];S._enabled!==TICK?(o[B]=S,S._virtalBoundId=B,S._enabled=TICK):o[B]=this.renderer.emptyTextures[B]}for(TICK++,B=0;B<this.currentIndex;++B){var C=n[B];_=C._texture.baseTexture;var R=_utils.premultiplyBlendMode[Number(_.premultipliedAlpha)][C.blendMode];if(I!==R&&(I=R,x=null,p=t,TICK++),x!==_&&(x=_,_._enabled!==TICK)){if(p===t&&(TICK++,v.size=B-v.start,p=0,(v=u[c++]).blend=I,v.textureCount=0,v.start=B),_.touched=h,-1===_._virtalBoundId)for(var E=0;E<t;++E){var y=(E+TEXTURE_TICK)%t,A=o[y];if(A._enabled!==TICK){TEXTURE_TICK++,A._virtalBoundId=-1,_._virtalBoundId=y,o[y]=_;break}}_._enabled=TICK,v.textureCount++,v.ids[p]=_._virtalBoundId,v.textures[p++]=_}if(T=C.vertexData,b=C._texture._uvs.uvsUint32,this.renderer.roundPixels){var M=this.renderer.resolution;d[f]=(T[0]*M|0)/M,d[f+1]=(T[1]*M|0)/M,d[f+5]=(T[2]*M|0)/M,d[f+6]=(T[3]*M|0)/M,d[f+10]=(T[4]*M|0)/M,d[f+11]=(T[5]*M|0)/M,d[f+15]=(T[6]*M|0)/M,d[f+16]=(T[7]*M|0)/M}else d[f]=T[0],d[f+1]=T[1],d[f+5]=T[2],d[f+6]=T[3],d[f+10]=T[4],d[f+11]=T[5],d[f+15]=T[6],d[f+16]=T[7];a[f+2]=b[0],a[f+7]=b[1],a[f+12]=b[2],a[f+17]=b[3];var g=Math.min(C.worldAlpha,1),w=g<1&&_.premultipliedAlpha?(0,_utils.premultiplyTint)(C._tintRGB,g):C._tintRGB+(255*g<<24);a[f+3]=a[f+8]=a[f+13]=a[f+18]=w,d[f+4]=d[f+9]=d[f+14]=d[f+19]=_._virtalBoundId,f+=20}if(v.size=B-v.start,_settings2.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(s.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var G=this.shader.attributes,U=this.vertexBuffers[this.vertexCount]=_pixiGlCore2.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),z=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(U,G.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(U,G.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(U,G.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);G.aTextureId&&z.addAttribute(U,G.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=z}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(s.vertices,0,!1),this.vertexCount++}for(B=0;B<t;++B)l[B]._virtalBoundId=-1;for(B=0;B<c;++B){for(var D=u[B],X=D.textureCount,q=0;q<X;q++)x=D.textures[q],l[D.ids[q]]!==x&&this.renderer.bindTexture(x,D.ids[q],!0),x._virtalBoundId=-1;this.renderer.state.setBlendMode(D.blend),e.drawElements(e.TRIANGLES,6*D.size,e.UNSIGNED_SHORT,6*D.start*2)}this.currentIndex=0}},t.prototype.start=function(){this.renderer.bindShader(this.shader),_settings2.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var t=0;t<this.vaoMax;t++)this.vertexBuffers[t]&&this.vertexBuffers[t].destroy(),this.vaos[t]&&this.vaos[t].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var r=0;r<this.buffers.length;++r)this.buffers[r].destroy()},t}(_ObjectRenderer3.default);exports.default=SpriteRenderer,_WebGLRenderer2.default.registerPlugin("sprite",SpriteRenderer);

},{"../../renderers/webgl/WebGLRenderer":74,"../../renderers/webgl/utils/ObjectRenderer":84,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":87,"../../settings":91,"../../utils":115,"../../utils/createIndicesForQuads":113,"./BatchBuffer":95,"./generateMultiTextureShader":97,"bit-twiddle":1,"pixi-gl-core":19}],97:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function generateMultiTextureShader(e,r){var o=fragTemplate;o=(o=o.replace(/%count%/gi,r)).replace(/%forloop%/gi,generateSampleSrc(r));for(var t=new _Shader2.default(e,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",o),n=[],a=0;a<r;a++)n[a]=a;return t.bind(),t.uniforms.uSamplers=n,t}function generateSampleSrc(e){var r="";r+="\n",r+="\n";for(var o=0;o<e;o++)o>0&&(r+="\nelse "),o<e-1&&(r+="if(textureId == "+o+".0)"),r+="\n{",r+="\n\tcolor = texture2D(uSamplers["+o+"], vTextureCoord);",r+="\n}";return r+="\n",r+="\n"}exports.__esModule=!0,exports.default=generateMultiTextureShader;var _Shader=require("../../Shader"),_Shader2=_interopRequireDefault(_Shader),_path=require("path"),fragTemplate=["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n");

},{"../../Shader":34,"path":12}],98:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),_Sprite2=require("../sprites/Sprite"),_Sprite3=_interopRequireDefault(_Sprite2),_Texture=require("../textures/Texture"),_Texture2=_interopRequireDefault(_Texture),_math=require("../math"),_utils=require("../utils"),_const=require("../const"),_settings=require("../settings"),_settings2=_interopRequireDefault(_settings),_TextStyle=require("./TextStyle"),_TextStyle2=_interopRequireDefault(_TextStyle),_TextMetrics=require("./TextMetrics"),_TextMetrics2=_interopRequireDefault(_TextMetrics),_trimCanvas=require("../utils/trimCanvas"),_trimCanvas2=_interopRequireDefault(_trimCanvas),defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Text=function(t){function e(i,r,s){_classCallCheck(this,e),(s=s||document.createElement("canvas")).width=3,s.height=3;var n=_Texture2.default.fromCanvas(s,_settings2.default.SCALE_MODE,"text");n.orig=new _math.Rectangle,n.trim=new _math.Rectangle;var o=_possibleConstructorReturn(this,t.call(this,n));return _Texture2.default.addToCache(o._texture,o._texture.baseTexture.textureCacheIds[0]),o.canvas=s,o.context=o.canvas.getContext("2d"),o.resolution=_settings2.default.RESOLUTION,o._text=null,o._style=null,o._styleListener=null,o._font="",o.text=i,o.style=r,o.localStyleID=-1,o}return _inherits(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var i=this.context,r=_TextMetrics2.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),s=r.width,n=r.height,o=r.lines,a=r.lineHeight,l=r.lineWidths,h=r.maxLineWidth,u=r.fontProperties;this.canvas.width=Math.ceil((s+2*e.padding)*this.resolution),this.canvas.height=Math.ceil((n+2*e.padding)*this.resolution),i.scale(this.resolution,this.resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.strokeStyle=e.stroke,i.lineWidth=e.strokeThickness,i.textBaseline=e.textBaseline,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit;var d=void 0,c=void 0;if(e.dropShadow){i.fillStyle=e.dropShadowColor,i.globalAlpha=e.dropShadowAlpha,i.shadowBlur=e.dropShadowBlur,e.dropShadowBlur>0&&(i.shadowColor=e.dropShadowColor);for(var p=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,f=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,_=0;_<o.length;_++)d=e.strokeThickness/2,c=e.strokeThickness/2+_*a+u.ascent,"right"===e.align?d+=h-l[_]:"center"===e.align&&(d+=(h-l[_])/2),e.fill&&(this.drawLetterSpacing(o[_],d+p+e.padding,c+f+e.padding),e.stroke&&e.strokeThickness&&(i.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(o[_],d+p+e.padding,c+f+e.padding,!0),i.strokeStyle=e.stroke))}i.shadowBlur=0,i.globalAlpha=1,i.fillStyle=this._generateFillStyle(e,o);for(var g=0;g<o.length;g++)d=e.strokeThickness/2,c=e.strokeThickness/2+g*a+u.ascent,"right"===e.align?d+=h-l[g]:"center"===e.align&&(d+=(h-l[g])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(o[g],d+e.padding,c+e.padding,!0),e.fill&&this.drawLetterSpacing(o[g],d+e.padding,c+e.padding);this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=this._style.letterSpacing;if(0!==s)for(var n=String.prototype.split.call(t,""),o=e,a=0,l="";a<t.length;)l=n[a++],r?this.context.strokeText(l,o,i):this.context.fillText(l,o,i),o+=this.context.measureText(l).width+s;else r?this.context.strokeText(t,e,i):this.context.fillText(t,e,i)},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=(0,_trimCanvas2.default)(t);t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0)}var i=this._texture,r=this._style,s=r.trim?0:r.padding,n=i.baseTexture;n.hasLoaded=!0,n.resolution=this.resolution,n.realWidth=t.width,n.realHeight=t.height,n.width=t.width/this.resolution,n.height=t.height/this.resolution,i.trim.width=i._frame.width=t.width/this.resolution,i.trim.height=i._frame.height=t.height/this.resolution,i.trim.x=-s,i.trim.y=-s,i.orig.width=i._frame.width-2*s,i.orig.height=i._frame.height-2*s,this._onTextureUpdate(),n.emit("update",n),this.dirty=!1},e.prototype.renderWebGL=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype.renderWebGL.call(this,e)},e.prototype._renderCanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._renderCanvas.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var i=void 0,r=void 0,s=void 0,n=void 0,o=this.canvas.width/this.resolution,a=this.canvas.height/this.resolution,l=t.fill.slice(),h=t.fillGradientStops.slice();if(!h.length)for(var u=l.length+1,d=1;d<u;++d)h.push(d/u);if(l.unshift(t.fill[0]),h.unshift(0),l.push(t.fill[t.fill.length-1]),h.push(1),t.fillGradientType===_const.TEXT_GRADIENT.LINEAR_VERTICAL){i=this.context.createLinearGradient(o/2,0,o/2,a),r=(l.length+1)*e.length,s=0;for(var c=0;c<e.length;c++){s+=1;for(var p=0;p<l.length;p++)n="number"==typeof h[p]?h[p]/e.length+c/e.length:s/r,i.addColorStop(n,l[p]),s++}}else{i=this.context.createLinearGradient(0,a/2,o,a/2),r=l.length+1,s=1;for(var f=0;f<l.length;f++)n="number"==typeof h[f]?h[f]:s/r,i.addColorStop(n,l[f]),s++}return i},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},defaultDestroyOptions,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},_createClass(e,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,_utils.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,_utils.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){(t=t||{})instanceof _TextStyle2.default?this._style=t:this._style=new _TextStyle2.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(""===t||null===t||void 0===t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(_Sprite3.default);exports.default=Text;

},{"../const":36,"../math":60,"../settings":91,"../sprites/Sprite":92,"../textures/Texture":105,"../utils":115,"../utils/trimCanvas":120,"./TextMetrics":99,"./TextStyle":100}],99:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var TextMetrics=function(){function t(e,a,n,r,i,s,o,h,l){_classCallCheck(this,t),this.text=e,this.style=a,this.width=n,this.height=r,this.lines=i,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=h,this.fontProperties=l}return t.measureText=function(e,a,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t._canvas;n=n||a.wordWrap;var i=a.toFontString(),s=t.measureFont(i),o=r.getContext("2d");o.font=i;for(var h=(n?t.wordWrap(e,a,r):e).split(/(?:\r\n|\r|\n)/),l=new Array(h.length),c=0,f=0;f<h.length;f++){var d=o.measureText(h[f]).width+(h[f].length-1)*a.letterSpacing;l[f]=d,c=Math.max(c,d)}var v=c+a.strokeThickness;a.dropShadow&&(v+=a.dropShadowDistance);var g=a.lineHeight||s.fontSize+a.strokeThickness,u=Math.max(g,s.fontSize+a.strokeThickness)+(h.length-1)*(g+a.leading);return a.dropShadow&&(u+=a.dropShadowDistance),new t(e,a,v,u,h,l,g+a.leading,c,s)},t.wordWrap=function(e,a){for(var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:t._canvas).getContext("2d"),r="",i=e.charAt(0),s=e.split("\n"),o=a.wordWrapWidth,h={},l=0;l<s.length;l++){for(var c=o,f=s[l].split(" "),d=0;d<f.length;d++){var v=n.measureText(f[d]).width;if(a.breakWords&&v>o)for(var g=f[d].split(""),u=0;u<g.length;u++){var x=g[u],w=h[x];void 0===w&&(w=n.measureText(x).width,h[x]=w),w>c?(r+="\n"+x,c=o-w):(0===u&&(d>0||" "===i)&&(r+=" "),r+=x,c-=w)}else{var p=v+n.measureText(" ").width;0===d||p>c?(d>0&&(r+="\n"),r+=f[d],c=o-v):(c-=p,r+=" "+f[d])}}l<s.length-1&&(r+="\n")}return r},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var a={},n=t._canvas,r=t._context;r.font=e;var i=Math.ceil(r.measureText("|Mq").width),s=Math.ceil(r.measureText("M").width),o=2*s;s=1.4*s|0,n.width=i,n.height=o,r.fillStyle="#f00",r.fillRect(0,0,i,o),r.font=e,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText("|Mq",0,s);var h=r.getImageData(0,0,i,o).data,l=h.length,c=4*i,f=0,d=0,v=!1;for(f=0;f<s;++f){for(var g=0;g<c;g+=4)if(255!==h[d+g]){v=!0;break}if(v)break;d+=c}for(a.ascent=s-f,d=l-c,v=!1,f=o;f>s;--f){for(var u=0;u<c;u+=4)if(255!==h[d+u]){v=!0;break}if(v)break;d-=c}return a.descent=f-s,a.fontSize=a.ascent+a.descent,t._fonts[e]=a,a},t}();exports.default=TextMetrics;var canvas=document.createElement("canvas");canvas.width=canvas.height=10,TextMetrics._canvas=canvas,TextMetrics._context=canvas.getContext("2d"),TextMetrics._fonts={};

},{}],100:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function getSingleColor(t){return"number"==typeof t?(0,_utils.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function getColor(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=getSingleColor(t[e]);return t}return getSingleColor(t)}function areArraysEqual(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}function deepCopyProperties(t,e,i){for(var n in i)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),_const=require("../const"),_utils=require("../utils"),defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:_const.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100,leading:0},TextStyle=function(){function t(e){_classCallCheck(this,t),this.styleID=0,this.reset(),deepCopyProperties(this,e,e)}return t.prototype.clone=function(){var e={};return deepCopyProperties(e,this,defaultStyle),new t(e)},t.prototype.reset=function(){deepCopyProperties(this,defaultStyle,defaultStyle)},t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var n=e[i].trim();/([\"\'])[^\'\"]+\1/.test(n)||(n='"'+n+'"'),e[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},_createClass(t,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){var e=getColor(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=getColor(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){areArraysEqual(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=getColor(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),t}();exports.default=TextStyle;

},{"../const":36,"../utils":115}],101:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _BaseTexture2=require("./BaseTexture"),_BaseTexture3=_interopRequireDefault(_BaseTexture2),_settings=require("../settings"),_settings2=_interopRequireDefault(_settings),BaseRenderTexture=function(e){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=arguments[2],n=arguments[3];_classCallCheck(this,t);var o=_possibleConstructorReturn(this,e.call(this,null,s));return o.resolution=n||_settings2.default.RESOLUTION,o.width=Math.ceil(i),o.height=Math.ceil(r),o.realWidth=o.width*o.resolution,o.realHeight=o.height*o.resolution,o.scaleMode=void 0!==s?s:_settings2.default.SCALE_MODE,o.hasLoaded=!0,o._glRenderTargets={},o._canvasRenderTarget=null,o.valid=!1,o}return _inherits(t,e),t.prototype.resize=function(e,t){e=Math.ceil(e),t=Math.ceil(t),e===this.width&&t===this.height||(this.valid=e>0&&t>0,this.width=e,this.height=t,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},t.prototype.destroy=function(){e.prototype.destroy.call(this,!0),this.renderer=null},t}(_BaseTexture3.default);exports.default=BaseRenderTexture;

},{"../settings":91,"./BaseTexture":102}],102:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _utils=require("../utils"),_settings=require("../settings"),_settings2=_interopRequireDefault(_settings),_eventemitter=require("eventemitter3"),_eventemitter2=_interopRequireDefault(_eventemitter),_determineCrossOrigin=require("../utils/determineCrossOrigin"),_determineCrossOrigin2=_interopRequireDefault(_determineCrossOrigin),_bitTwiddle=require("bit-twiddle"),_bitTwiddle2=_interopRequireDefault(_bitTwiddle),BaseTexture=function(e){function t(i,r,s){_classCallCheck(this,t);var o=_possibleConstructorReturn(this,e.call(this));return o.uid=(0,_utils.uid)(),o.touched=0,o.resolution=s||_settings2.default.RESOLUTION,o.width=100,o.height=100,o.realWidth=100,o.realHeight=100,o.scaleMode=void 0!==r?r:_settings2.default.SCALE_MODE,o.hasLoaded=!1,o.isLoading=!1,o.source=null,o.origSource=null,o.imageType=null,o.sourceScale=1,o.premultipliedAlpha=!0,o.imageUrl=null,o.isPowerOfTwo=!1,o.mipmap=_settings2.default.MIPMAP_TEXTURES,o.wrapMode=_settings2.default.WRAP_MODE,o._glTextures={},o._enabled=0,o._virtalBoundId=-1,o._destroyed=!1,o.textureCacheIds=[],i&&o.loadSource(i),o}return _inherits(t,e),t.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},t.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=_bitTwiddle2.default.isPow2(this.realWidth)&&_bitTwiddle2.default.isPow2(this.realHeight)},t.prototype.loadSource=function(e){var t=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,t&&this.source&&(this.source.onload=null,this.source.onerror=null);var i=!this.source;if(this.source=e,(e.src&&e.complete||e.getContext)&&e.width&&e.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),i&&this.emit("loaded",this);else if(!e.getContext){this.isLoading=!0;var r=this;if(e.onload=function(){r._updateImageType(),e.onload=null,e.onerror=null,r.isLoading&&(r.isLoading=!1,r._sourceLoaded(),"svg"!==r.imageType?r.emit("loaded",r):r._loadSvgSource())},e.onerror=function(){e.onload=null,e.onerror=null,r.isLoading&&(r.isLoading=!1,r.emit("error",r))},e.complete&&e.src){if(e.onload=null,e.onerror=null,"svg"===r.imageType)return void r._loadSvgSource();this.isLoading=!1,e.width&&e.height?(this._sourceLoaded(),t&&this.emit("loaded",this)):t&&this.emit("error",this)}}},t.prototype._updateImageType=function(){if(this.imageUrl){var e=(0,_utils.decomposeDataUri)(this.imageUrl),t=void 0;if(e&&"image"===e.mediaType){var i=e.subType.split("+")[0];if(!(t=(0,_utils.getUrlFileExtension)("."+i)))throw new Error("Invalid image type in data URI.")}else(t=(0,_utils.getUrlFileExtension)(this.imageUrl))||(t="png");this.imageType=t}},t.prototype._loadSvgSource=function(){if("svg"===this.imageType){var e=(0,_utils.decomposeDataUri)(this.imageUrl);e?this._loadSvgSourceUsingDataUri(e):this._loadSvgSourceUsingXhr()}},t.prototype._loadSvgSourceUsingDataUri=function(e){var t=void 0;if("base64"===e.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");t=atob(e.data)}else t=e.data;this._loadSvgSourceUsingString(t)},t.prototype._loadSvgSourceUsingXhr=function(){var e=this,t=new XMLHttpRequest;t.onload=function(){if(t.readyState!==t.DONE||200!==t.status)throw new Error("Failed to load SVG using XHR.");e._loadSvgSourceUsingString(t.response)},t.onerror=function(){return e.emit("error",e)},t.open("GET",this.imageUrl,!0),t.send()},t.prototype._loadSvgSourceUsingString=function(e){var i=(0,_utils.getSvgSize)(e),r=i.width,s=i.height;if(!r||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(r*this.sourceScale),this.realHeight=Math.round(s*this.sourceScale),this._updateDimensions();var o=document.createElement("canvas");o.width=this.realWidth,o.height=this.realHeight,o._pixiId="canvas_"+(0,_utils.uid)(),o.getContext("2d").drawImage(this.source,0,0,r,s,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=o,t.addToCache(this,o._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},t.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},t.prototype.destroy=function(){this.imageUrl&&(delete _utils.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.updateSourceImage=function(e){this.source.src=e,this.loadSource(this.source)},t.fromImage=function(e,i,r,s){var o=_utils.BaseTextureCache[e];if(!o){var a=new Image;void 0===i&&0!==e.indexOf("data:")?a.crossOrigin=(0,_determineCrossOrigin2.default)(e):i&&(a.crossOrigin="string"==typeof i?i:"anonymous"),(o=new t(a,r)).imageUrl=e,s&&(o.sourceScale=s),o.resolution=(0,_utils.getResolutionOfUrl)(e),a.src=e,t.addToCache(o,e)}return o},t.fromCanvas=function(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";e._pixiId||(e._pixiId=r+"_"+(0,_utils.uid)());var s=_utils.BaseTextureCache[e._pixiId];return s||(s=new t(e,i),t.addToCache(s,e._pixiId)),s},t.from=function(e,i,r){if("string"==typeof e)return t.fromImage(e,void 0,i,r);if(e instanceof HTMLImageElement){var s=e.src,o=_utils.BaseTextureCache[s];return o||((o=new t(e,i)).imageUrl=s,r&&(o.sourceScale=r),o.resolution=(0,_utils.getResolutionOfUrl)(s),t.addToCache(o,s)),o}return e instanceof HTMLCanvasElement?t.fromCanvas(e,i):e},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),_utils.BaseTextureCache[t]&&console.warn("BaseTexture added to the cache with an id ["+t+"] that already had an entry"),_utils.BaseTextureCache[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=_utils.BaseTextureCache[e];if(t){var i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete _utils.BaseTextureCache[e],t}}else if(e&&e.textureCacheIds){for(var r=0;r<e.textureCacheIds.length;++r)delete _utils.BaseTextureCache[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null},t}(_eventemitter2.default);exports.default=BaseTexture;

},{"../settings":91,"../utils":115,"../utils/determineCrossOrigin":114,"bit-twiddle":1,"eventemitter3":3}],103:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _BaseRenderTexture=require("./BaseRenderTexture"),_BaseRenderTexture2=_interopRequireDefault(_BaseRenderTexture),_Texture2=require("./Texture"),_Texture3=_interopRequireDefault(_Texture2),RenderTexture=function(e){function t(r,n){_classCallCheck(this,t);var u=null;if(!(r instanceof _BaseRenderTexture2.default)){var i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4];console.warn("Please use RenderTexture.create("+i+", "+o+") instead of the ctor directly."),u=arguments[0],n=null,r=new _BaseRenderTexture2.default(i,o,s,a)}var l=_possibleConstructorReturn(this,e.call(this,r,n));return l.legacyRenderer=u,l.valid=!0,l._updateUvs(),l}return _inherits(t,e),t.prototype.resize=function(e,t,r){e=Math.ceil(e),t=Math.ceil(t),this.valid=e>0&&t>0,this._frame.width=this.orig.width=e,this._frame.height=this.orig.height=t,r||this.baseTexture.resize(e,t),this._updateUvs()},t.create=function(e,r,n,u){return new t(new _BaseRenderTexture2.default(e,r,n,u))},t}(_Texture3.default);exports.default=RenderTexture;

},{"./BaseRenderTexture":101,"./Texture":105}],104:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,s,r){return s&&t(e.prototype,s),r&&t(e,r),e}}(),_=require("../"),_utils=require("../utils"),Spritesheet=function(){function t(e,s){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_classCallCheck(this,t),this.baseTexture=e,this.textures={},this.data=s,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return _createClass(t,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),t.prototype._updateResolution=function(t){var e=this.data.meta.scale,s=(0,_utils.getResolutionOfUrl)(t,null);return null===s&&(s=void 0!==e?parseFloat(e):1),1!==s&&(this.baseTexture.resolution=s,this.baseTexture.update()),s},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var s=e,r=t.BATCH_SIZE,i=this.baseTexture.sourceScale;s-e<r&&s<this._frameKeys.length;){var o=this._frameKeys[s],a=this._frames[o].frame;if(a){var l=null,h=null,n=new _.Rectangle(0,0,Math.floor(this._frames[o].sourceSize.w*i)/this.resolution,Math.floor(this._frames[o].sourceSize.h*i)/this.resolution);l=this._frames[o].rotated?new _.Rectangle(Math.floor(a.x*i)/this.resolution,Math.floor(a.y*i)/this.resolution,Math.floor(a.h*i)/this.resolution,Math.floor(a.w*i)/this.resolution):new _.Rectangle(Math.floor(a.x*i)/this.resolution,Math.floor(a.y*i)/this.resolution,Math.floor(a.w*i)/this.resolution,Math.floor(a.h*i)/this.resolution),this._frames[o].trimmed&&(h=new _.Rectangle(Math.floor(this._frames[o].spriteSourceSize.x*i)/this.resolution,Math.floor(this._frames[o].spriteSourceSize.y*i)/this.resolution,Math.floor(a.w*i)/this.resolution,Math.floor(a.h*i)/this.resolution)),this.textures[o]=new _.Texture(this.baseTexture,l,n,h,this._frames[o].rotated?2:0),_.Texture.addToCache(this.textures[o],o)}s++}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():e._parseComplete()},0)},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},t}();exports.default=Spritesheet;

},{"../":55,"../utils":115}],105:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function createWhiteTexture(){var e=document.createElement("canvas");e.width=10,e.height=10;var t=e.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,10,10),new Texture(new _BaseTexture2.default(e))}function removeAllHandlers(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}exports.__esModule=!0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_BaseTexture=require("./BaseTexture"),_BaseTexture2=_interopRequireDefault(_BaseTexture),_VideoBaseTexture=require("./VideoBaseTexture"),_VideoBaseTexture2=_interopRequireDefault(_VideoBaseTexture),_TextureUvs=require("./TextureUvs"),_TextureUvs2=_interopRequireDefault(_TextureUvs),_eventemitter=require("eventemitter3"),_eventemitter2=_interopRequireDefault(_eventemitter),_math=require("../math"),_utils=require("../utils"),_settings=require("../settings"),_settings2=_interopRequireDefault(_settings),Texture=function(e){function t(r,a,i,u,n){_classCallCheck(this,t);var s=_possibleConstructorReturn(this,e.call(this));if(s.noFrame=!1,a||(s.noFrame=!0,a=new _math.Rectangle(0,0,1,1)),r instanceof t&&(r=r.baseTexture),s.baseTexture=r,s._frame=a,s.trim=u,s.valid=!1,s.requiresUpdate=!1,s._uvs=null,s.orig=i||a,s._rotate=Number(n||0),!0===n)s._rotate=2;else if(s._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return r.hasLoaded?(s.noFrame&&(a=new _math.Rectangle(0,0,r.width,r.height),r.on("update",s.onBaseTextureUpdated,s)),s.frame=a):r.once("loaded",s.onBaseTextureLoaded,s),s._updateID=0,s.transform=null,s.textureCacheIds=[],s}return _inherits(t,e),t.prototype.update=function(){this.baseTexture.update()},t.prototype.onBaseTextureLoaded=function(e){this._updateID++,this.noFrame?this.frame=new _math.Rectangle(0,0,e.width,e.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},t.prototype.onBaseTextureUpdated=function(e){this._updateID++,this._frame.width=e.width,this._frame.height=e.height,this.emit("update",this)},t.prototype.destroy=function(e){this.baseTexture&&(e&&(_utils.TextureCache[this.baseTexture.imageUrl]&&t.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){return new t(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},t.prototype._updateUvs=function(){this._uvs||(this._uvs=new _TextureUvs2.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.fromImage=function(e,r,a,i){var u=_utils.TextureCache[e];return u||(u=new t(_BaseTexture2.default.fromImage(e,r,a,i)),t.addToCache(u,e)),u},t.fromFrame=function(e){var t=_utils.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return t},t.fromCanvas=function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new t(_BaseTexture2.default.fromCanvas(e,r,a))},t.fromVideo=function(e,r){return"string"==typeof e?t.fromVideoUrl(e,r):new t(_VideoBaseTexture2.default.fromVideo(e,r))},t.fromVideoUrl=function(e,r){return new t(_VideoBaseTexture2.default.fromUrl(e,r))},t.from=function(e){if("string"==typeof e){var r=_utils.TextureCache[e];if(!r){return null!==e.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?t.fromVideoUrl(e):t.fromImage(e)}return r}return e instanceof HTMLImageElement?new t(_BaseTexture2.default.from(e)):e instanceof HTMLCanvasElement?t.fromCanvas(e,_settings2.default.SCALE_MODE,"HTMLCanvasElement"):e instanceof HTMLVideoElement?t.fromVideo(e):e instanceof _BaseTexture2.default?new t(e):e},t.fromLoader=function(e,r,a){var i=new _BaseTexture2.default(e,void 0,(0,_utils.getResolutionOfUrl)(r)),u=new t(i);return i.imageUrl=r,a||(a=r),_BaseTexture2.default.addToCache(u.baseTexture,a),t.addToCache(u,a),a!==r&&(_BaseTexture2.default.addToCache(u.baseTexture,r),t.addToCache(u,r)),u},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),_utils.TextureCache[t]&&console.warn("Texture added to the cache with an id ["+t+"] that already had an entry"),_utils.TextureCache[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=_utils.TextureCache[e];if(t){var r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete _utils.TextureCache[e],t}}else if(e&&e.textureCacheIds){for(var a=0;a<e.textureCacheIds.length;++a)_utils.TextureCache[e.textureCacheIds[a]]===e&&delete _utils.TextureCache[e.textureCacheIds[a]];return e.textureCacheIds.length=0,e}return null},_createClass(t,[{key:"frame",get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var t=e.x,r=e.y,a=e.width,i=e.height,u=t+a>this.baseTexture.width,n=r+i>this.baseTexture.height;if(u||n){var s=u&&n?"and":"or",o="X: "+t+" + "+a+" = "+(t+a)+" > "+this.baseTexture.width,h="Y: "+r+" + "+i+" = "+(r+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+o+" "+s+" "+h)}this.valid=a&&i&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=e),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),t}(_eventemitter2.default);exports.default=Texture,Texture.EMPTY=new Texture(new _BaseTexture2.default),removeAllHandlers(Texture.EMPTY),removeAllHandlers(Texture.EMPTY.baseTexture),Texture.WHITE=createWhiteTexture(),removeAllHandlers(Texture.WHITE),removeAllHandlers(Texture.WHITE.baseTexture);

},{"../math":60,"../settings":91,"../utils":115,"./BaseTexture":102,"./TextureUvs":107,"./VideoBaseTexture":108,"eventemitter3":3}],106:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),_Matrix=require("../math/Matrix"),_Matrix2=_interopRequireDefault(_Matrix),tempMat=new _Matrix2.default,TextureMatrix=function(){function t(e,r){_classCallCheck(this,t),this._texture=e,this.mapCoord=new _Matrix2.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===r?.5:r}return t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,a=0;a<t.length;a+=2){var i=t[a],u=t[a+1];e[a]=i*r.a+u*r.c+r.tx,e[a+1]=i*r.b+u*r.d+r.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var a=e.orig,i=e.trim;i&&(tempMat.set(a.width/i.width,0,0,a.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(tempMat));var u=e.baseTexture,s=this.uClampFrame,n=this.clampMargin/u.resolution,h=this.clampOffset;return s[0]=(e._frame.x+n+h)/u.width,s[1]=(e._frame.y+n+h)/u.height,s[2]=(e._frame.x+e._frame.width-n+h)/u.width,s[3]=(e._frame.y+e._frame.height-n+h)/u.height,this.uClampOffset[0]=h/u.realWidth,this.uClampOffset[1]=h/u.realHeight,!0},_createClass(t,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),t}();exports.default=TextureMatrix;

},{"../math/Matrix":57}],107:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _GroupD=require("../math/GroupD8"),_GroupD2=_interopRequireDefault(_GroupD),TextureUvs=function(){function t(){_classCallCheck(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(t,i,u){var s=i.width,h=i.height;if(u){var e=t.width/2/s,r=t.height/2/h,a=t.x/s+e,o=t.y/h+r;u=_GroupD2.default.add(u,_GroupD2.default.NW),this.x0=a+e*_GroupD2.default.uX(u),this.y0=o+r*_GroupD2.default.uY(u),u=_GroupD2.default.add(u,2),this.x1=a+e*_GroupD2.default.uX(u),this.y1=o+r*_GroupD2.default.uY(u),u=_GroupD2.default.add(u,2),this.x2=a+e*_GroupD2.default.uX(u),this.y2=o+r*_GroupD2.default.uY(u),u=_GroupD2.default.add(u,2),this.x3=a+e*_GroupD2.default.uX(u),this.y3=o+r*_GroupD2.default.uY(u)}else this.x0=t.x/s,this.y0=t.y/h,this.x1=(t.x+t.width)/s,this.y1=t.y/h,this.x2=(t.x+t.width)/s,this.y2=(t.y+t.height)/h,this.x3=t.x/s,this.y3=(t.y+t.height)/h;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},t}();exports.default=TextureUvs;

},{"../math/GroupD8":56}],108:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function createSource(e,t){t||(t="video/"+e.substr(e.lastIndexOf(".")+1));var i=document.createElement("source");return i.src=e,i.type=t,i}exports.__esModule=!0;var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),_BaseTexture2=require("./BaseTexture"),_BaseTexture3=_interopRequireDefault(_BaseTexture2),_utils=require("../utils"),_ticker=require("../ticker"),_const=require("../const"),_determineCrossOrigin=require("../utils/determineCrossOrigin"),_determineCrossOrigin2=_interopRequireDefault(_determineCrossOrigin),VideoBaseTexture=function(e){function t(i,r){if(_classCallCheck(this,t),!i)throw new Error("No video source element specified.");(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0);var o=_possibleConstructorReturn(this,e.call(this,i,r));return o.width=i.videoWidth,o.height=i.videoHeight,o._autoUpdate=!0,o._isAutoUpdating=!1,o.autoPlay=!0,o.update=o.update.bind(o),o._onCanPlay=o._onCanPlay.bind(o),i.addEventListener("play",o._onPlayStart.bind(o)),i.addEventListener("pause",o._onPlayStop.bind(o)),o.hasLoaded=!1,o.__loaded=!1,o._isSourceReady()?o._onCanPlay():(i.addEventListener("canplay",o._onCanPlay),i.addEventListener("canplaythrough",o._onCanPlay)),o}return _inherits(t,e),t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&!1===e.paused&&!1===e.ended&&e.readyState>2},t.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},t.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(_ticker.shared.add(this.update,this,_const.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},t.prototype._onPlayStop=function(){this._isAutoUpdating&&(_ticker.shared.remove(this.update,this),this._isAutoUpdating=!1)},t.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},t.prototype.destroy=function(){this._isAutoUpdating&&_ticker.shared.remove(this.update,this),this.source&&this.source._pixiId&&(_BaseTexture3.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),e.prototype.destroy.call(this)},t.fromVideo=function(e,i){e._pixiId||(e._pixiId="video_"+(0,_utils.uid)());var r=_utils.BaseTextureCache[e._pixiId];return r||(r=new t(e,i),_BaseTexture3.default.addToCache(r,e._pixiId)),r},t.fromUrl=function(e,i,r){var o=document.createElement("video");o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline","");var s=Array.isArray(e)?e[0].src||e[0]:e.src||e;if(void 0===r&&0!==s.indexOf("data:")?o.crossOrigin=(0,_determineCrossOrigin2.default)(s):r&&(o.crossOrigin="string"==typeof r?r:"anonymous"),Array.isArray(e))for(var a=0;a<e.length;++a)o.appendChild(createSource(e[a].src||e[a],e[a].mime));else o.appendChild(createSource(s,e.mime));return o.load(),t.fromVideo(o,i)},_createClass(t,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isAutoUpdating?(_ticker.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(_ticker.shared.add(this.update,this,_const.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),t}(_BaseTexture3.default);exports.default=VideoBaseTexture,VideoBaseTexture.fromUrls=VideoBaseTexture.fromUrl;

},{"../const":36,"../ticker":111,"../utils":115,"../utils/determineCrossOrigin":114,"./BaseTexture":102}],109:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _createClass=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),_settings=require("../settings"),_settings2=_interopRequireDefault(_settings),_const=require("../const"),_TickerListener=require("./TickerListener"),_TickerListener2=_interopRequireDefault(_TickerListener),Ticker=function(){function e(){var t=this;_classCallCheck(this,e),this._head=new _TickerListener2.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/_settings2.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return e.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_const.UPDATE_PRIORITY.NORMAL;return this._addListener(new _TickerListener2.default(e,t,s))},e.prototype.addOnce=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_const.UPDATE_PRIORITY.NORMAL;return this._addListener(new _TickerListener2.default(e,t,s,!0))},e.prototype._addListener=function(e){var t=this._head.next,s=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(s);break}s=t,t=t.next}e.previous||e.connect(s)}else e.connect(s);return this._startIfPossible(),this},e.prototype.remove=function(e,t){for(var s=this._head.next;s;)s=s.match(e,t)?s.destroy():s.next;return this._head.next||this._cancelIfNeeded(),this},e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null},e.prototype.update=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),t=void 0;if(e>this.lastTime){(t=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),this.deltaTime=t*_settings2.default.TARGET_FPMS*this.speed;for(var s=this._head,i=s.next;i;)i=i.emit(this.deltaTime);s.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=e},_createClass(e,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(Math.max(0,e)/1e3,_settings2.default.TARGET_FPMS);this._maxElapsedMS=1/t}}]),e}();exports.default=Ticker;

},{"../const":36,"../settings":91,"./TickerListener":110}],110:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var TickerListener=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_classCallCheck(this,t),this.fn=e,this.context=n,this.priority=i,this.once=s,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.previous;return this.next=t?null:e,this.previous=null,e},t}();exports.default=TickerListener;

},{}],111:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.Ticker=exports.shared=void 0;var _Ticker=require("./Ticker"),_Ticker2=_interopRequireDefault(_Ticker),shared=new _Ticker2.default;shared.autoStart=!0,shared.destroy=function(){},exports.shared=shared,exports.Ticker=_Ticker2.default;

},{"./Ticker":109}],112:[function(require,module,exports){
"use strict";function canUploadSameBuffer(){return!(!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}exports.__esModule=!0,exports.default=canUploadSameBuffer;

},{}],113:[function(require,module,exports){
"use strict";function createIndicesForQuads(e){for(var r=6*e,t=new Uint16Array(r),s=0,a=0;s<r;s+=6,a+=4)t[s+0]=a+0,t[s+1]=a+1,t[s+2]=a+2,t[s+3]=a+0,t[s+4]=a+2,t[s+5]=a+3;return t}exports.__esModule=!0,exports.default=createIndicesForQuads;

},{}],114:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function determineCrossOrigin(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===e.indexOf("data:"))return"";r=r||window.location,tempAnchor||(tempAnchor=document.createElement("a")),tempAnchor.href=e;var o=!(e=_url3.default.parse(tempAnchor.href)).port&&""===r.port||e.port===r.port;return e.hostname===r.hostname&&o&&e.protocol===r.protocol?"":"anonymous"}exports.__esModule=!0,exports.default=determineCrossOrigin;var _url2=require("url"),_url3=_interopRequireDefault(_url2),tempAnchor=void 0;

},{"url":198}],115:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function uid(){return++nextUid}function hex2rgb(e,t){return t=t||[],t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255,t}function hex2string(e){return e=e.toString(16),"#"+(e="000000".substr(0,6-e.length)+e)}function rgb2hex(e){return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)}function getResolutionOfUrl(e,t){var r=_settings2.default.RETINA_PREFIX.exec(e);return r?parseFloat(r[1]):void 0!==t?t:1}function decomposeDataUri(e){var t=_const.DATA_URI.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,encoding:t[3]?t[3].toLowerCase():void 0,data:t[4]}}function getUrlFileExtension(e){var t=_const.URL_FILE_EXTENSION.exec(e);if(t)return t[1].toLowerCase()}function getSvgSize(e){var t=_const.SVG_SIZE.exec(e),r={};return t&&(r[t[1]]=Math.round(parseFloat(t[3])),r[t[5]]=Math.round(parseFloat(t[7]))),r}function skipHello(){saidHello=!0}function sayHello(e){if(!saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t=["\n %c %c %c PixiJS "+_const.VERSION+" -  "+e+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,t)}else window.console&&window.console.log("PixiJS "+_const.VERSION+" - "+e+" - http://www.pixijs.com/");saidHello=!0}}function isWebGLSupported(){var e={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),o=!(!r||!r.getContextAttributes().stencil);if(r){var i=r.getExtension("WEBGL_lose_context");i&&i.loseContext()}return r=null,o}catch(e){return!1}}function sign(e){return 0===e?0:e<0?-1:1}function destroyTextureCache(){var e=void 0;for(e in TextureCache)TextureCache[e].destroy();for(e in BaseTextureCache)BaseTextureCache[e].destroy()}function clearTextureCache(){var e=void 0;for(e in TextureCache)delete TextureCache[e];for(e in BaseTextureCache)delete BaseTextureCache[e]}function correctBlendMode(e,t){return premultiplyBlendMode[t?1:0][e]}function premultiplyTint(e,t){if(1===t)return(255*t<<24)+e;if(0===t)return 0;var r=e>>16&255,o=e>>8&255,i=255&e;return r=r*t+.5|0,o=o*t+.5|0,i=i*t+.5|0,(255*t<<24)+(r<<16)+(o<<8)+i}function premultiplyRgba(e,t,r,o){return r=r||new Float32Array(4),o||void 0===o?(r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t):(r[0]=e[0],r[1]=e[1],r[2]=e[2]),r[3]=t,r}function premultiplyTintToRgba(e,t,r,o){return r=r||new Float32Array(4),r[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(255&e)/255,(o||void 0===o)&&(r[0]*=t,r[1]*=t,r[2]*=t),r[3]=t,r}exports.__esModule=!0,exports.premultiplyBlendMode=exports.BaseTextureCache=exports.TextureCache=exports.mixins=exports.pluginTarget=exports.EventEmitter=exports.removeItems=exports.isMobile=void 0,exports.uid=uid,exports.hex2rgb=hex2rgb,exports.hex2string=hex2string,exports.rgb2hex=rgb2hex,exports.getResolutionOfUrl=getResolutionOfUrl,exports.decomposeDataUri=decomposeDataUri,exports.getUrlFileExtension=getUrlFileExtension,exports.getSvgSize=getSvgSize,exports.skipHello=skipHello,exports.sayHello=sayHello,exports.isWebGLSupported=isWebGLSupported,exports.sign=sign,exports.destroyTextureCache=destroyTextureCache,exports.clearTextureCache=clearTextureCache,exports.correctBlendMode=correctBlendMode,exports.premultiplyTint=premultiplyTint,exports.premultiplyRgba=premultiplyRgba,exports.premultiplyTintToRgba=premultiplyTintToRgba;var _const=require("../const"),_settings=require("../settings"),_settings2=_interopRequireDefault(_settings),_eventemitter=require("eventemitter3"),_eventemitter2=_interopRequireDefault(_eventemitter),_pluginTarget=require("./pluginTarget"),_pluginTarget2=_interopRequireDefault(_pluginTarget),_mixin=require("./mixin"),mixins=_interopRequireWildcard(_mixin),_ismobilejs=require("ismobilejs"),isMobile=_interopRequireWildcard(_ismobilejs),_removeArrayItems=require("remove-array-items"),_removeArrayItems2=_interopRequireDefault(_removeArrayItems),_mapPremultipliedBlendModes=require("./mapPremultipliedBlendModes"),_mapPremultipliedBlendModes2=_interopRequireDefault(_mapPremultipliedBlendModes),nextUid=0,saidHello=!1;exports.isMobile=isMobile,exports.removeItems=_removeArrayItems2.default,exports.EventEmitter=_eventemitter2.default,exports.pluginTarget=_pluginTarget2.default,exports.mixins=mixins;var TextureCache=exports.TextureCache=Object.create(null),BaseTextureCache=exports.BaseTextureCache=Object.create(null),premultiplyBlendMode=exports.premultiplyBlendMode=(0,_mapPremultipliedBlendModes2.default)();

},{"../const":36,"../settings":91,"./mapPremultipliedBlendModes":116,"./mixin":118,"./pluginTarget":119,"eventemitter3":3,"ismobilejs":5,"remove-array-items":185}],116:[function(require,module,exports){
"use strict";function mapPremultipliedBlendModes(){for(var _=[],D=[],E=0;E<32;E++)_[E]=E,D[E]=E;_[_const.BLEND_MODES.NORMAL_NPM]=_const.BLEND_MODES.NORMAL,_[_const.BLEND_MODES.ADD_NPM]=_const.BLEND_MODES.ADD,_[_const.BLEND_MODES.SCREEN_NPM]=_const.BLEND_MODES.SCREEN,D[_const.BLEND_MODES.NORMAL]=_const.BLEND_MODES.NORMAL_NPM,D[_const.BLEND_MODES.ADD]=_const.BLEND_MODES.ADD_NPM,D[_const.BLEND_MODES.SCREEN]=_const.BLEND_MODES.SCREEN_NPM;var N=[];return N.push(D),N.push(_),N}exports.__esModule=!0,exports.default=mapPremultipliedBlendModes;var _const=require("../const");

},{"../const":36}],117:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function maxRecommendedTextures(e){return _ismobilejs2.default.tablet||_ismobilejs2.default.phone?4:e}exports.__esModule=!0,exports.default=maxRecommendedTextures;var _ismobilejs=require("ismobilejs"),_ismobilejs2=_interopRequireDefault(_ismobilejs);

},{"ismobilejs":5}],118:[function(require,module,exports){
"use strict";function mixin(i,n){if(i&&n)for(var e=Object.keys(n),r=0;r<e.length;++r){var x=e[r];Object.defineProperty(i,x,Object.getOwnPropertyDescriptor(n,x))}}function delayMixin(i,n){mixins.push(i,n)}function performMixins(){for(var i=0;i<mixins.length;i+=2)mixin(mixins[i],mixins[i+1]);mixins.length=0}exports.__esModule=!0,exports.mixin=mixin,exports.delayMixin=delayMixin,exports.performMixins=performMixins;var mixins=[];

},{}],119:[function(require,module,exports){
"use strict";function pluginTarget(i){i.__plugins={},i.registerPlugin=function(n,s){i.__plugins[n]=s},i.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var n in i.__plugins)this.plugins[n]=new i.__plugins[n](this)},i.prototype.destroyPlugins=function(){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;this.plugins=null}}exports.__esModule=!0,exports.default={mixin:function(i){pluginTarget(i)}};

},{}],120:[function(require,module,exports){
"use strict";function trimCanvas(t){var l=t.width,o=t.height,e=t.getContext("2d"),i=e.getImageData(0,0,l,o).data,a=i.length,n={top:null,left:null,right:null,bottom:null},r=void 0,g=void 0,h=void 0;for(r=0;r<a;r+=4)0!==i[r+3]&&(g=r/4%l,h=~~(r/4/l),null===n.top&&(n.top=h),null===n.left?n.left=g:g<n.left&&(n.left=g),null===n.right?n.right=g+1:n.right<g&&(n.right=g+1),null===n.bottom?n.bottom=h:n.bottom<h&&(n.bottom=h));l=n.right-n.left;return{height:o=n.bottom-n.top+1,width:l,data:e.getImageData(n.left,n.top,l,o)}}exports.__esModule=!0,exports.default=trimCanvas;

},{}],121:[function(require,module,exports){
"use strict";function warn(e){var t=(new Error).stack;void 0===t?console.warn("Deprecation Warning: ",e):(t=t.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e),console.warn(t),console.groupEnd()):(console.warn("Deprecation Warning: ",e),console.warn(t)))}function deprecation(e){var t=e.mesh,r=e.particles,n=e.extras,s=e.filters,a=e.prepare,o=e.loaders,i=e.interaction;Object.defineProperties(e,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return warn("You do not need to use a PIXI Stage any more, you can simply render any container."),e.Container}},DisplayObjectContainer:{get:function(){return warn("DisplayObjectContainer has been shortened to Container, please use Container from now on."),e.Container}},Strip:{get:function(){return warn("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),t.Mesh}},Rope:{get:function(){return warn("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),t.Rope}},ParticleContainer:{get:function(){return warn("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),r.ParticleContainer}},MovieClip:{get:function(){return warn("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),n.AnimatedSprite}},TilingSprite:{get:function(){return warn("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),n.TilingSprite}},BitmapText:{get:function(){return warn("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),n.BitmapText}},blendModes:{get:function(){return warn("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),e.BLEND_MODES}},scaleModes:{get:function(){return warn("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),e.SCALE_MODES}},BaseTextureCache:{get:function(){return warn("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),e.utils.BaseTextureCache}},TextureCache:{get:function(){return warn("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),e.utils.TextureCache}},math:{get:function(){return warn("The math namespace is deprecated, please access members already accessible on PIXI."),e}},AbstractFilter:{get:function(){return warn("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.Filter}},TransformManual:{get:function(){return warn("TransformManual has been renamed to TransformBase, please update your pixi-spine"),e.TransformBase}},TARGET_FPMS:{get:function(){return warn("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),e.settings.TARGET_FPMS},set:function(t){warn("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),e.settings.TARGET_FPMS=t}},FILTER_RESOLUTION:{get:function(){return warn("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),e.settings.FILTER_RESOLUTION},set:function(t){warn("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),e.settings.FILTER_RESOLUTION=t}},RESOLUTION:{get:function(){return warn("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),e.settings.RESOLUTION},set:function(t){warn("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),e.settings.RESOLUTION=t}},MIPMAP_TEXTURES:{get:function(){return warn("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),e.settings.MIPMAP_TEXTURES},set:function(t){warn("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),e.settings.MIPMAP_TEXTURES=t}},SPRITE_BATCH_SIZE:{get:function(){return warn("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),e.settings.SPRITE_BATCH_SIZE},set:function(t){warn("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),e.settings.SPRITE_BATCH_SIZE=t}},SPRITE_MAX_TEXTURES:{get:function(){return warn("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),e.settings.SPRITE_MAX_TEXTURES},set:function(t){warn("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),e.settings.SPRITE_MAX_TEXTURES=t}},RETINA_PREFIX:{get:function(){return warn("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),e.settings.RETINA_PREFIX},set:function(t){warn("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),e.settings.RETINA_PREFIX=t}},DEFAULT_RENDER_OPTIONS:{get:function(){return warn("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),e.settings.RENDER_OPTIONS}}});for(var u=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],p=function(t){var r=u[t];Object.defineProperty(e[r.parent],"DEFAULT",{get:function(){return warn("PIXI."+r.parent+".DEFAULT has been deprecated, please use PIXI.settings."+r.target),e.settings[r.target]},set:function(t){warn("PIXI."+r.parent+".DEFAULT has been deprecated, please use PIXI.settings."+r.target),e.settings[r.target]=t}})},c=0;c<u.length;c++)p(c);Object.defineProperties(e.settings,{PRECISION:{get:function(){return warn("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),e.settings.PRECISION_FRAGMENT},set:function(t){warn("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),e.settings.PRECISION_FRAGMENT=t}}}),n.AnimatedSprite&&Object.defineProperties(n,{MovieClip:{get:function(){return warn("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),n.AnimatedSprite}}}),n&&Object.defineProperties(n,{TextureTransform:{get:function(){return warn("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),e.TextureMatrix}}}),e.DisplayObject.prototype.generateTexture=function(e,t,r){return warn("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),e.generateTexture(this,t,r)},e.Graphics.prototype.generateTexture=function(e,t){return warn("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(e,t)},e.GroupD8.isSwapWidthHeight=function(t){return warn("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),e.GroupD8.isVertical(t)},e.RenderTexture.prototype.render=function(e,t,r,n){this.legacyRenderer.render(e,this,r,t,!n),warn("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},e.RenderTexture.prototype.getImage=function(e){return warn("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(e)},e.RenderTexture.prototype.getBase64=function(e){return warn("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(e)},e.RenderTexture.prototype.getCanvas=function(e){return warn("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(e)},e.RenderTexture.prototype.getPixels=function(e){return warn("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(e)},e.Sprite.prototype.setTexture=function(e){this.texture=e,warn("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},n.BitmapText&&(n.BitmapText.prototype.setText=function(e){this.text=e,warn("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),e.Text.prototype.setText=function(e){this.text=e,warn("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},e.Text.calculateFontProperties=function(t){return warn("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),e.TextMetrics.measureFont(t)},Object.defineProperties(e.Text,{fontPropertiesCache:{get:function(){return warn("Text.fontPropertiesCache is deprecated"),e.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return warn("Text.fontPropertiesCanvas is deprecated"),e.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return warn("Text.fontPropertiesContext is deprecated"),e.TextMetrics._context}}}),e.Text.prototype.setStyle=function(e){this.style=e,warn("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},e.Text.prototype.determineFontProperties=function(t){return warn("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),e.TextMetrics.measureFont(t)},e.Text.getFontStyle=function(t){return warn("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),(t=t||{})instanceof e.TextStyle||(t=new e.TextStyle(t)),t.toFontString()},Object.defineProperties(e.TextStyle.prototype,{font:{get:function(){warn("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var e="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+e+" "+this._fontFamily},set:function(e){warn("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),e.indexOf("italic")>1?this._fontStyle="italic":e.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",e.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var t=e.split(" "),r=-1;this._fontSize=26;for(var n=0;n<t.length;++n)if(t[n].match(/(px|pt|em|%)/)){r=n,this._fontSize=t[n];break}this._fontWeight="normal";for(var s=0;s<r;++s)if(t[s].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=t[s];break}if(r>-1&&r<t.length-1){this._fontFamily="";for(var a=r+1;a<t.length;++a)this._fontFamily+=t[a]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),e.Texture.prototype.setFrame=function(e){this.frame=e,warn("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},e.Texture.addTextureToCache=function(t,r){e.Texture.addToCache(t,r),warn("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},e.Texture.removeTextureFromCache=function(t){return warn("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),e.BaseTexture.removeFromCache(t),e.Texture.removeFromCache(t)},Object.defineProperties(s,{AbstractFilter:{get:function(){return warn("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.AbstractFilter}},SpriteMaskFilter:{get:function(){return warn("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),e.SpriteMaskFilter}},VoidFilter:{get:function(){return warn("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),s.AlphaFilter}}}),e.utils.uuid=function(){return warn("utils.uuid() is deprecated, please use utils.uid() from now on."),e.utils.uid()},e.utils.canUseNewCanvasBlendModes=function(){return warn("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),e.CanvasTinter.canUseMultiply};var l=!0;if(Object.defineProperty(e.utils,"_saidHello",{set:function(e){e&&(warn("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),l=e},get:function(){return l}}),a.BasePrepare&&(a.BasePrepare.prototype.register=function(e,t){return warn("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),e&&this.registerFindHook(e),t&&this.registerUploadHook(t),this}),a.canvas&&Object.defineProperty(a.canvas,"UPLOADS_PER_FRAME",{set:function(){warn("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return warn("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),a.webgl&&Object.defineProperty(a.webgl,"UPLOADS_PER_FRAME",{set:function(){warn("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return warn("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),o.Loader){var d=o.Resource,T=o.Loader;Object.defineProperties(d.prototype,{isJson:{get:function(){return warn("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===d.TYPE.JSON}},isXml:{get:function(){return warn("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===d.TYPE.XML}},isImage:{get:function(){return warn("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===d.TYPE.IMAGE}},isAudio:{get:function(){return warn("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===d.TYPE.AUDIO}},isVideo:{get:function(){return warn("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===d.TYPE.VIDEO}}}),Object.defineProperties(T.prototype,{before:{get:function(){return warn("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return warn("The after() method is deprecated, please use use()."),this.use}}})}i.interactiveTarget&&Object.defineProperty(i.interactiveTarget,"defaultCursor",{set:function(e){warn("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=e},get:function(){return warn("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),i.InteractionManager&&(Object.defineProperty(i.InteractionManager,"defaultCursorStyle",{set:function(e){warn("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=e},get:function(){return warn("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(i.InteractionManager,"currentCursorStyle",{set:function(e){warn("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=e},get:function(){return warn("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}exports.__esModule=!0,exports.default=deprecation;

},{}],122:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _core=require("../../core"),core=_interopRequireWildcard(_core),TEMP_RECT=new core.Rectangle,CanvasExtract=function(){function e(t){_classCallCheck(this,e),this.renderer=t,t.extract=this}return e.prototype.image=function(e){var t=new Image;return t.src=this.base64(e),t},e.prototype.base64=function(e){return this.canvas(e).toDataURL()},e.prototype.canvas=function(e){var t=this.renderer,r=void 0,a=void 0,n=void 0,o=void 0;e&&(o=e instanceof core.RenderTexture?e:t.generateTexture(e)),o?(r=o.baseTexture._canvasRenderTarget.context,a=o.baseTexture._canvasRenderTarget.resolution,n=o.frame):(r=t.rootContext,(n=TEMP_RECT).width=this.renderer.width,n.height=this.renderer.height);var i=n.width*a,s=n.height*a,c=new core.CanvasRenderTarget(i,s),u=r.getImageData(n.x*a,n.y*a,i,s);return c.context.putImageData(u,0,0),c.canvas},e.prototype.pixels=function(e){var t=this.renderer,r=void 0,a=void 0,n=void 0,o=void 0;return e&&(o=e instanceof core.RenderTexture?e:t.generateTexture(e)),o?(r=o.baseTexture._canvasRenderTarget.context,a=o.baseTexture._canvasRenderTarget.resolution,n=o.frame):(r=t.rootContext,(n=TEMP_RECT).width=t.width,n.height=t.height),r.getImageData(0,0,n.width*a,n.height*a).data},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e}();exports.default=CanvasExtract,core.CanvasRenderer.registerPlugin("extract",CanvasExtract);

},{"../../core":55}],123:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _WebGLExtract=require("./webgl/WebGLExtract");Object.defineProperty(exports,"webgl",{enumerable:!0,get:function(){return _interopRequireDefault(_WebGLExtract).default}});var _CanvasExtract=require("./canvas/CanvasExtract");Object.defineProperty(exports,"canvas",{enumerable:!0,get:function(){return _interopRequireDefault(_CanvasExtract).default}});

},{"./canvas/CanvasExtract":122,"./webgl/WebGLExtract":124}],124:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _core=require("../../core"),core=_interopRequireWildcard(_core),TEMP_RECT=new core.Rectangle,BYTES_PER_PIXEL=4,WebGLExtract=function(){function e(r){_classCallCheck(this,e),this.renderer=r,r.extract=this}return e.prototype.image=function(e){var r=new Image;return r.src=this.base64(e),r},e.prototype.base64=function(e){return this.canvas(e).toDataURL()},e.prototype.canvas=function(e){var r=this.renderer,t=void 0,n=void 0,a=void 0,i=!1,o=void 0;e&&(o=e instanceof core.RenderTexture?e:this.renderer.generateTexture(e)),o?(n=(t=o.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,a=o.frame,i=!1):(n=(t=this.renderer.rootRenderTarget).resolution,i=!0,(a=TEMP_RECT).width=t.size.width,a.height=t.size.height);var s=a.width*n,c=a.height*n,d=new core.CanvasRenderTarget(s,c);if(t){r.bindRenderTarget(t);var u=new Uint8Array(BYTES_PER_PIXEL*s*c),h=r.gl;h.readPixels(a.x*n,a.y*n,s,c,h.RGBA,h.UNSIGNED_BYTE,u);var l=d.context.getImageData(0,0,s,c);l.data.set(u),d.context.putImageData(l,0,0),i&&(d.context.scale(1,-1),d.context.drawImage(d.canvas,0,-c))}return d.canvas},e.prototype.pixels=function(e){var r=this.renderer,t=void 0,n=void 0,a=void 0,i=void 0;e&&(i=e instanceof core.RenderTexture?e:this.renderer.generateTexture(e)),i?(n=(t=i.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,a=i.frame):(n=(t=this.renderer.rootRenderTarget).resolution,(a=TEMP_RECT).width=t.size.width,a.height=t.size.height);var o=a.width*n,s=a.height*n,c=new Uint8Array(BYTES_PER_PIXEL*o*s);if(t){r.bindRenderTarget(t);var d=r.gl;d.readPixels(a.x*n,a.y*n,o,s,d.RGBA,d.UNSIGNED_BYTE,c)}return c},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e}();exports.default=WebGLExtract,core.WebGLRenderer.registerPlugin("extract",WebGLExtract);

},{"../../core":55}],125:[function(require,module,exports){
"use strict";function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),_core=require("../core"),core=_interopRequireWildcard(_core),AnimatedSprite=function(t){function e(r,i){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,t.call(this,r[0]instanceof core.Texture?r[0]:r[0].texture));return n._textures=null,n._durations=null,n.textures=r,n._autoUpdate=!1!==i,n.animationSpeed=1,n.loop=!0,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n.playing=!1,n}return _inherits(e,t),e.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&core.ticker.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&core.ticker.shared.add(this.update,this,core.UPDATE_PRIORITY.HIGH))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,r=this.currentFrame;if(null!==this._durations){var i=this._currentTime%1*this._durations[this.currentFrame];for(i+=e/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r?this.onLoop():this.animationSpeed<0&&this.currentFrame>r&&this.onLoop()),this.updateTexture())},e.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.onFrameChange&&this.onFrameChange(this.currentFrame)},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e)},e.fromFrames=function(t){for(var r=[],i=0;i<t.length;++i)r.push(core.Texture.fromFrame(t[i]));return new e(r)},e.fromImages=function(t){for(var r=[],i=0;i<t.length;++i)r.push(core.Texture.fromImage(t[i]));return new e(r)},_createClass(e,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof core.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),e}(core.Sprite);exports.default=AnimatedSprite;

},{"../core":55}],126:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),_core=require("../core"),core=_interopRequireWildcard(_core),_ObservablePoint=require("../core/math/ObservablePoint"),_ObservablePoint2=_interopRequireDefault(_ObservablePoint),_utils=require("../core/utils"),_settings=require("../core/settings"),_settings2=_interopRequireDefault(_settings),BitmapText=function(t){function e(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e);var r=_possibleConstructorReturn(this,t.call(this));return r._textWidth=0,r._textHeight=0,r._glyphs=[],r._font={tint:void 0!==n.tint?n.tint:16777215,align:n.align||"left",name:null,size:0},r.font=n.font,r._text=i,r._maxWidth=0,r._maxLineHeight=0,r._anchor=new _ObservablePoint2.default(function(){r.dirty=!0},r,0,0),r.dirty=!1,r.updateText(),r}return _inherits(e,t),e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],i=this._font.size/t.size,n=new core.Point,r=[],s=[],o=null,a=0,h=0,u=0,f=-1,l=0,c=0,g=0,p=0;p<this.text.length;p++){var _=this.text.charCodeAt(p);if(/(\s)/.test(this.text.charAt(p))&&(f=p,l=a),/(?:\r\n|\r|\n)/.test(this.text.charAt(p)))s.push(a),h=Math.max(h,a),u++,n.x=0,n.y+=t.lineHeight,o=null;else if(-1!==f&&this._maxWidth>0&&n.x*i>this._maxWidth)core.utils.removeItems(r,f-c,p-f),p=f,f=-1,++c,s.push(l),h=Math.max(h,l),u++,n.x=0,n.y+=t.lineHeight,o=null;else{var x=t.chars[_];x&&(o&&x.kerning[o]&&(n.x+=x.kerning[o]),r.push({texture:x.texture,line:u,charCode:_,position:new core.Point(n.x+x.xOffset,n.y+x.yOffset)}),a=n.x+(x.texture.width+x.xOffset),n.x+=x.xAdvance,g=Math.max(g,x.yOffset+x.texture.height),o=_)}}s.push(a),h=Math.max(h,a);for(var y=[],d=0;d<=u;d++){var m=0;"right"===this._font.align?m=h-s[d]:"center"===this._font.align&&(m=(h-s[d])/2),y.push(m)}for(var b=r.length,v=this.tint,O=0;O<b;O++){var A=this._glyphs[O];A?A.texture=r[O].texture:(A=new core.Sprite(r[O].texture),this._glyphs.push(A)),A.position.x=(r[O].position.x+y[r[O].line])*i,A.position.y=r[O].position.y*i,A.scale.x=A.scale.y=i,A.tint=v,A.parent||this.addChild(A)}for(var T=b;T<this._glyphs.length;++T)this.removeChild(this._glyphs[T]);if(this._textWidth=h*i,this._textHeight=(n.y+t.lineHeight)*i,0!==this.anchor.x||0!==this.anchor.y)for(var k=0;k<b;k++)this._glyphs[k].x-=this._textWidth*this.anchor.x,this._glyphs[k].y-=this._textHeight*this.anchor.y;this._maxLineHeight=g*i},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},e.registerFont=function(t,i){var n={},r=t.getElementsByTagName("info")[0],s=t.getElementsByTagName("common")[0],o=t.getElementsByTagName("page")[0].getAttribute("file"),a=(0,_utils.getResolutionOfUrl)(o,_settings2.default.RESOLUTION);n.font=r.getAttribute("face"),n.size=parseInt(r.getAttribute("size"),10),n.lineHeight=parseInt(s.getAttribute("lineHeight"),10)/a,n.chars={};for(var h=t.getElementsByTagName("char"),u=0;u<h.length;u++){var f=h[u],l=parseInt(f.getAttribute("id"),10),c=new core.Rectangle(parseInt(f.getAttribute("x"),10)/a+i.frame.x/a,parseInt(f.getAttribute("y"),10)/a+i.frame.y/a,parseInt(f.getAttribute("width"),10)/a,parseInt(f.getAttribute("height"),10)/a);n.chars[l]={xOffset:parseInt(f.getAttribute("xoffset"),10)/a,yOffset:parseInt(f.getAttribute("yoffset"),10)/a,xAdvance:parseInt(f.getAttribute("xadvance"),10)/a,kerning:{},texture:new core.Texture(i.baseTexture,c)}}for(var g=t.getElementsByTagName("kerning"),p=0;p<g.length;p++){var _=g[p],x=parseInt(_.getAttribute("first"),10)/a,y=parseInt(_.getAttribute("second"),10)/a,d=parseInt(_.getAttribute("amount"),10)/a;n.chars[y]&&(n.chars[y].kerning[x]=d)}return e.fonts[n.font]=n,n},_createClass(e,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),e}(core.Container);exports.default=BitmapText,BitmapText.fonts={};

},{"../core":55,"../core/math/ObservablePoint":58,"../core/settings":91,"../core/utils":115}],127:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),_core=require("../core"),core=_interopRequireWildcard(_core),_CanvasTinter=require("../core/sprites/canvas/CanvasTinter"),_CanvasTinter2=_interopRequireDefault(_CanvasTinter),tempPoint=new core.Point,TilingSprite=function(t){function e(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;_classCallCheck(this,e);var o=_possibleConstructorReturn(this,t.call(this,i));return o.tileTransform=new core.TransformStatic,o._width=r,o._height=n,o._canvasPattern=null,o.uvTransform=i.transform||new core.TextureMatrix(i),o.pluginName="tilingSprite",o.uvRespectAnchor=!1,o}return _inherits(e,t),e.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},e.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var i=t.context,r=this.worldTransform,n=t.resolution,o=e.baseTexture,s=o.resolution,a=this.tilePosition.x/this.tileScale.x%e._frame.width*s,h=this.tilePosition.y/this.tileScale.y%e._frame.height*s;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var c=new core.CanvasRenderTarget(e._frame.width,e._frame.height,s);16777215!==this.tint?(this.tintedTexture=_CanvasTinter2.default.getTintedTexture(this,this.tint),c.context.drawImage(this.tintedTexture,0,0)):c.context.drawImage(o.source,-e._frame.x*s,-e._frame.y*s),this.cachedTint=this.tint,this._canvasPattern=c.context.createPattern(c.canvas,"repeat")}i.globalAlpha=this.worldAlpha,i.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),t.setBlendMode(this.blendMode),i.fillStyle=this._canvasPattern,i.scale(this.tileScale.x/s,this.tileScale.y/s);var u=this.anchor.x*-this._width,l=this.anchor.y*-this._height;this.uvRespectAnchor?(i.translate(a,h),i.fillRect(-a+u,-h+l,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s)):(i.translate(a+u,h+l),i.fillRect(-a,-h,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s))}},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,r)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),e||(this._localBoundsRect||(this._localBoundsRect=new core.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,tempPoint);var e=this._width,i=this._height,r=-e*this.anchor._x;if(tempPoint.x>=r&&tempPoint.x<r+e){var n=-i*this.anchor._y;if(tempPoint.y>=n&&tempPoint.y<n+i)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvTransform=null},e.from=function(t,i,r){return new e(core.Texture.from(t),i,r)},e.fromFrame=function(t,i,r){var n=core.utils.TextureCache[t];if(!n)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new e(n,i,r)},e.fromImage=function(t,i,r,n,o){return new e(core.Texture.fromImage(t,n,o),i,r)},_createClass(e,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),e}(core.Sprite);exports.default=TilingSprite;

},{"../core":55,"../core/sprites/canvas/CanvasTinter":94}],128:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _core=require("../core"),core=_interopRequireWildcard(_core),_Texture=require("../core/textures/Texture"),_Texture2=_interopRequireDefault(_Texture),_BaseTexture=require("../core/textures/BaseTexture"),_BaseTexture2=_interopRequireDefault(_BaseTexture),_utils=require("../core/utils"),DisplayObject=core.DisplayObject,_tempMatrix=new core.Matrix;DisplayObject.prototype._cacheAsBitmap=!1,DisplayObject.prototype._cacheData=!1;var CacheData=function t(){_classCallCheck(this,t),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(DisplayObject.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e=void 0;t?(this._cacheData||(this._cacheData=new CacheData),(e=this._cacheData).originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this._calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this._calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),DisplayObject.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},DisplayObject.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var a=this.getLocalBounds().clone();if(this._filters){var i=this._filters[0].padding;a.pad(i)}var r=t._activeRenderTarget,s=t.filterManager.filterStack,n=core.RenderTexture.create(0|a.width,0|a.height),h="cacheAsBitmap_"+(0,_utils.uid)();this._cacheData.textureCacheId=h,_BaseTexture2.default.addToCache(n.baseTexture,h),_Texture2.default.addToCache(n,h);var c=_tempMatrix;c.tx=-a.x,c.ty=-a.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,n,!0,c,!0),t.bindRenderTarget(r),t.filterManager.filterStack=s,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var o=new core.Sprite(n);o.transform.worldTransform=this.transform.worldTransform,o.anchor.x=-a.x/a.width,o.anchor.y=-a.y/a.height,o.alpha=e,o._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=o,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=o.containsPoint.bind(o)}},DisplayObject.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(t))},DisplayObject.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),a=this.alpha;this.alpha=1;var i=t.context,r=core.RenderTexture.create(0|e.width,0|e.height),s="cacheAsBitmap_"+(0,_utils.uid)();this._cacheData.textureCacheId=s,_BaseTexture2.default.addToCache(r.baseTexture,s),_Texture2.default.addToCache(r,s);var n=_tempMatrix;this.transform.localTransform.copy(n),n.invert(),n.tx-=e.x,n.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,r,!0,n,!1),t.context=i,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var h=new core.Sprite(r);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-e.x/e.width,h.anchor.y=-e.y/e.height,h._bounds=this._bounds,h.alpha=a,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=h,this.containsPoint=h.containsPoint.bind(h)}},DisplayObject.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},DisplayObject.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},DisplayObject.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,_BaseTexture2.default.removeFromCache(this._cacheData.textureCacheId),_Texture2.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},DisplayObject.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};

},{"../core":55,"../core/textures/BaseTexture":102,"../core/textures/Texture":105,"../core/utils":115}],129:[function(require,module,exports){
"use strict";function _interopRequireWildcard(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}var _core=require("../core"),core=_interopRequireWildcard(_core);core.DisplayObject.prototype.name=null,core.Container.prototype.getChildByName=function(r){for(var e=0;e<this.children.length;e++)if(this.children[e].name===r)return this.children[e];return null};

},{"../core":55}],130:[function(require,module,exports){
"use strict";function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}var _core=require("../core"),core=_interopRequireWildcard(_core);core.DisplayObject.prototype.getGlobalPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new core.Point,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};

},{"../core":55}],131:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.BitmapText=exports.TilingSpriteRenderer=exports.TilingSprite=exports.AnimatedSprite=void 0;var _AnimatedSprite=require("./AnimatedSprite");Object.defineProperty(exports,"AnimatedSprite",{enumerable:!0,get:function(){return _interopRequireDefault(_AnimatedSprite).default}});var _TilingSprite=require("./TilingSprite");Object.defineProperty(exports,"TilingSprite",{enumerable:!0,get:function(){return _interopRequireDefault(_TilingSprite).default}});var _TilingSpriteRenderer=require("./webgl/TilingSpriteRenderer");Object.defineProperty(exports,"TilingSpriteRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(_TilingSpriteRenderer).default}});var _BitmapText=require("./BitmapText");Object.defineProperty(exports,"BitmapText",{enumerable:!0,get:function(){return _interopRequireDefault(_BitmapText).default}}),require("./cacheAsBitmap"),require("./getChildByName"),require("./getGlobalPosition");

},{"./AnimatedSprite":125,"./BitmapText":126,"./TilingSprite":127,"./cacheAsBitmap":128,"./getChildByName":129,"./getGlobalPosition":130,"./webgl/TilingSpriteRenderer":132}],132:[function(require,module,exports){
"use strict";function _interopRequireWildcard(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e.default=r,e}function _classCallCheck(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?r:e}function _inherits(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}exports.__esModule=!0;var _core=require("../../core"),core=_interopRequireWildcard(_core),_const=require("../../core/const"),_path=require("path"),tempMat=new core.Matrix,TilingSpriteRenderer=function(r){function e(o){_classCallCheck(this,e);var t=_possibleConstructorReturn(this,r.call(this,o));return t.shader=null,t.simpleShader=null,t.quad=null,t}return _inherits(e,r),e.prototype.onContextChange=function(){var r=this.renderer.gl;this.shader=new core.Shader(r,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new core.Shader(r,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new core.Quad(r,this.renderer.state.attribState),this.quad.initVao(this.shader)},e.prototype.render=function(r){var e=this.renderer,o=this.quad;e.bindVao(o.vao);var t=o.vertices;t[0]=t[6]=r._width*-r.anchor.x,t[1]=t[3]=r._height*-r.anchor.y,t[2]=t[4]=r._width*(1-r.anchor.x),t[5]=t[7]=r._height*(1-r.anchor.y),r.uvRespectAnchor&&((t=o.uvs)[0]=t[6]=-r.anchor.x,t[1]=t[3]=-r.anchor.y,t[2]=t[4]=1-r.anchor.x,t[5]=t[7]=1-r.anchor.y),o.upload();var n=r._texture,a=n.baseTexture,i=r.tileTransform.localTransform,u=r.uvTransform,s=a.isPowerOfTwo&&n.frame.width===a.width&&n.frame.height===a.height;s&&(a._glTextures[e.CONTEXT_UID]?s=a.wrapMode!==_const.WRAP_MODES.CLAMP:a.wrapMode===_const.WRAP_MODES.CLAMP&&(a.wrapMode=_const.WRAP_MODES.REPEAT));var l=s?this.simpleShader:this.shader;e.bindShader(l);var c=n.width,d=n.height,p=r._width,m=r._height;tempMat.set(i.a*c/p,i.b*c/m,i.c*d/p,i.d*d/m,i.tx/p,i.ty/m),tempMat.invert(),s?tempMat.prepend(u.mapCoord):(l.uniforms.uMapCoord=u.mapCoord.toArray(!0),l.uniforms.uClampFrame=u.uClampFrame,l.uniforms.uClampOffset=u.uClampOffset),l.uniforms.uTransform=tempMat.toArray(!0),l.uniforms.uColor=core.utils.premultiplyTintToRgba(r.tint,r.worldAlpha,l.uniforms.uColor,a.premultipliedAlpha),l.uniforms.translationMatrix=r.transform.worldTransform.toArray(!0),l.uniforms.uSampler=e.bindTexture(n),e.setBlendMode(core.utils.correctBlendMode(r.blendMode,a.premultipliedAlpha)),o.vao.draw(this.renderer.gl.TRIANGLES,6,0)},e}(core.ObjectRenderer);exports.default=TilingSpriteRenderer,core.WebGLRenderer.registerPlugin("tilingSprite",TilingSpriteRenderer);

},{"../../core":55,"../../core/const":36,"path":12}],133:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}exports.__esModule=!0;var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),_core=require("../../core"),core=_interopRequireWildcard(_core),_path=require("path"),AlphaFilter=function(e){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;_classCallCheck(this,r);var n=_possibleConstructorReturn(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"));return n.alpha=t,n.glShaderKey="alpha",n}return _inherits(r,e),_createClass(r,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}}]),r}(core.Filter);exports.default=AlphaFilter;

},{"../../core":55,"path":12}],134:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var l=e[r];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}return function(e,r,l){return r&&t(e.prototype,r),l&&t(e,l),e}}(),_core=require("../../core"),core=_interopRequireWildcard(_core),_BlurXFilter=require("./BlurXFilter"),_BlurXFilter2=_interopRequireDefault(_BlurXFilter),_BlurYFilter=require("./BlurYFilter"),_BlurYFilter2=_interopRequireDefault(_BlurYFilter),BlurFilter=function(t){function e(r,l,i,u){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,t.call(this));return n.blurXFilter=new _BlurXFilter2.default(r,l,i,u),n.blurYFilter=new _BlurYFilter2.default(r,l,i,u),n.padding=0,n.resolution=i||core.settings.RESOLUTION,n.quality=l||4,n.blur=r||8,n}return _inherits(e,t),e.prototype.apply=function(t,e,r){var l=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,l,!0),this.blurYFilter.apply(t,l,r,!1),t.returnRenderTarget(l)},_createClass(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(t){this.blurYFilter._blendMode=t}}]),e}(core.Filter);exports.default=BlurFilter;

},{"../../core":55,"./BlurXFilter":135,"./BlurYFilter":136}],135:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}exports.__esModule=!0;var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),_core=require("../../core"),core=_interopRequireWildcard(_core),_generateBlurVertSource=require("./generateBlurVertSource"),_generateBlurVertSource2=_interopRequireDefault(_generateBlurVertSource),_generateBlurFragSource=require("./generateBlurFragSource"),_generateBlurFragSource2=_interopRequireDefault(_generateBlurFragSource),_getMaxBlurKernelSize=require("./getMaxBlurKernelSize"),_getMaxBlurKernelSize2=_interopRequireDefault(_getMaxBlurKernelSize),BlurXFilter=function(e){function r(t,n,i,u){_classCallCheck(this,r),u=u||5;var o=(0,_generateBlurVertSource2.default)(u,!0),a=(0,_generateBlurFragSource2.default)(u),s=_possibleConstructorReturn(this,e.call(this,o,a));return s.resolution=i||core.settings.RESOLUTION,s._quality=0,s.quality=n||4,s.strength=t||8,s.firstRun=!0,s}return _inherits(r,e),r.prototype.apply=function(e,r,t,n){if(this.firstRun){var i=e.renderer.gl,u=(0,_getMaxBlurKernelSize2.default)(i);this.vertexSrc=(0,_generateBlurVertSource2.default)(u,!0),this.fragmentSrc=(0,_generateBlurFragSource2.default)(u),this.firstRun=!1}if(this.uniforms.strength=1/t.size.width*(t.size.width/r.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,r,t,n);else{for(var o=e.getRenderTarget(!0),a=r,s=o,l=0;l<this.passes-1;l++){e.applyFilter(this,a,s,!0);var c=s;s=a,a=c}e.applyFilter(this,a,t,n),e.returnRenderTarget(o)}},_createClass(r,[{key:"blur",get:function(){return this.strength},set:function(e){this.padding=2*Math.abs(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),r}(core.Filter);exports.default=BlurXFilter;

},{"../../core":55,"./generateBlurFragSource":137,"./generateBlurVertSource":138,"./getMaxBlurKernelSize":139}],136:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}exports.__esModule=!0;var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),_core=require("../../core"),core=_interopRequireWildcard(_core),_generateBlurVertSource=require("./generateBlurVertSource"),_generateBlurVertSource2=_interopRequireDefault(_generateBlurVertSource),_generateBlurFragSource=require("./generateBlurFragSource"),_generateBlurFragSource2=_interopRequireDefault(_generateBlurFragSource),_getMaxBlurKernelSize=require("./getMaxBlurKernelSize"),_getMaxBlurKernelSize2=_interopRequireDefault(_getMaxBlurKernelSize),BlurYFilter=function(e){function r(t,n,i,u){_classCallCheck(this,r),u=u||5;var o=(0,_generateBlurVertSource2.default)(u,!1),a=(0,_generateBlurFragSource2.default)(u),s=_possibleConstructorReturn(this,e.call(this,o,a));return s.resolution=i||core.settings.RESOLUTION,s._quality=0,s.quality=n||4,s.strength=t||8,s.firstRun=!0,s}return _inherits(r,e),r.prototype.apply=function(e,r,t,n){if(this.firstRun){var i=e.renderer.gl,u=(0,_getMaxBlurKernelSize2.default)(i);this.vertexSrc=(0,_generateBlurVertSource2.default)(u,!1),this.fragmentSrc=(0,_generateBlurFragSource2.default)(u),this.firstRun=!1}if(this.uniforms.strength=1/t.size.height*(t.size.height/r.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,r,t,n);else{for(var o=e.getRenderTarget(!0),a=r,s=o,l=0;l<this.passes-1;l++){e.applyFilter(this,a,s,!0);var c=s;s=a,a=c}e.applyFilter(this,a,t,n),e.returnRenderTarget(o)}},_createClass(r,[{key:"blur",get:function(){return this.strength},set:function(e){this.padding=2*Math.abs(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),r}(core.Filter);exports.default=BlurYFilter;

},{"../../core":55,"./generateBlurFragSource":137,"./generateBlurVertSource":138,"./getMaxBlurKernelSize":139}],137:[function(require,module,exports){
"use strict";function generateFragBlurSource(e){for(var r=GAUSSIAN_VALUES[e],a=r.length,l=fragTemplate,o="",u=void 0,n=0;n<e;n++){var t="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",n);u=n,n>=a&&(u=e-n-1),o+=t=t.replace("%value%",r[u]),o+="\n"}return l=l.replace("%blur%",o),l=l.replace("%size%",e)}exports.__esModule=!0,exports.default=generateFragBlurSource;var GAUSSIAN_VALUES={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},fragTemplate=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");

},{}],138:[function(require,module,exports){
"use strict";function generateVertBlurSource(e,r){var t=Math.ceil(e/2),o=vertTemplate,a="",i=void 0;i=r?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var n=0;n<e;n++){var l=i.replace("%index%",n);a+=l=l.replace("%sampleIndex%",n-(t-1)+".0"),a+="\n"}return o=o.replace("%blur%",a),o=o.replace("%size%",e)}exports.__esModule=!0,exports.default=generateVertBlurSource;var vertTemplate=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n");

},{}],139:[function(require,module,exports){
"use strict";function getMaxKernelSize(e){for(var r=e.getParameter(e.MAX_VARYING_VECTORS),t=15;t>r;)t-=2;return t}exports.__esModule=!0,exports.default=getMaxKernelSize;

},{}],140:[function(require,module,exports){
"use strict";function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?t:r}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}exports.__esModule=!0;var _createClass=function(){function t(t,r){for(var e=0;e<r.length;e++){var o=r[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(r,e,o){return e&&t(r.prototype,e),o&&t(r,o),r}}(),_core=require("../../core"),core=_interopRequireWildcard(_core),_path=require("path"),ColorMatrixFilter=function(t){function r(){_classCallCheck(this,r);var e=_possibleConstructorReturn(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return e.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],e.alpha=1,e}return _inherits(r,t),r.prototype._loadMatrix=function(t){var r=t;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(this._multiply(r,this.uniforms.m,t),r=this._colorMatrix(r)),this.uniforms.m=r},r.prototype._multiply=function(t,r,e){return t[0]=r[0]*e[0]+r[1]*e[5]+r[2]*e[10]+r[3]*e[15],t[1]=r[0]*e[1]+r[1]*e[6]+r[2]*e[11]+r[3]*e[16],t[2]=r[0]*e[2]+r[1]*e[7]+r[2]*e[12]+r[3]*e[17],t[3]=r[0]*e[3]+r[1]*e[8]+r[2]*e[13]+r[3]*e[18],t[4]=r[0]*e[4]+r[1]*e[9]+r[2]*e[14]+r[3]*e[19]+r[4],t[5]=r[5]*e[0]+r[6]*e[5]+r[7]*e[10]+r[8]*e[15],t[6]=r[5]*e[1]+r[6]*e[6]+r[7]*e[11]+r[8]*e[16],t[7]=r[5]*e[2]+r[6]*e[7]+r[7]*e[12]+r[8]*e[17],t[8]=r[5]*e[3]+r[6]*e[8]+r[7]*e[13]+r[8]*e[18],t[9]=r[5]*e[4]+r[6]*e[9]+r[7]*e[14]+r[8]*e[19]+r[9],t[10]=r[10]*e[0]+r[11]*e[5]+r[12]*e[10]+r[13]*e[15],t[11]=r[10]*e[1]+r[11]*e[6]+r[12]*e[11]+r[13]*e[16],t[12]=r[10]*e[2]+r[11]*e[7]+r[12]*e[12]+r[13]*e[17],t[13]=r[10]*e[3]+r[11]*e[8]+r[12]*e[13]+r[13]*e[18],t[14]=r[10]*e[4]+r[11]*e[9]+r[12]*e[14]+r[13]*e[19]+r[14],t[15]=r[15]*e[0]+r[16]*e[5]+r[17]*e[10]+r[18]*e[15],t[16]=r[15]*e[1]+r[16]*e[6]+r[17]*e[11]+r[18]*e[16],t[17]=r[15]*e[2]+r[16]*e[7]+r[17]*e[12]+r[18]*e[17],t[18]=r[15]*e[3]+r[16]*e[8]+r[17]*e[13]+r[18]*e[18],t[19]=r[15]*e[4]+r[16]*e[9]+r[17]*e[14]+r[18]*e[19]+r[19],t},r.prototype._colorMatrix=function(t){var r=new Float32Array(t);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r},r.prototype.brightness=function(t,r){var e=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(e,r)},r.prototype.greyscale=function(t,r){var e=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(e,r)},r.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},r.prototype.hue=function(t,r){t=(t||0)/180*Math.PI;var e=Math.cos(t),o=Math.sin(t),n=(0,Math.sqrt)(1/3),i=[e+1/3*(1-e),1/3*(1-e)-n*o,1/3*(1-e)+n*o,0,0,1/3*(1-e)+n*o,e+1/3*(1-e),1/3*(1-e)-n*o,0,0,1/3*(1-e)-n*o,1/3*(1-e)+n*o,e+1/3*(1-e),0,0,0,0,0,1,0];this._loadMatrix(i,r)},r.prototype.contrast=function(t,r){var e=(t||0)+1,o=-.5*(e-1),n=[e,0,0,0,o,0,e,0,0,o,0,0,e,0,o,0,0,0,1,0];this._loadMatrix(n,r)},r.prototype.saturate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments[1],e=2*t/3+1,o=-.5*(e-1),n=[e,o,o,0,0,o,e,o,0,0,o,o,e,0,0,0,0,0,1,0];this._loadMatrix(n,r)},r.prototype.desaturate=function(){this.saturate(-1)},r.prototype.negative=function(t){this._loadMatrix([0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0],t)},r.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},r.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},r.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},r.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},r.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},r.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},r.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},r.prototype.colorTone=function(t,r,e,o,n){t=t||.2,r=r||.15;var i=((e=e||16770432)>>16&255)/255,a=(e>>8&255)/255,u=(255&e)/255,l=((o=o||3375104)>>16&255)/255,s=(o>>8&255)/255,c=(255&o)/255,p=[.3,.59,.11,0,0,i,a,u,t,0,l,s,c,r,0,i-l,a-s,u-c,0,0];this._loadMatrix(p,n)},r.prototype.night=function(t,r){var e=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(e,r)},r.prototype.predator=function(t,r){var e=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(e,r)},r.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},r.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},_createClass(r,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),r}(core.Filter);exports.default=ColorMatrixFilter,ColorMatrixFilter.prototype.grayscale=ColorMatrixFilter.prototype.greyscale;

},{"../../core":55,"path":12}],141:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}exports.__esModule=!0;var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),_core=require("../../core"),core=_interopRequireWildcard(_core),_path=require("path"),DisplacementFilter=function(e){function r(t,n){_classCallCheck(this,r);var i=new core.Matrix;t.renderable=!1;var o=_possibleConstructorReturn(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return o.maskSprite=t,o.maskMatrix=i,o.uniforms.mapSampler=t._texture,o.uniforms.filterMatrix=i,o.uniforms.scale={x:1,y:1},null!==n&&void 0!==n||(n=20),o.scale=new core.Point(n,n),o}return _inherits(r,e),r.prototype.apply=function(e,r,t){var n=1/t.destinationFrame.width*(t.size.width/r.size.width);this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*n,this.uniforms.scale.y=this.scale.y*n,e.applyFilter(this,r,t)},_createClass(r,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e}}]),r}(core.Filter);exports.default=DisplacementFilter;

},{"../../core":55,"path":12}],142:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}exports.__esModule=!0;var _core=require("../../core"),core=_interopRequireWildcard(_core),_path=require("path"),FXAAFilter=function(e){function r(){return _classCallCheck(this,r),_possibleConstructorReturn(this,e.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return _inherits(r,e),r}(core.Filter);exports.default=FXAAFilter;

},{"../../core":55,"path":12}],143:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _FXAAFilter=require("./fxaa/FXAAFilter");Object.defineProperty(exports,"FXAAFilter",{enumerable:!0,get:function(){return _interopRequireDefault(_FXAAFilter).default}});var _NoiseFilter=require("./noise/NoiseFilter");Object.defineProperty(exports,"NoiseFilter",{enumerable:!0,get:function(){return _interopRequireDefault(_NoiseFilter).default}});var _DisplacementFilter=require("./displacement/DisplacementFilter");Object.defineProperty(exports,"DisplacementFilter",{enumerable:!0,get:function(){return _interopRequireDefault(_DisplacementFilter).default}});var _BlurFilter=require("./blur/BlurFilter");Object.defineProperty(exports,"BlurFilter",{enumerable:!0,get:function(){return _interopRequireDefault(_BlurFilter).default}});var _BlurXFilter=require("./blur/BlurXFilter");Object.defineProperty(exports,"BlurXFilter",{enumerable:!0,get:function(){return _interopRequireDefault(_BlurXFilter).default}});var _BlurYFilter=require("./blur/BlurYFilter");Object.defineProperty(exports,"BlurYFilter",{enumerable:!0,get:function(){return _interopRequireDefault(_BlurYFilter).default}});var _ColorMatrixFilter=require("./colormatrix/ColorMatrixFilter");Object.defineProperty(exports,"ColorMatrixFilter",{enumerable:!0,get:function(){return _interopRequireDefault(_ColorMatrixFilter).default}});var _AlphaFilter=require("./alpha/AlphaFilter");Object.defineProperty(exports,"AlphaFilter",{enumerable:!0,get:function(){return _interopRequireDefault(_AlphaFilter).default}});

},{"./alpha/AlphaFilter":133,"./blur/BlurFilter":134,"./blur/BlurXFilter":135,"./blur/BlurYFilter":136,"./colormatrix/ColorMatrixFilter":140,"./displacement/DisplacementFilter":141,"./fxaa/FXAAFilter":142,"./noise/NoiseFilter":144}],144:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}exports.__esModule=!0;var _createClass=function(){function e(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,n,o){return n&&e(r.prototype,n),o&&e(r,o),r}}(),_core=require("../../core"),core=_interopRequireWildcard(_core),_path=require("path"),NoiseFilter=function(e){function r(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();_classCallCheck(this,r);var t=_possibleConstructorReturn(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return t.noise=n,t.seed=o,t}return _inherits(r,e),_createClass(r,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e}}]),r}(core.Filter);exports.default=NoiseFilter;

},{"../../core":55,"path":12}],145:[function(require,module,exports){
(function (global){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.loader=exports.prepare=exports.particles=exports.mesh=exports.loaders=exports.interaction=exports.filters=exports.extras=exports.extract=exports.accessibility=void 0;var _polyfill=require("./polyfill");Object.keys(_polyfill).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _polyfill[e]}})});var _core=require("./core");Object.keys(_core).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _core[e]}})});var _deprecation=require("./deprecation"),_deprecation2=_interopRequireDefault(_deprecation),_accessibility=require("./accessibility"),accessibility=_interopRequireWildcard(_accessibility),_extract=require("./extract"),extract=_interopRequireWildcard(_extract),_extras=require("./extras"),extras=_interopRequireWildcard(_extras),_filters=require("./filters"),filters=_interopRequireWildcard(_filters),_interaction=require("./interaction"),interaction=_interopRequireWildcard(_interaction),_loaders=require("./loaders"),loaders=_interopRequireWildcard(_loaders),_mesh=require("./mesh"),mesh=_interopRequireWildcard(_mesh),_particles=require("./particles"),particles=_interopRequireWildcard(_particles),_prepare=require("./prepare"),prepare=_interopRequireWildcard(_prepare);_core.utils.mixins.performMixins();var loader=loaders.shared||null;exports.accessibility=accessibility,exports.extract=extract,exports.extras=extras,exports.filters=filters,exports.interaction=interaction,exports.loaders=loaders,exports.mesh=mesh,exports.particles=particles,exports.prepare=prepare,exports.loader=loader,"function"==typeof _deprecation2.default&&(0,_deprecation2.default)(exports),global.PIXI=exports;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./accessibility":32,"./core":55,"./deprecation":121,"./extract":123,"./extras":131,"./filters":143,"./interaction":150,"./loaders":153,"./mesh":162,"./particles":165,"./polyfill":171,"./prepare":175}],146:[function(require,module,exports){
"use strict";function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var i={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e]);return i.default=t,i}function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _createClass=function(){function t(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(i,e,r){return e&&t(i.prototype,e),r&&t(i,r),i}}(),_core=require("../core"),core=_interopRequireWildcard(_core),InteractionData=function(){function t(){_classCallCheck(this,t),this.global=new core.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return t.prototype.getLocalPosition=function(t,i,e){return t.worldTransform.applyInverse(e||this.global,i)},t.prototype._copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=t.buttons,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},t.prototype._reset=function(){this.isPrimary=!1},_createClass(t,[{key:"pointerId",get:function(){return this.identifier}}]),t}();exports.default=InteractionData;

},{"../core":55}],147:[function(require,module,exports){
"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var InteractionEvent=function(){function t(){_classCallCheck(this,t),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0},t.prototype._reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},t}();exports.default=InteractionEvent;

},{}],148:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_core=require("../core"),core=_interopRequireWildcard(_core),_InteractionData=require("./InteractionData"),_InteractionData2=_interopRequireDefault(_InteractionData),_InteractionEvent=require("./InteractionEvent"),_InteractionEvent2=_interopRequireDefault(_InteractionEvent),_InteractionTrackingData=require("./InteractionTrackingData"),_InteractionTrackingData2=_interopRequireDefault(_InteractionTrackingData),_eventemitter=require("eventemitter3"),_eventemitter2=_interopRequireDefault(_eventemitter),_interactiveTarget=require("./interactiveTarget"),_interactiveTarget2=_interopRequireDefault(_interactiveTarget);core.utils.mixins.delayMixin(core.DisplayObject.prototype,_interactiveTarget2.default);var MOUSE_POINTER_ID="MOUSE",hitTestEvent={target:null,data:{global:null}},InteractionManager=function(t){function e(n,i){_classCallCheck(this,e);var o=_possibleConstructorReturn(this,t.call(this));return i=i||{},o.renderer=n,o.autoPreventDefault=void 0===i.autoPreventDefault||i.autoPreventDefault,o.interactionFrequency=i.interactionFrequency||10,o.mouse=new _InteractionData2.default,o.mouse.identifier=MOUSE_POINTER_ID,o.mouse.global.set(-999999),o.activeInteractionData={},o.activeInteractionData[MOUSE_POINTER_ID]=o.mouse,o.interactionDataPool=[],o.eventData=new _InteractionEvent2.default,o.interactionDOMElement=null,o.moveWhenInside=!1,o.eventsAdded=!1,o.mouseOverRenderer=!1,o.supportsTouchEvents="ontouchstart"in window,o.supportsPointerEvents=!!window.PointerEvent,o.onPointerUp=o.onPointerUp.bind(o),o.processPointerUp=o.processPointerUp.bind(o),o.onPointerCancel=o.onPointerCancel.bind(o),o.processPointerCancel=o.processPointerCancel.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.processPointerDown=o.processPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.processPointerMove=o.processPointerMove.bind(o),o.onPointerOut=o.onPointerOut.bind(o),o.processPointerOverOut=o.processPointerOverOut.bind(o),o.onPointerOver=o.onPointerOver.bind(o),o.cursorStyles={default:"inherit",pointer:"pointer"},o.currentCursorMode=null,o.cursor=null,o._tempPoint=new core.Point,o.resolution=1,o.setTargetElement(o.renderer.view,o.renderer.resolution),o}return _inherits(e,t),e.prototype.hitTest=function(t,e){return hitTestEvent.target=null,hitTestEvent.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(hitTestEvent,e,null,!0),hitTestEvent.target},e.prototype.setTargetElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(core.ticker.shared.add(this.update,this,core.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(core.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{this.cursor=null;for(var e in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var n=this.activeInteractionData[e];if(n.originalEvent&&"touch"!==n.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,n.originalEvent,n);this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(void 0===e?"undefined":_typeof(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,n){n.stopped||(n.currentTarget=t,n.type=e,t.emit(e,n),t[e]&&t[e](n))},e.prototype.mapPositionToPoint=function(t,e,n){var i=void 0;i=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var o=navigator.isCocoonJS?this.resolution:1/this.resolution;t.x=(e-i.left)*(this.interactionDOMElement.width/i.width)*o,t.y=(n-i.top)*(this.interactionDOMElement.height/i.height)*o},e.prototype.processInteractive=function(t,e,n,i,o){if(!e||!e.visible)return!1;var r=t.data.global,s=!1,a=o=e.interactive||o;if(e.hitArea?a=!1:i&&e._mask&&(e._mask.containsPoint(r)||(i=!1)),e.interactiveChildren&&e.children)for(var c=e.children,h=c.length-1;h>=0;h--){var p=c[h],u=this.processInteractive(t,p,n,i,a);if(u){if(!p.parent)continue;a=!1,u&&(t.target&&(i=!1),s=!0)}}return o&&(i&&!t.target&&(e.hitArea?(e.worldTransform.applyInverse(r,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(s=!0)):e.containsPoint&&e.containsPoint(r)&&(s=!0)),e.interactive&&(s&&!t.target&&(t.target=e),n&&n(t,e,!!s))),s},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault();for(var n=e.length,i=0;i<n;i++){var o=e[i],r=this.getInteractionDataForPointerId(o),s=this.configureInteractionEventForDOMEvent(this.eventData,o,r);if(s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===o.pointerType)this.emit("touchstart",s);else if("mouse"===o.pointerType||"pen"===o.pointerType){var a=2===o.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,n){var i=t.data,o=t.data.identifier;if(n)if(e.trackedPointers[o]||(e.trackedPointers[o]=new _InteractionTrackingData2.default(o)),this.dispatchEvent(e,"pointerdown",t),"touch"===i.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===i.pointerType||"pen"===i.pointerType){var r=2===i.button;r?e.trackedPointers[o].rightDown=!0:e.trackedPointers[o].leftDown=!0,this.dispatchEvent(e,r?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,n){for(var i=this.normalizeToPointerData(t),o=i.length,r=t.target!==this.interactionDOMElement?"outside":"",s=0;s<o;s++){var a=i[s],c=this.getInteractionDataForPointerId(a),h=this.configureInteractionEventForDOMEvent(this.eventData,a,c);if(h.data.originalEvent=t,this.processInteractive(h,this.renderer._lastObjectRendered,n,e||!r),this.emit(e?"pointercancel":"pointerup"+r,h),"mouse"===a.pointerType||"pen"===a.pointerType){var p=2===a.button;this.emit(p?"rightup"+r:"mouseup"+r,h)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+r,h),this.releaseInteractionDataForPointerId(a.pointerId,c))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var n=t.data,i=t.data.identifier;void 0!==e.trackedPointers[i]&&(delete e.trackedPointers[i],this.dispatchEvent(e,"pointercancel",t),"touch"===n.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,n){var i=t.data,o=t.data.identifier,r=e.trackedPointers[o],s="touch"===i.pointerType;if("mouse"===i.pointerType||"pen"===i.pointerType){var a=2===i.button,c=_InteractionTrackingData2.default.FLAGS,h=a?c.RIGHT_DOWN:c.LEFT_DOWN,p=void 0!==r&&r.flags&h;n?(this.dispatchEvent(e,a?"rightup":"mouseup",t),p&&this.dispatchEvent(e,a?"rightclick":"click",t)):p&&this.dispatchEvent(e,a?"rightupoutside":"mouseupoutside",t),r&&(a?r.rightDown=!1:r.leftDown=!1)}n?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),r&&(this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),r.over=!1))):r&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),r&&r.none&&delete e.trackedPointers[o]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"===e[0].pointerType&&(this.didMove=!0,this.cursor=null);for(var n=e.length,i=0;i<n;i++){var o=e[i],r=this.getInteractionDataForPointerId(o),s=this.configureInteractionEventForDOMEvent(this.eventData,o,r);s.data.originalEvent=t;var a="touch"!==o.pointerType||this.moveWhenInside;this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,a),this.emit("pointermove",s),"touch"===o.pointerType&&this.emit("touchmove",s),"mouse"!==o.pointerType&&"pen"!==o.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,n){var i=t.data,o="touch"===i.pointerType,r="mouse"===i.pointerType||"pen"===i.pointerType;r&&this.processPointerOverOut(t,e,n),this.moveWhenInside&&!n||(this.dispatchEvent(e,"pointermove",t),o&&this.dispatchEvent(e,"touchmove",t),r&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(e),i=this.configureInteractionEventForDOMEvent(this.eventData,e,n);i.data.originalEvent=e,this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",i),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",i):this.releaseInteractionDataForPointerId(n.identifier)}},e.prototype.processPointerOverOut=function(t,e,n){var i=t.data,o=t.data.identifier,r="mouse"===i.pointerType||"pen"===i.pointerType,s=e.trackedPointers[o];n&&!s&&(s=e.trackedPointers[o]=new _InteractionTrackingData2.default(o)),void 0!==s&&(n&&this.mouseOverRenderer?(s.over||(s.over=!0,this.dispatchEvent(e,"pointerover",t),r&&this.dispatchEvent(e,"mouseover",t)),r&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),r&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[o]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],n=this.getInteractionDataForPointerId(e),i=this.configureInteractionEventForDOMEvent(this.eventData,e,n);i.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",i),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",i)},e.prototype.getInteractionDataForPointerId=function(t){var e=t.pointerId,n=void 0;return e===MOUSE_POINTER_ID||"mouse"===t.pointerType?n=this.mouse:this.activeInteractionData[e]?n=this.activeInteractionData[e]:((n=this.interactionDataPool.pop()||new _InteractionData2.default).identifier=e,this.activeInteractionData[e]=n),n._copyEvent(t),n},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e._reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,n){return t.data=n,this.mapPositionToPoint(n.global,e.clientX,e.clientY),navigator.isCocoonJS&&"touch"===e.pointerType&&(n.global.x=n.global.x/this.resolution,n.global.y=n.global.y/this.resolution),"touch"===e.pointerType&&(e.globalX=n.global.x,e.globalY=n.global.y),n.originalEvent=e,t._reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var n=0,i=t.changedTouches.length;n<i;n++){var o=t.changedTouches[n];void 0===o.button&&(o.button=t.touches.length?1:0),void 0===o.buttons&&(o.buttons=t.touches.length?1:0),void 0===o.isPrimary&&(o.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===o.width&&(o.width=o.radiusX||1),void 0===o.height&&(o.height=o.radiusY||1),void 0===o.tiltX&&(o.tiltX=0),void 0===o.tiltY&&(o.tiltY=0),void 0===o.pointerType&&(o.pointerType="touch"),void 0===o.pointerId&&(o.pointerId=o.identifier||0),void 0===o.pressure&&(o.pressure=o.force||.5),o.twist=0,o.tangentialPressure=0,void 0===o.layerX&&(o.layerX=o.offsetX=o.clientX),void 0===o.layerY&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,e.push(o)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent?e.push(t):(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=MOUSE_POINTER_ID),void 0===t.pressure&&(t.pressure=.5),t.twist=0,t.tangentialPressure=0,t.isNormalized=!0,e.push(t));return e},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},e}(_eventemitter2.default);exports.default=InteractionManager,core.WebGLRenderer.registerPlugin("interaction",InteractionManager),core.CanvasRenderer.registerPlugin("interaction",InteractionManager);

},{"../core":55,"./InteractionData":146,"./InteractionEvent":147,"./InteractionTrackingData":149,"./interactiveTarget":151,"eventemitter3":3}],149:[function(require,module,exports){
"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _createClass=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),InteractionTrackingData=function(){function t(n){_classCallCheck(this,t),this._pointerId=n,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,n){this._flags=n?this._flags|t:this._flags&~t},_createClass(t,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]),t}();exports.default=InteractionTrackingData,InteractionTrackingData.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4});

},{}],150:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _InteractionData=require("./InteractionData");Object.defineProperty(exports,"InteractionData",{enumerable:!0,get:function(){return _interopRequireDefault(_InteractionData).default}});var _InteractionManager=require("./InteractionManager");Object.defineProperty(exports,"InteractionManager",{enumerable:!0,get:function(){return _interopRequireDefault(_InteractionManager).default}});var _interactiveTarget=require("./interactiveTarget");Object.defineProperty(exports,"interactiveTarget",{enumerable:!0,get:function(){return _interopRequireDefault(_interactiveTarget).default}});var _InteractionTrackingData=require("./InteractionTrackingData");Object.defineProperty(exports,"InteractionTrackingData",{enumerable:!0,get:function(){return _interopRequireDefault(_InteractionTrackingData).default}});var _InteractionEvent=require("./InteractionEvent");Object.defineProperty(exports,"InteractionEvent",{enumerable:!0,get:function(){return _interopRequireDefault(_InteractionEvent).default}});

},{"./InteractionData":146,"./InteractionEvent":147,"./InteractionManager":148,"./InteractionTrackingData":149,"./interactiveTarget":151}],151:[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};

},{}],152:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function parse(e,r){e.bitmapFont=_extras.BitmapText.registerFont(e.data,r)}exports.__esModule=!0,exports.parse=parse,exports.default=function(){return function(e,r){if(e.data&&e.type===_resourceLoader.Resource.TYPE.XML)if(0!==e.data.getElementsByTagName("page").length&&0!==e.data.getElementsByTagName("info").length&&null!==e.data.getElementsByTagName("info")[0].getAttribute("face")){var t=e.isDataUrl?"":path.dirname(e.url);e.isDataUrl&&("."===t&&(t=""),this.baseUrl&&t&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(t+="/")),(t=t.replace(this.baseUrl,""))&&"/"!==t.charAt(t.length-1)&&(t+="/");var a=t+e.data.getElementsByTagName("page")[0].getAttribute("file");if(_core.utils.TextureCache[a])parse(e,_core.utils.TextureCache[a]),r();else{var s={crossOrigin:e.crossOrigin,loadType:_resourceLoader.Resource.LOAD_TYPE.IMAGE,metadata:e.metadata.imageMetadata,parentResource:e};this.add(e.name+"_image",a,s,function(t){parse(e,t.texture),r()})}}else r();else r()}};var _path=require("path"),path=_interopRequireWildcard(_path),_core=require("../core"),_resourceLoader=require("resource-loader"),_extras=require("../extras");

},{"../core":55,"../extras":131,"path":12,"resource-loader":190}],153:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.shared=exports.Resource=exports.textureParser=exports.getResourcePath=exports.spritesheetParser=exports.parseBitmapFontData=exports.bitmapFontParser=exports.Loader=void 0;var _bitmapFontParser=require("./bitmapFontParser");Object.defineProperty(exports,"bitmapFontParser",{enumerable:!0,get:function(){return _interopRequireDefault(_bitmapFontParser).default}}),Object.defineProperty(exports,"parseBitmapFontData",{enumerable:!0,get:function(){return _bitmapFontParser.parse}});var _spritesheetParser=require("./spritesheetParser");Object.defineProperty(exports,"spritesheetParser",{enumerable:!0,get:function(){return _interopRequireDefault(_spritesheetParser).default}}),Object.defineProperty(exports,"getResourcePath",{enumerable:!0,get:function(){return _spritesheetParser.getResourcePath}});var _textureParser=require("./textureParser");Object.defineProperty(exports,"textureParser",{enumerable:!0,get:function(){return _interopRequireDefault(_textureParser).default}});var _resourceLoader=require("resource-loader");Object.defineProperty(exports,"Resource",{enumerable:!0,get:function(){return _resourceLoader.Resource}});var _Application=require("../core/Application"),_Application2=_interopRequireDefault(_Application),_loader=require("./loader"),_loader2=_interopRequireDefault(_loader);exports.Loader=_loader2.default;var shared=new _loader2.default;shared.destroy=function(){},exports.shared=shared;var AppPrototype=_Application2.default.prototype;AppPrototype._loader=null,Object.defineProperty(AppPrototype,"loader",{get:function(){if(!this._loader){var e=this._options.sharedLoader;this._loader=e?shared:new _loader2.default}return this._loader}}),AppPrototype._parentDestroy=AppPrototype.destroy,AppPrototype.destroy=function(e){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(e)};

},{"../core/Application":33,"./bitmapFontParser":152,"./loader":154,"./spritesheetParser":155,"./textureParser":156,"resource-loader":190}],154:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}exports.__esModule=!0;var _resourceLoader=require("resource-loader"),_resourceLoader2=_interopRequireDefault(_resourceLoader),_blob=require("resource-loader/lib/middlewares/parsing/blob"),_eventemitter=require("eventemitter3"),_eventemitter2=_interopRequireDefault(_eventemitter),_textureParser=require("./textureParser"),_textureParser2=_interopRequireDefault(_textureParser),_spritesheetParser=require("./spritesheetParser"),_spritesheetParser2=_interopRequireDefault(_spritesheetParser),_bitmapFontParser=require("./bitmapFontParser"),_bitmapFontParser2=_interopRequireDefault(_bitmapFontParser),Loader=function(e){function r(t,o){_classCallCheck(this,r);var i=_possibleConstructorReturn(this,e.call(this,t,o));_eventemitter2.default.call(i);for(var n=0;n<r._pixiMiddleware.length;++n)i.use(r._pixiMiddleware[n]());return i.onStart.add(function(e){return i.emit("start",e)}),i.onProgress.add(function(e,r){return i.emit("progress",e,r)}),i.onError.add(function(e,r,t){return i.emit("error",e,r,t)}),i.onLoad.add(function(e,r){return i.emit("load",e,r)}),i.onComplete.add(function(e,r){return i.emit("complete",e,r)}),i}return _inherits(r,e),r.addPixiMiddleware=function(e){r._pixiMiddleware.push(e)},r.prototype.destroy=function(){this.removeAllListeners(),this.reset()},r}(_resourceLoader2.default);exports.default=Loader;for(var k in _eventemitter2.default.prototype)Loader.prototype[k]=_eventemitter2.default.prototype[k];Loader._pixiMiddleware=[_blob.blobMiddlewareFactory,_textureParser2.default,_spritesheetParser2.default,_bitmapFontParser2.default];var Resource=_resourceLoader2.default.Resource;Resource.setExtensionXhrType("fnt",Resource.XHR_RESPONSE_TYPE.DOCUMENT);

},{"./bitmapFontParser":152,"./spritesheetParser":155,"./textureParser":156,"eventemitter3":3,"resource-loader":190,"resource-loader/lib/middlewares/parsing/blob":191}],155:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getResourcePath(e,r){return e.isDataUrl?e.data.meta.image:_url2.default.resolve(e.url.replace(r,""),e.data.meta.image)}exports.__esModule=!0,exports.default=function(){return function(e,r){var t=e.name+"_image";if(e.data&&e.type===_resourceLoader.Resource.TYPE.JSON&&e.data.frames&&!this.resources[t]){var a={crossOrigin:e.crossOrigin,loadType:_resourceLoader.Resource.LOAD_TYPE.IMAGE,metadata:e.metadata.imageMetadata,parentResource:e},u=getResourcePath(e,this.baseUrl);this.add(t,u,a,function(t){var a=new _core.Spritesheet(t.texture.baseTexture,e.data,e.url);a.parse(function(){e.spritesheet=a,e.textures=a.textures,r()})})}else r()}},exports.getResourcePath=getResourcePath;var _resourceLoader=require("resource-loader"),_url=require("url"),_url2=_interopRequireDefault(_url),_core=require("../core");

},{"../core":55,"resource-loader":190,"url":198}],156:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.default=function(){return function(e,r){e.data&&e.type===_resourceLoader.Resource.TYPE.IMAGE&&(e.texture=_Texture2.default.fromLoader(e.data,e.url,e.name)),r()}};var _resourceLoader=require("resource-loader"),_Texture=require("../core/textures/Texture"),_Texture2=_interopRequireDefault(_Texture);

},{"../core/textures/Texture":105,"resource-loader":190}],157:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_core=require("../core"),core=_interopRequireWildcard(_core),_Texture=require("../core/textures/Texture"),_Texture2=_interopRequireDefault(_Texture),tempPoint=new core.Point,tempPolygon=new core.Polygon,Mesh=function(e){function t(r,n,o,i,s){_classCallCheck(this,t);var u=_possibleConstructorReturn(this,e.call(this));return u._texture=r||_Texture2.default.EMPTY,u.uvs=o||new Float32Array([0,0,1,0,1,1,0,1]),u.vertices=n||new Float32Array([0,0,100,0,100,100,0,100]),u.indices=i||new Uint16Array([0,1,3,2]),u.dirty=0,u.indexDirty=0,u.blendMode=core.BLEND_MODES.NORMAL,u.canvasPadding=0,u.drawMode=s||t.DRAW_MODES.TRIANGLE_MESH,u.shader=null,u.tintRgb=new Float32Array([1,1,1]),u._glDatas={},u._uvTransform=new core.TextureMatrix(u._texture),u.uploadUvTransform=!1,u.pluginName="mesh",u}return _inherits(t,e),t.prototype._renderWebGL=function(e){this.refresh(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._renderCanvas=function(e){this.refresh(),e.plugins[this.pluginName].render(this)},t.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},t.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},t.prototype.refresh=function(e){this._uvTransform.update(e)&&this._refresh()},t.prototype._refresh=function(){},t.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},t.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,tempPoint);for(var r=this.vertices,n=tempPolygon.points,o=this.indices,i=this.indices.length,s=this.drawMode===t.DRAW_MODES.TRIANGLES?3:1,u=0;u+2<i;u+=s){var a=2*o[u],c=2*o[u+1],l=2*o[u+2];if(n[0]=r[a],n[1]=r[a+1],n[2]=r[c],n[3]=r[c+1],n[4]=r[l],n[5]=r[l+1],tempPolygon.contains(tempPoint.x,tempPoint.y))return!0}return!1},_createClass(t,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return core.utils.rgb2hex(this.tintRgb)},set:function(e){this.tintRgb=core.utils.hex2rgb(e,this.tintRgb)}}]),t}(core.Container);exports.default=Mesh,Mesh.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1};

},{"../core":55,"../core/textures/Texture":105}],158:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),_Plane2=require("./Plane"),_Plane3=_interopRequireDefault(_Plane2),DEFAULT_BORDER_SIZE=10,NineSlicePlane=function(t){function e(i,r,h,o,n){_classCallCheck(this,e);var s=_possibleConstructorReturn(this,t.call(this,i,4,4));return s._origWidth=i.orig.width,s._origHeight=i.orig.height,s._width=s._origWidth,s._height=s._origHeight,s.leftWidth=void 0!==r?r:DEFAULT_BORDER_SIZE,s.rightWidth=void 0!==o?o:DEFAULT_BORDER_SIZE,s.topHeight=void 0!==h?h:DEFAULT_BORDER_SIZE,s.bottomHeight=void 0!==n?n:DEFAULT_BORDER_SIZE,s.refresh(!0),s}return _inherits(e,t),e.prototype.updateHorizontalVertices=function(){var t=this.vertices;t[9]=t[11]=t[13]=t[15]=this._topHeight,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices;t[2]=t[10]=t[18]=t[26]=this._leftWidth,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._renderCanvas=function(t){var e=t.context;e.globalAlpha=this.worldAlpha;var i=this.worldTransform,r=t.resolution;t.roundPixels?e.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r|0,i.ty*r|0):e.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r,i.ty*r);var h=this._texture.baseTexture,o=h.source,n=h.width*h.resolution,s=h.height*h.resolution;this.drawSegment(e,o,n,s,0,1,10,11),this.drawSegment(e,o,n,s,2,3,12,13),this.drawSegment(e,o,n,s,4,5,14,15),this.drawSegment(e,o,n,s,8,9,18,19),this.drawSegment(e,o,n,s,10,11,20,21),this.drawSegment(e,o,n,s,12,13,22,23),this.drawSegment(e,o,n,s,16,17,26,27),this.drawSegment(e,o,n,s,18,19,28,29),this.drawSegment(e,o,n,s,20,21,30,31)},e.prototype.drawSegment=function(t,e,i,r,h,o,n,s){var a=this.uvs,u=this.vertices,_=(a[n]-a[h])*i,l=(a[s]-a[o])*r,c=u[n]-u[h],f=u[s]-u[o];_<1&&(_=1),l<1&&(l=1),c<1&&(c=1),f<1&&(f=1),t.drawImage(e,a[h]*i,a[o]*r,_,l,u[h],u[o],c,f)},e.prototype._refresh=function(){t.prototype._refresh.call(this);var e=this.uvs,i=this._texture;this._origWidth=i.orig.width,this._origHeight=i.orig.height;var r=1/this._origWidth,h=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=r*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-r*this._rightWidth,e[9]=e[11]=e[13]=e[15]=h*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-h*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},_createClass(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._refresh()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()}}]),e}(_Plane3.default);exports.default=NineSlicePlane;

},{"./Plane":159}],159:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _Mesh2=require("./Mesh"),_Mesh3=_interopRequireDefault(_Mesh2),Plane=function(e){function t(r,s,i){_classCallCheck(this,t);var o=_possibleConstructorReturn(this,e.call(this,r));return o._ready=!0,o.verticesX=s||10,o.verticesY=i||10,o.drawMode=_Mesh3.default.DRAW_MODES.TRIANGLES,o.refresh(),o}return _inherits(t,e),t.prototype._refresh=function(){for(var e=this._texture,t=this.verticesX*this.verticesY,r=[],s=[],i=[],o=this.verticesX-1,n=this.verticesY-1,h=e.width/o,u=e.height/n,a=0;a<t;a++){var c=a%this.verticesX,l=a/this.verticesX|0;r.push(c*h,l*u),s.push(c/o,l/n)}for(var f=o*n,p=0;p<f;p++){var _=p%o,v=p/o|0,y=v*this.verticesX+_,d=v*this.verticesX+_+1,w=(v+1)*this.verticesX+_,b=(v+1)*this.verticesX+_+1;i.push(y,d,w),i.push(d,b,w)}this.vertices=new Float32Array(r),this.uvs=new Float32Array(s),this.colors=new Float32Array([]),this.indices=new Uint16Array(i),this.dirty++,this.indexDirty++,this.multiplyUvs()},t.prototype._onTextureUpdate=function(){_Mesh3.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},t}(_Mesh3.default);exports.default=Plane;

},{"./Mesh":157}],160:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _Mesh2=require("./Mesh"),_Mesh3=_interopRequireDefault(_Mesh2),Rope=function(t){function e(r,n){_classCallCheck(this,e);var s=_possibleConstructorReturn(this,t.call(this,r));return s.points=n,s.vertices=new Float32Array(4*n.length),s.uvs=new Float32Array(4*n.length),s.colors=new Float32Array(2*n.length),s.indices=new Uint16Array(2*n.length),s.autoUpdate=!0,s.refresh(),s}return _inherits(e,t),e.prototype._refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){this.vertices.length/4!==t.length&&(this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length));var e=this.uvs,r=this.indices,n=this.colors;e[0]=0,e[1]=0,e[2]=0,e[3]=1,n[0]=1,n[1]=1,r[0]=0,r[1]=1;for(var s=t.length,i=1;i<s;i++){var o=4*i,a=i/(s-1);e[o]=a,e[o+1]=0,e[o+2]=a,e[o+3]=1,n[o=2*i]=1,n[o+1]=1,r[o=2*i]=o,r[o+1]=o+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},e.prototype.refreshVertices=function(){var t=this.points;if(!(t.length<1))for(var e=t[0],r=void 0,n=0,s=0,i=this.vertices,o=t.length,a=0;a<o;a++){var h=t[a],l=4*a;s=-((r=a<t.length-1?t[a+1]:h).x-e.x),n=r.y-e.y;var u=10*(1-a/(o-1));u>1&&(u=1);var c=Math.sqrt(n*n+s*s),f=this._texture.height/2;n/=c,s/=c,n*=f,s*=f,i[l]=h.x+n,i[l+1]=h.y+s,i[l+2]=h.x-n,i[l+3]=h.y-s,e=h}},e.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},e}(_Mesh3.default);exports.default=Rope;

},{"./Mesh":157}],161:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _core=require("../../core"),core=_interopRequireWildcard(_core),_Mesh=require("../Mesh"),_Mesh2=_interopRequireDefault(_Mesh),MeshSpriteRenderer=function(){function e(r){_classCallCheck(this,e),this.renderer=r}return e.prototype.render=function(e){var r=this.renderer,t=r.context,n=e.worldTransform,i=r.resolution;r.roundPixels?t.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i|0,n.ty*i|0):t.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),r.setBlendMode(e.blendMode),e.drawMode===_Mesh2.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(e):this._renderTriangles(e)},e.prototype._renderTriangleMesh=function(e){for(var r=e.vertices.length/2,t=0;t<r-2;t++){var n=2*t;this._renderDrawTriangle(e,n,n+2,n+4)}},e.prototype._renderTriangles=function(e){for(var r=e.indices,t=r.length,n=0;n<t;n+=3){var i=2*r[n],o=2*r[n+1],a=2*r[n+2];this._renderDrawTriangle(e,i,o,a)}},e.prototype._renderDrawTriangle=function(e,r,t,n){var i=this.renderer.context,o=e.uvs,a=e.vertices,s=e._texture;if(s.valid){var d=s.baseTexture,l=d.source,h=d.width,c=d.height,u=void 0,f=void 0,v=void 0,_=void 0,p=void 0,g=void 0;if(e.uploadUvTransform){var M=e._uvTransform.mapCoord;u=(o[r]*M.a+o[r+1]*M.c+M.tx)*d.width,f=(o[t]*M.a+o[t+1]*M.c+M.tx)*d.width,v=(o[n]*M.a+o[n+1]*M.c+M.tx)*d.width,_=(o[r]*M.b+o[r+1]*M.d+M.ty)*d.height,p=(o[t]*M.b+o[t+1]*M.d+M.ty)*d.height,g=(o[n]*M.b+o[n+1]*M.d+M.ty)*d.height}else u=o[r]*d.width,f=o[t]*d.width,v=o[n]*d.width,_=o[r+1]*d.height,p=o[t+1]*d.height,g=o[n+1]*d.height;var T=a[r],w=a[t],y=a[n],m=a[r+1],x=a[t+1],b=a[n+1];if(e.canvasPadding>0){var P=e.canvasPadding/e.worldTransform.a,R=e.canvasPadding/e.worldTransform.d,q=(T+w+y)/3,C=(m+x+b)/3,D=T-q,S=m-C,E=Math.sqrt(D*D+S*S);T=q+D/E*(E+P),m=C+S/E*(E+R),S=x-C,w=q+(D=w-q)/(E=Math.sqrt(D*D+S*S))*(E+P),x=C+S/E*(E+R),S=b-C,y=q+(D=y-q)/(E=Math.sqrt(D*D+S*S))*(E+P),b=C+S/E*(E+R)}i.save(),i.beginPath(),i.moveTo(T,m),i.lineTo(w,x),i.lineTo(y,b),i.closePath(),i.clip();var F=u*p+_*v+f*g-p*v-_*f-u*g,O=T*p+_*y+w*g-p*y-_*w-T*g,W=u*w+T*v+f*y-w*v-T*f-u*y,k=u*p*y+_*w*v+T*f*g-T*p*v-_*f*y-u*w*g,A=m*p+_*b+x*g-p*b-_*x-m*g,B=u*x+m*v+f*b-x*v-m*f-u*b,I=u*p*b+_*x*v+m*f*g-m*p*v-_*f*b-u*x*g;i.transform(O/F,A/F,W/F,B/F,k/F,I/F),i.drawImage(l,0,0,h*d.resolution,c*d.resolution,0,0,h,c),i.restore(),this.renderer.invalidateBlendMode()}},e.prototype.renderMeshFlat=function(e){var r=this.renderer.context,t=e.vertices,n=t.length/2;r.beginPath();for(var i=1;i<n-2;++i){var o=2*i,a=t[o],s=t[o+1],d=t[o+2],l=t[o+3],h=t[o+4],c=t[o+5];r.moveTo(a,s),r.lineTo(d,l),r.lineTo(h,c)}r.fillStyle="#FF0000",r.fill(),r.closePath()},e.prototype.destroy=function(){this.renderer=null},e}();exports.default=MeshSpriteRenderer,core.CanvasRenderer.registerPlugin("mesh",MeshSpriteRenderer);

},{"../../core":55,"../Mesh":157}],162:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _Mesh=require("./Mesh");Object.defineProperty(exports,"Mesh",{enumerable:!0,get:function(){return _interopRequireDefault(_Mesh).default}});var _MeshRenderer=require("./webgl/MeshRenderer");Object.defineProperty(exports,"MeshRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(_MeshRenderer).default}});var _CanvasMeshRenderer=require("./canvas/CanvasMeshRenderer");Object.defineProperty(exports,"CanvasMeshRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(_CanvasMeshRenderer).default}});var _Plane=require("./Plane");Object.defineProperty(exports,"Plane",{enumerable:!0,get:function(){return _interopRequireDefault(_Plane).default}});var _NineSlicePlane=require("./NineSlicePlane");Object.defineProperty(exports,"NineSlicePlane",{enumerable:!0,get:function(){return _interopRequireDefault(_NineSlicePlane).default}});var _Rope=require("./Rope");Object.defineProperty(exports,"Rope",{enumerable:!0,get:function(){return _interopRequireDefault(_Rope).default}});

},{"./Mesh":157,"./NineSlicePlane":158,"./Plane":159,"./Rope":160,"./canvas/CanvasMeshRenderer":161,"./webgl/MeshRenderer":163}],163:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}exports.__esModule=!0;var _core=require("../../core"),core=_interopRequireWildcard(_core),_pixiGlCore=require("pixi-gl-core"),_pixiGlCore2=_interopRequireDefault(_pixiGlCore),_Mesh=require("../Mesh"),_Mesh2=_interopRequireDefault(_Mesh),_path=require("path"),matrixIdentity=core.Matrix.IDENTITY,MeshRenderer=function(e){function r(t){_classCallCheck(this,r);var o=_possibleConstructorReturn(this,e.call(this,t));return o.shader=null,o}return _inherits(r,e),r.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new core.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},r.prototype.render=function(e){var r=this.renderer,t=r.gl,o=e._texture;if(o.valid){var i=e._glDatas[r.CONTEXT_UID];i||(r.bindVao(null),(i={shader:this.shader,vertexBuffer:_pixiGlCore2.default.GLBuffer.createVertexBuffer(t,e.vertices,t.STREAM_DRAW),uvBuffer:_pixiGlCore2.default.GLBuffer.createVertexBuffer(t,e.uvs,t.STREAM_DRAW),indexBuffer:_pixiGlCore2.default.GLBuffer.createIndexBuffer(t,e.indices,t.STATIC_DRAW),vao:null,dirty:e.dirty,indexDirty:e.indexDirty}).vao=new _pixiGlCore2.default.VertexArrayObject(t).addIndex(i.indexBuffer).addAttribute(i.vertexBuffer,i.shader.attributes.aVertexPosition,t.FLOAT,!1,8,0).addAttribute(i.uvBuffer,i.shader.attributes.aTextureCoord,t.FLOAT,!1,8,0),e._glDatas[r.CONTEXT_UID]=i),r.bindVao(i.vao),e.dirty!==i.dirty&&(i.dirty=e.dirty,i.uvBuffer.upload(e.uvs)),e.indexDirty!==i.indexDirty&&(i.indexDirty=e.indexDirty,i.indexBuffer.upload(e.indices)),i.vertexBuffer.upload(e.vertices),r.bindShader(i.shader),i.shader.uniforms.uSampler=r.bindTexture(o),r.state.setBlendMode(core.utils.correctBlendMode(e.blendMode,o.baseTexture.premultipliedAlpha)),i.shader.uniforms.uTransform&&(e.uploadUvTransform?i.shader.uniforms.uTransform=e._uvTransform.mapCoord.toArray(!0):i.shader.uniforms.uTransform=matrixIdentity.toArray(!0)),i.shader.uniforms.translationMatrix=e.worldTransform.toArray(!0),i.shader.uniforms.uColor=core.utils.premultiplyRgba(e.tintRgb,e.worldAlpha,i.shader.uniforms.uColor,o.baseTexture.premultipliedAlpha);var n=e.drawMode===_Mesh2.default.DRAW_MODES.TRIANGLE_MESH?t.TRIANGLE_STRIP:t.TRIANGLES;i.vao.draw(n,e.indices.length,0)}},r}(core.ObjectRenderer);exports.default=MeshRenderer,core.WebGLRenderer.registerPlugin("mesh",MeshRenderer);

},{"../../core":55,"../Mesh":157,"path":12,"pixi-gl-core":19}],164:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),_core=require("../core"),core=_interopRequireWildcard(_core),_utils=require("../core/utils"),ParticleContainer=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,i=arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_classCallCheck(this,t);var s=_possibleConstructorReturn(this,e.call(this));return o>16384&&(o=16384),o>r&&(o=r),s._properties=[!1,!0,!1,!1,!1],s._maxSize=r,s._batchSize=o,s._glBuffers={},s._bufferToUpdate=0,s.interactiveChildren=!1,s.blendMode=core.BLEND_MODES.NORMAL,s.autoResize=n,s.roundPixels=!0,s.baseTexture=null,s.setProperties(i),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}return _inherits(t,e),t.prototype.setProperties=function(e){e&&(this._properties[0]="scale"in e?!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="alpha"in e||"tint"in e?!!e.alpha||!!e.tint:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},t.prototype.renderWebGL=function(e){var t=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return t.onChildrenChange(0)})),e.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},t.prototype.onChildrenChange=function(e){var t=Math.floor(e/this._batchSize);t<this._bufferToUpdate&&(this._bufferToUpdate=t)},t.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var t=e.context,r=this.worldTransform,i=!0,o=0,n=0,s=0,a=0;e.setBlendMode(this.blendMode),t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var l=0;l<this.children.length;++l){var h=this.children[l];if(h.visible){var u=h._texture.frame;if(t.globalAlpha=this.worldAlpha*h.alpha,h.rotation%(2*Math.PI)==0)i&&(t.setTransform(r.a,r.b,r.c,r.d,r.tx*e.resolution,r.ty*e.resolution),i=!1),o=h.anchor.x*(-u.width*h.scale.x)+h.position.x+.5,n=h.anchor.y*(-u.height*h.scale.y)+h.position.y+.5,s=u.width*h.scale.x,a=u.height*h.scale.y;else{i||(i=!0),h.displayObjectUpdateTransform();var p=h.worldTransform;e.roundPixels?t.setTransform(p.a,p.b,p.c,p.d,p.tx*e.resolution|0,p.ty*e.resolution|0):t.setTransform(p.a,p.b,p.c,p.d,p.tx*e.resolution,p.ty*e.resolution),o=h.anchor.x*-u.width+.5,n=h.anchor.y*-u.height+.5,s=u.width,a=u.height}var c=h._texture.baseTexture.resolution;t.drawImage(h._texture.baseTexture.source,u.x*c,u.y*c,u.width*c,u.height*c,o*e.resolution,n*e.resolution,s*e.resolution,a*e.resolution)}}}},t.prototype.destroy=function(t){if(e.prototype.destroy.call(this,t),this._buffers)for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._properties=null,this._buffers=null},_createClass(t,[{key:"tint",get:function(){return this._tint},set:function(e){this._tint=e,(0,_utils.hex2rgb)(e,this.tintRgb)}}]),t}(core.Container);exports.default=ParticleContainer;

},{"../core":55,"../core/utils":115}],165:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _ParticleContainer=require("./ParticleContainer");Object.defineProperty(exports,"ParticleContainer",{enumerable:!0,get:function(){return _interopRequireDefault(_ParticleContainer).default}});var _ParticleRenderer=require("./webgl/ParticleRenderer");Object.defineProperty(exports,"ParticleRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(_ParticleRenderer).default}});

},{"./ParticleContainer":164,"./webgl/ParticleRenderer":167}],166:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _pixiGlCore=require("pixi-gl-core"),_pixiGlCore2=_interopRequireDefault(_pixiGlCore),_createIndicesForQuads=require("../../core/utils/createIndicesForQuads"),_createIndicesForQuads2=_interopRequireDefault(_createIndicesForQuads),ParticleBuffer=function(){function t(i,e,s,a){_classCallCheck(this,t),this.gl=i,this.size=a,this.dynamicProperties=[],this.staticProperties=[];for(var r=0;r<e.length;++r){var n=e[r];n={attribute:n.attribute,size:n.size,uploadFunction:n.uploadFunction,unsignedByte:n.unsignedByte,offset:n.offset},s[r]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.gl,i=0;this.indices=(0,_createIndicesForQuads2.default)(this.size),this.indexBuffer=_pixiGlCore2.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.dynamicStride=0;for(var e=0;e<this.dynamicProperties.length;++e){var s=this.dynamicProperties[e];s.offset=i,i+=s.size,this.dynamicStride+=s.size}var a=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(a),this.dynamicDataUint32=new Uint32Array(a),this.dynamicBuffer=_pixiGlCore2.default.GLBuffer.createVertexBuffer(t,a,t.STREAM_DRAW);var r=0;this.staticStride=0;for(var n=0;n<this.staticProperties.length;++n){var u=this.staticProperties[n];u.offset=r,r+=u.size,this.staticStride+=u.size}var c=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(c),this.staticDataUint32=new Uint32Array(c),this.staticBuffer=_pixiGlCore2.default.GLBuffer.createVertexBuffer(t,c,t.STATIC_DRAW),this.vao=new _pixiGlCore2.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var f=0;f<this.dynamicProperties.length;++f){var o=this.dynamicProperties[f];o.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,o.attribute,t.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*o.offset):this.vao.addAttribute(this.dynamicBuffer,o.attribute,t.FLOAT,!1,4*this.dynamicStride,4*o.offset)}for(var d=0;d<this.staticProperties.length;++d){var h=this.staticProperties[d];h.unsignedByte?this.vao.addAttribute(this.staticBuffer,h.attribute,t.UNSIGNED_BYTE,!0,4*this.staticStride,4*h.offset):this.vao.addAttribute(this.staticBuffer,h.attribute,t.FLOAT,!1,4*this.staticStride,4*h.offset)}},t.prototype.uploadDynamic=function(t,i,e){for(var s=0;s<this.dynamicProperties.length;s++){var a=this.dynamicProperties[s];a.uploadFunction(t,i,e,a.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer.upload()},t.prototype.uploadStatic=function(t,i,e){for(var s=0;s<this.staticProperties.length;s++){var a=this.staticProperties[s];a.uploadFunction(t,i,e,a.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer.upload()},t.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},t}();exports.default=ParticleBuffer;

},{"../../core/utils/createIndicesForQuads":113,"pixi-gl-core":19}],167:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _core=require("../../core"),core=_interopRequireWildcard(_core),_ParticleShader=require("./ParticleShader"),_ParticleShader2=_interopRequireDefault(_ParticleShader),_ParticleBuffer=require("./ParticleBuffer"),_ParticleBuffer2=_interopRequireDefault(_ParticleBuffer),_utils=require("../../core/utils"),ParticleRenderer=function(e){function t(r){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,e.call(this,r));return i.shader=null,i.indexBuffer=null,i.properties=null,i.tempMatrix=new core.Matrix,i.CONTEXT_UID=0,i}return _inherits(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new _ParticleShader2.default(e),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},t.prototype.start=function(){this.renderer.bindShader(this.shader)},t.prototype.render=function(e){var t=e.children,r=e._maxSize,i=e._batchSize,o=this.renderer,a=t.length;if(0!==a){a>r&&(a=r);var n=e._glBuffers[o.CONTEXT_UID];n||(n=e._glBuffers[o.CONTEXT_UID]=this.generateBuffers(e));var u=t[0]._texture.baseTexture;this.renderer.setBlendMode(core.utils.correctBlendMode(e.blendMode,u.premultipliedAlpha));var s=o.gl,l=e.worldTransform.copy(this.tempMatrix);l.prepend(o._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=l.toArray(!0),this.shader.uniforms.uColor=core.utils.premultiplyRgba(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,u.premultipliedAlpha),this.shader.uniforms.uSampler=o.bindTexture(u);for(var p=0,f=0;p<a;p+=i,f+=1){var h=a-p;if(h>i&&(h=i),f>=n.length){if(!e.autoResize)break;n.push(this._generateOneMoreBuffer(e))}var c=n[f];c.uploadDynamic(t,p,h),e._bufferToUpdate===f&&(c.uploadStatic(t,p,h),e._bufferToUpdate=f+1),o.bindVao(c.vao),c.vao.draw(s.TRIANGLES,6*h)}}},t.prototype.generateBuffers=function(e){for(var t=this.renderer.gl,r=[],i=e._maxSize,o=e._batchSize,a=e._properties,n=0;n<i;n+=o)r.push(new _ParticleBuffer2.default(t,this.properties,a,o));return r},t.prototype._generateOneMoreBuffer=function(e){var t=this.renderer.gl,r=e._batchSize,i=e._properties;return new _ParticleBuffer2.default(t,this.properties,i,r)},t.prototype.uploadVertices=function(e,t,r,i,o,a){for(var n=0,u=0,s=0,l=0,p=0;p<r;++p){var f=e[t+p],h=f._texture,c=f.scale.x,d=f.scale.y,_=h.trim,y=h.orig;_?(n=(u=_.x-f.anchor.x*y.width)+_.width,s=(l=_.y-f.anchor.y*y.height)+_.height):(n=y.width*(1-f.anchor.x),u=y.width*-f.anchor.x,s=y.height*(1-f.anchor.y),l=y.height*-f.anchor.y),i[a]=u*c,i[a+1]=l*d,i[a+o]=n*c,i[a+o+1]=l*d,i[a+2*o]=n*c,i[a+2*o+1]=s*d,i[a+3*o]=u*c,i[a+3*o+1]=s*d,a+=4*o}},t.prototype.uploadPosition=function(e,t,r,i,o,a){for(var n=0;n<r;n++){var u=e[t+n].position;i[a]=u.x,i[a+1]=u.y,i[a+o]=u.x,i[a+o+1]=u.y,i[a+2*o]=u.x,i[a+2*o+1]=u.y,i[a+3*o]=u.x,i[a+3*o+1]=u.y,a+=4*o}},t.prototype.uploadRotation=function(e,t,r,i,o,a){for(var n=0;n<r;n++){var u=e[t+n].rotation;i[a]=u,i[a+o]=u,i[a+2*o]=u,i[a+3*o]=u,a+=4*o}},t.prototype.uploadUvs=function(e,t,r,i,o,a){for(var n=0;n<r;++n){var u=e[t+n]._texture._uvs;u?(i[a]=u.x0,i[a+1]=u.y0,i[a+o]=u.x1,i[a+o+1]=u.y1,i[a+2*o]=u.x2,i[a+2*o+1]=u.y2,i[a+3*o]=u.x3,i[a+3*o+1]=u.y3,a+=4*o):(i[a]=0,i[a+1]=0,i[a+o]=0,i[a+o+1]=0,i[a+2*o]=0,i[a+2*o+1]=0,i[a+3*o]=0,i[a+3*o+1]=0,a+=4*o)}},t.prototype.uploadTint=function(e,t,r,i,o,a){for(var n=0;n<r;++n){var u=e[t+n],s=u._texture.baseTexture.premultipliedAlpha,l=u.alpha,p=l<1&&s?(0,_utils.premultiplyTint)(u._tintRGB,l):u._tintRGB+(255*l<<24);i[a]=p,i[a+o]=p,i[a+2*o]=p,i[a+3*o]=p,a+=4*o}},t.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),e.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},t}(core.ObjectRenderer);exports.default=ParticleRenderer,core.WebGLRenderer.registerPlugin("particle",ParticleRenderer);

},{"../../core":55,"../../core/utils":115,"./ParticleBuffer":166,"./ParticleShader":168}],168:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?e:o}function _inherits(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o)}exports.__esModule=!0;var _Shader2=require("../../core/Shader"),_Shader3=_interopRequireDefault(_Shader2),ParticleShader=function(e){function o(t){return _classCallCheck(this,o),_possibleConstructorReturn(this,e.call(this,t,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join("\n")))}return _inherits(o,e),o}(_Shader3.default);exports.default=ParticleShader;

},{"../../core/Shader":34}],169:[function(require,module,exports){
"use strict";Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1});

},{}],170:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _objectAssign=require("object-assign"),_objectAssign2=_interopRequireDefault(_objectAssign);Object.assign||(Object.assign=_objectAssign2.default);

},{"object-assign":10}],171:[function(require,module,exports){
"use strict";require("./Object.assign"),require("./requestAnimationFrame"),require("./Math.sign"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array);

},{"./Math.sign":169,"./Object.assign":170,"./requestAnimationFrame":172}],172:[function(require,module,exports){
(function (global){
"use strict";var ONE_FRAME_TIME=16;if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!global.performance||!global.performance.now){var startTime=Date.now();global.performance||(global.performance={}),global.performance.now=function(){return Date.now()-startTime}}for(var lastTime=Date.now(),vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&!global.requestAnimationFrame;++x){var p=vendors[x];global.requestAnimationFrame=global[p+"RequestAnimationFrame"],global.cancelAnimationFrame=global[p+"CancelAnimationFrame"]||global[p+"CancelRequestAnimationFrame"]}global.requestAnimationFrame||(global.requestAnimationFrame=function(e){if("function"!=typeof e)throw new TypeError(e+"is not a function");var a=Date.now(),n=ONE_FRAME_TIME+lastTime-a;return n<0&&(n=0),lastTime=a,setTimeout(function(){lastTime=Date.now(),e(performance.now())},n)}),global.cancelAnimationFrame||(global.cancelAnimationFrame=function(e){return clearTimeout(e)});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],173:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function findMultipleBaseTextures(e,t){var i=!1;if(e&&e._textures&&e._textures.length)for(var r=0;r<e._textures.length;r++)if(e._textures[r]instanceof core.Texture){var o=e._textures[r].baseTexture;-1===t.indexOf(o)&&(t.push(o),i=!0)}return i}function findBaseTexture(e,t){return e instanceof core.BaseTexture&&(-1===t.indexOf(e)&&t.push(e),!0)}function findTexture(e,t){if(e._texture&&e._texture instanceof core.Texture){var i=e._texture.baseTexture;return-1===t.indexOf(i)&&t.push(i),!0}return!1}function drawText(e,t){return t instanceof core.Text&&(t.updateText(!0),!0)}function calculateTextStyle(e,t){if(t instanceof core.TextStyle){var i=t.toFontString();return core.TextMetrics.measureFont(i),!0}return!1}function findText(e,t){if(e instanceof core.Text){-1===t.indexOf(e.style)&&t.push(e.style),-1===t.indexOf(e)&&t.push(e);var i=e._texture.baseTexture;return-1===t.indexOf(i)&&t.push(i),!0}return!1}function findTextStyle(e,t){return e instanceof core.TextStyle&&(-1===t.indexOf(e)&&t.push(e),!0)}exports.__esModule=!0;var _core=require("../core"),core=_interopRequireWildcard(_core),_CountLimiter=require("./limiters/CountLimiter"),_CountLimiter2=_interopRequireDefault(_CountLimiter),SharedTicker=core.ticker.shared;core.settings.UPLOADS_PER_FRAME=4;var BasePrepare=function(){function e(t){var i=this;_classCallCheck(this,e),this.limiter=new _CountLimiter2.default(core.settings.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){i.queue&&i.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}return e.prototype.upload=function(e,t){"function"==typeof e&&(t=e,e=null),e&&this.add(e),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,SharedTicker.addOnce(this.tick,this,core.UPDATE_PRIORITY.UTILITY))):t&&t()},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed)for(var i=0,r=this.uploadHooks.length;i<r;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)SharedTicker.addOnce(this.tick,this,core.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);this.completes.length=0;for(var n=0,s=o.length;n<s;n++)o[n]()}},e.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},e.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},e.prototype.add=function(e){for(var t=0,i=this.addHooks.length;t<i&&!this.addHooks[t](e,this.queue);t++);if(e instanceof core.Container)for(var r=e.children.length-1;r>=0;r--)this.add(e.children[r]);return this},e.prototype.destroy=function(){this.ticking&&SharedTicker.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();exports.default=BasePrepare;

},{"../core":55,"./limiters/CountLimiter":176}],174:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function uploadBaseTextures(e,t){if(t instanceof core.BaseTexture){var r=t.source,a=0===r.width?e.canvas.width:Math.min(e.canvas.width,r.width),n=0===r.height?e.canvas.height:Math.min(e.canvas.height,r.height);return e.ctx.drawImage(r,0,0,a,n,0,0,e.canvas.width,e.canvas.height),!0}return!1}exports.__esModule=!0;var _core=require("../../core"),core=_interopRequireWildcard(_core),_BasePrepare2=require("../BasePrepare"),_BasePrepare3=_interopRequireDefault(_BasePrepare2),CANVAS_START_SIZE=16,CanvasPrepare=function(e){function t(r){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,e.call(this,r));return a.uploadHookHelper=a,a.canvas=document.createElement("canvas"),a.canvas.width=CANVAS_START_SIZE,a.canvas.height=CANVAS_START_SIZE,a.ctx=a.canvas.getContext("2d"),a.registerUploadHook(uploadBaseTextures),a}return _inherits(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.ctx=null,this.canvas=null},t}(_BasePrepare3.default);exports.default=CanvasPrepare,core.CanvasRenderer.registerPlugin("prepare",CanvasPrepare);

},{"../../core":55,"../BasePrepare":173}],175:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _WebGLPrepare=require("./webgl/WebGLPrepare");Object.defineProperty(exports,"webgl",{enumerable:!0,get:function(){return _interopRequireDefault(_WebGLPrepare).default}});var _CanvasPrepare=require("./canvas/CanvasPrepare");Object.defineProperty(exports,"canvas",{enumerable:!0,get:function(){return _interopRequireDefault(_CanvasPrepare).default}});var _BasePrepare=require("./BasePrepare");Object.defineProperty(exports,"BasePrepare",{enumerable:!0,get:function(){return _interopRequireDefault(_BasePrepare).default}});var _CountLimiter=require("./limiters/CountLimiter");Object.defineProperty(exports,"CountLimiter",{enumerable:!0,get:function(){return _interopRequireDefault(_CountLimiter).default}});var _TimeLimiter=require("./limiters/TimeLimiter");Object.defineProperty(exports,"TimeLimiter",{enumerable:!0,get:function(){return _interopRequireDefault(_TimeLimiter).default}});

},{"./BasePrepare":173,"./canvas/CanvasPrepare":174,"./limiters/CountLimiter":176,"./limiters/TimeLimiter":177,"./webgl/WebGLPrepare":178}],176:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var CountLimiter=function(){function t(e){_classCallCheck(this,t),this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();exports.default=CountLimiter;

},{}],177:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var TimeLimiter=function(){function t(e){_classCallCheck(this,t),this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();exports.default=TimeLimiter;

},{}],178:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}function uploadBaseTextures(e,r){return r instanceof core.BaseTexture&&(r._glTextures[e.CONTEXT_UID]||e.textureManager.updateTexture(r),!0)}function uploadGraphics(e,r){return r instanceof core.Graphics&&((r.dirty||r.clearDirty||!r._webGL[e.plugins.graphics.CONTEXT_UID])&&e.plugins.graphics.updateGraphics(r),!0)}function findGraphics(e,r){return e instanceof core.Graphics&&(r.push(e),!0)}exports.__esModule=!0;var _core=require("../../core"),core=_interopRequireWildcard(_core),_BasePrepare2=require("../BasePrepare"),_BasePrepare3=_interopRequireDefault(_BasePrepare2),WebGLPrepare=function(e){function r(t){_classCallCheck(this,r);var o=_possibleConstructorReturn(this,e.call(this,t));return o.uploadHookHelper=o.renderer,o.registerFindHook(findGraphics),o.registerUploadHook(uploadBaseTextures),o.registerUploadHook(uploadGraphics),o}return _inherits(r,e),r}(_BasePrepare3.default);exports.default=WebGLPrepare,core.WebGLRenderer.registerPlugin("prepare",WebGLPrepare);

},{"../../core":55,"../BasePrepare":173}],179:[function(require,module,exports){
function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var cachedSetTimeout,cachedClearTimeout,process=module.exports={};!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

},{}],180:[function(require,module,exports){
(function (global){
!function(e){function o(e){throw new RangeError(O[e])}function n(e,o){for(var n=e.length,t=[];n--;)t[n]=o(e[n]);return t}function t(e,o){var t=e.split("@"),r="";t.length>1&&(r=t[0]+"@",e=t[1]);return r+n((e=e.replace(F,".")).split("."),o).join(".")}function r(e){for(var o,n,t=[],r=0,u=e.length;r<u;)(o=e.charCodeAt(r++))>=55296&&o<=56319&&r<u?56320==(64512&(n=e.charCodeAt(r++)))?t.push(((1023&o)<<10)+(1023&n)+65536):(t.push(o),r--):t.push(o);return t}function u(e){return n(e,function(e){var o="";return e>65535&&(o+=L((e-=65536)>>>10&1023|55296),e=56320|1023&e),o+=L(e)}).join("")}function i(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:w}function f(e,o){return e+22+75*(e<26)-((0!=o)<<5)}function c(e,o,n){var t=0;for(e=n?T(e/C):e>>1,e+=T(e/o);e>S*b>>1;t+=w)e=T(e/S);return T(t+(S+1)*e/(e+y))}function l(e){var n,t,r,f,l,s,d,p,a,h,v=[],y=e.length,C=0,I=j,E=m;for((t=e.lastIndexOf(A))<0&&(t=0),r=0;r<t;++r)e.charCodeAt(r)>=128&&o("not-basic"),v.push(e.charCodeAt(r));for(f=t>0?t+1:0;f<y;){for(l=C,s=1,d=w;f>=y&&o("invalid-input"),((p=i(e.charCodeAt(f++)))>=w||p>T((g-C)/s))&&o("overflow"),C+=p*s,a=d<=E?x:d>=E+b?b:d-E,!(p<a);d+=w)s>T(g/(h=w-a))&&o("overflow"),s*=h;E=c(C-l,n=v.length+1,0==l),T(C/n)>g-I&&o("overflow"),I+=T(C/n),C%=n,v.splice(C++,0,I)}return u(v)}function s(e){var n,t,u,i,l,s,d,p,a,h,v,y,C,I,E,F=[];for(y=(e=r(e)).length,n=j,t=0,l=m,s=0;s<y;++s)(v=e[s])<128&&F.push(L(v));for(u=i=F.length,i&&F.push(A);u<y;){for(d=g,s=0;s<y;++s)(v=e[s])>=n&&v<d&&(d=v);for(d-n>T((g-t)/(C=u+1))&&o("overflow"),t+=(d-n)*C,n=d,s=0;s<y;++s)if((v=e[s])<n&&++t>g&&o("overflow"),v==n){for(p=t,a=w;h=a<=l?x:a>=l+b?b:a-l,!(p<h);a+=w)E=p-h,I=w-h,F.push(L(f(h+E%I,0))),p=T(E/I);F.push(L(f(p,0))),l=c(t,C,u==i),t=0,++u}++t,++n}return F.join("")}var d="object"==typeof exports&&exports&&!exports.nodeType&&exports,p="object"==typeof module&&module&&!module.nodeType&&module,a="object"==typeof global&&global;a.global!==a&&a.window!==a&&a.self!==a||(e=a);var h,v,g=2147483647,w=36,x=1,b=26,y=38,C=700,m=72,j=128,A="-",I=/^xn--/,E=/[^\x20-\x7E]/,F=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S=w-x,T=Math.floor,L=String.fromCharCode;if(h={version:"1.4.1",ucs2:{decode:r,encode:u},decode:l,encode:s,toASCII:function(e){return t(e,function(e){return E.test(e)?"xn--"+s(e):e})},toUnicode:function(e){return t(e,function(e){return I.test(e)?l(e.slice(4).toLowerCase()):e})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return h});else if(d&&p)if(module.exports==d)p.exports=h;else for(v in h)h.hasOwnProperty(v)&&(d[v]=h[v]);else e.punycode=h}(this);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],181:[function(require,module,exports){
"use strict";function hasOwnProperty(r,e){return Object.prototype.hasOwnProperty.call(r,e)}module.exports=function(r,e,t,n){e=e||"&",t=t||"=";var o={};if("string"!=typeof r||0===r.length)return o;var a=/\+/g;r=r.split(e);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var p=r.length;s>0&&p>s&&(p=s);for(var y=0;y<p;++y){var u,c,i,l,f=r[y].replace(a,"%20"),v=f.indexOf(t);v>=0?(u=f.substr(0,v),c=f.substr(v+1)):(u=f,c=""),i=decodeURIComponent(u),l=decodeURIComponent(c),hasOwnProperty(o,i)?isArray(o[i])?o[i].push(l):o[i]=[o[i],l]:o[i]=l}return o};var isArray=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};

},{}],182:[function(require,module,exports){
"use strict";function map(r,e){if(r.map)return r.map(e);for(var t=[],n=0;n<r.length;n++)t.push(e(r[n],n));return t}var stringifyPrimitive=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}};module.exports=function(r,e,t,n){return e=e||"&",t=t||"=",null===r&&(r=void 0),"object"==typeof r?map(objectKeys(r),function(n){var i=encodeURIComponent(stringifyPrimitive(n))+t;return isArray(r[n])?map(r[n],function(r){return i+encodeURIComponent(stringifyPrimitive(r))}).join(e):i+encodeURIComponent(stringifyPrimitive(r[n]))}).join(e):n?encodeURIComponent(stringifyPrimitive(n))+t+encodeURIComponent(stringifyPrimitive(r)):""};var isArray=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)},objectKeys=Object.keys||function(r){var e=[];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.push(t);return e};

},{}],183:[function(require,module,exports){
"use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode");

},{"./decode":181,"./encode":182}],184:[function(require,module,exports){
function Recs(){if(!(this instanceof Recs))return new Recs;var n=nano(),e=[],r=[],t=[];this.system=function(n,t,o,c){"string"!=typeof n&&(c=o,o=t,t=n),"function"!=typeof o||c?r.push({requirements1:t,requirements2:o,func:c}):(c=o,e.push({requirements:t,func:c}))},this.entity=function(e,r,o){Array.isArray(e)&&(o=r,r=e,e="");var c=n.createEntity();return c._name=e,r.forEach(function(n){c.addComponent(n)}),c.send=function(n){var e=this,r=Array.prototype.slice.call(arguments).slice(1);r.unshift(e),t.forEach(function(t){t.name===n&&e.hasAllComponents(t.requirements)&&t.func.apply(e,r)})},o&&o(c),c},this.recv=function(n,e,r){t.push({requirements:n,name:e,func:r})},this.tick=function(){var t=Array.prototype.slice.call(arguments);e.forEach(function(e){n.queryComponents(e.requirements).forEach(function(n){e.func.apply(null,[n].concat(t))})}),r.forEach(function(e){for(var r=n.queryComponents(e.requirements1),o=n.queryComponents(e.requirements2),c=0;c<r.length;c++)for(var u=r[c],a=0;a<o.length&&u._manager;a++){var i=o[a];u!==i&&(i._manager&&e.func.apply(null,[u,i].concat(t)))}})}}module.exports=Recs;var nano=require("nano-ecs");

},{"nano-ecs":7}],185:[function(require,module,exports){
"use strict";module.exports=function(t,e,r){var n,o=t.length;if(!(e>=o||0===r)){var f=o-(r=e+r>o?o-e:r);for(n=e;n<f;++n)t[n]=t[n+r];t.length=f}};

},{}],186:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_miniSignals=require("mini-signals"),_miniSignals2=_interopRequireDefault(_miniSignals),_parseUri=require("parse-uri"),_parseUri2=_interopRequireDefault(_parseUri),_async=require("./async"),async=_interopRequireWildcard(_async),_Resource=require("./Resource"),_Resource2=_interopRequireDefault(_Resource),MAX_PROGRESS=100,rgxExtractUrlHash=/(#[\w-]+)?$/,Loader=function(){function e(){var r=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;_classCallCheck(this,e),this.baseUrl=t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(e,t){return r._loadResource(e,t)},this._queue=async.queue(this._boundLoadResource,s),this._queue.pause(),this.resources={},this.onProgress=new _miniSignals2.default,this.onError=new _miniSignals2.default,this.onLoad=new _miniSignals2.default,this.onStart=new _miniSignals2.default,this.onComplete=new _miniSignals2.default}return e.prototype.add=function(e,r,t,s){if(Array.isArray(e)){for(var i=0;i<e.length;++i)this.add(e[i]);return this}if("object"===(void 0===e?"undefined":_typeof(e))&&(s=r||e.callback||e.onComplete,t=e,r=e.url,e=e.name||e.key||e.url),"string"!=typeof r&&(s=t,t=r,r=e),"string"!=typeof r)throw new Error("No url passed to add resource to loader.");if("function"==typeof t&&(s=t,t=null),this.loading&&(!t||!t.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(r=this._prepareUrl(r),this.resources[e]=new _Resource2.default(e,r,t),"function"==typeof s&&this.resources[e].onAfterMiddleware.once(s),this.loading){for(var o=t.parentResource,n=[],a=0;a<o.children.length;++a)o.children[a].isComplete||n.push(o.children[a]);var u=o.progressChunk*(n.length+1)/(n.length+2);o.children.push(this.resources[e]),o.progressChunk=u;for(var l=0;l<n.length;++l)n[l].progressChunk=u;this.resources[e].progressChunk=u}return this._queue.push(this.resources[e]),this},e.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},e.prototype.use=function(e){return this._afterMiddleware.push(e),this},e.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var e in this.resources){var r=this.resources[e];r._onLoadBinding&&r._onLoadBinding.detach(),r.isLoading&&r.abort()}return this.resources={},this},e.prototype.load=function(e){if("function"==typeof e&&this.onComplete.once(e),this.loading)return this;for(var r=100/this._queue._tasks.length,t=0;t<this._queue._tasks.length;++t)this._queue._tasks[t].data.progressChunk=r;return this.loading=!0,this.onStart.dispatch(this),this._queue.resume(),this},e.prototype._prepareUrl=function(e){var r=(0,_parseUri2.default)(e,{strictMode:!0}),t=void 0;if(t=r.protocol||!r.path||0===e.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e,this.defaultQueryString){var s=rgxExtractUrlHash.exec(t)[0];-1!==(t=t.substr(0,t.length-s.length)).indexOf("?")?t+="&"+this.defaultQueryString:t+="?"+this.defaultQueryString,t+=s}return t},e.prototype._loadResource=function(e,r){var t=this;e._dequeue=r,async.eachSeries(this._beforeMiddleware,function(r,s){r.call(t,e,function(){s(e.isComplete?{}:null)})},function(){e.isComplete?t._onLoad(e):(e._onLoadBinding=e.onComplete.once(t._onLoad,t),e.load())},!0)},e.prototype._onComplete=function(){this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(e){var r=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),async.eachSeries(this._afterMiddleware,function(t,s){t.call(r,e,s)},function(){e.onAfterMiddleware.dispatch(e),r.progress+=e.progressChunk,r.onProgress.dispatch(r,e),e.error?r.onError.dispatch(e.error,r,e):r.onLoad.dispatch(r,e),r._resourcesParsing.splice(r._resourcesParsing.indexOf(e),1),r._queue.idle()&&0===r._resourcesParsing.length&&(r.progress=MAX_PROGRESS,r._onComplete())},!0)},e}();exports.default=Loader;

},{"./Resource":187,"./async":188,"mini-signals":6,"parse-uri":11}],187:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _noop(){}function setExtMap(e,t,r){t&&0===t.indexOf(".")&&(t=t.substring(1)),t&&(e[t]=r)}function reqType(e){return e.toString().replace("object ","")}exports.__esModule=!0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),_parseUri=require("parse-uri"),_parseUri2=_interopRequireDefault(_parseUri),_miniSignals=require("mini-signals"),_miniSignals2=_interopRequireDefault(_miniSignals),useXdr=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),tempAnchor=null,STATUS_NONE=0,STATUS_OK=200,STATUS_EMPTY=204,STATUS_IE_BUG_EMPTY=1223,STATUS_TYPE_OK=2,Resource=function(){function e(t,r,s){if(_classCallCheck(this,e),"string"!=typeof t||"string"!=typeof r)throw new Error("Both name and url are required for constructing a resource.");s=s||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,0===r.indexOf("data:")),this.name=t,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===s.crossOrigin?"anonymous":s.crossOrigin,this.loadType=s.loadType||this._determineLoadType(),this.xhrType=s.xhrType,this.metadata=s.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=_noop,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new _miniSignals2.default,this.onProgress=new _miniSignals2.default,this.onComplete=new _miniSignals2.default,this.onAfterMiddleware=new _miniSignals2.default}return e.setExtensionLoadType=function(t,r){setExtMap(e._loadTypeMap,t,r)},e.setExtensionXhrType=function(t,r){setExtMap(e._xhrTypeMap,t,r)},e.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},e.prototype.load=function(t){var r=this;if(!this.isLoading)if(this.isComplete)t&&setTimeout(function(){return t(r)},1);else switch(t&&this.onComplete.once(t),this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:useXdr&&this.crossOrigin?this._loadXdr():this._loadXhr()}},e.prototype._hasFlag=function(e){return!!(this._flags&e)},e.prototype._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},e.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===e&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},e.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===e&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(e),null!==this.data){if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(e,this.url[r],Array.isArray(t)?t[r]:t));else{var s=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(s)?s[0]:s))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()}else this.abort("Unsupported element: "+e)},e.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=e.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},e.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XDomainRequest;e.timeout=5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXdrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},e.prototype._createSource=function(e,t,r){r||(r=e+"/"+this._getExtension(t));var s=document.createElement("source");return s.src=t,s.type=r,s},e.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},e.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},e.prototype._xhrOnError=function(){var e=this.xhr;this.abort(reqType(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},e.prototype._xhrOnAbort=function(){this.abort(reqType(this.xhr)+" Request was aborted by the user.")},e.prototype._xdrOnTimeout=function(){this.abort(reqType(this.xhr)+" Request timed out.")},e.prototype._xhrOnLoad=function(){var t=this.xhr,r="",s=void 0===t.status?STATUS_OK:t.status;""!==t.responseType&&"text"!==t.responseType&&void 0!==t.responseType||(r=t.responseText),s===STATUS_NONE&&r.length>0?s=STATUS_OK:s===STATUS_IE_BUG_EMPTY&&(s=STATUS_EMPTY);if((s/100|0)===STATUS_TYPE_OK){if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=e.TYPE.JSON}catch(e){return void this.abort("Error trying to parse loaded json: "+e)}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var i=new DOMParser;this.data=i.parseFromString(r,"text/xml")}else{var o=document.createElement("div");o.innerHTML=r,this.data=o}this.type=e.TYPE.XML}catch(e){return void this.abort("Error trying to parse loaded xml: "+e)}else this.data=t.response||r;this.complete()}else this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL)},e.prototype._determineCrossOrigin=function(e,t){if(0===e.indexOf("data:"))return"";t=t||window.location,tempAnchor||(tempAnchor=document.createElement("a")),tempAnchor.href=e;var r=!(e=(0,_parseUri2.default)(tempAnchor.href,{strictMode:!0})).port&&""===t.port||e.port===t.port,s=e.protocol?e.protocol+":":"";return e.host===t.hostname&&r&&s===t.protocol?"":"anonymous"},e.prototype._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},e.prototype._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},e.prototype._getExtension=function(){var e=this.url,t="";if(this.isDataUrl){var r=e.indexOf("/");t=e.substring(r+1,e.indexOf(";",r))}else{var s=e.indexOf("?"),i=e.indexOf("#"),o=Math.min(s>-1?s:e.length,i>-1?i:e.length);t=(e=e.substring(0,o)).substring(e.lastIndexOf(".")+1)}return t.toLowerCase()},e.prototype._getMimeFromXhrType=function(t){switch(t){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},_createClass(e,[{key:"isDataUrl",get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)}}]),e}();exports.default=Resource,Resource.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},Resource.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},Resource.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},Resource.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},Resource._loadTypeMap={gif:Resource.LOAD_TYPE.IMAGE,png:Resource.LOAD_TYPE.IMAGE,bmp:Resource.LOAD_TYPE.IMAGE,jpg:Resource.LOAD_TYPE.IMAGE,jpeg:Resource.LOAD_TYPE.IMAGE,tif:Resource.LOAD_TYPE.IMAGE,tiff:Resource.LOAD_TYPE.IMAGE,webp:Resource.LOAD_TYPE.IMAGE,tga:Resource.LOAD_TYPE.IMAGE,svg:Resource.LOAD_TYPE.IMAGE,"svg+xml":Resource.LOAD_TYPE.IMAGE,mp3:Resource.LOAD_TYPE.AUDIO,ogg:Resource.LOAD_TYPE.AUDIO,wav:Resource.LOAD_TYPE.AUDIO,mp4:Resource.LOAD_TYPE.VIDEO,webm:Resource.LOAD_TYPE.VIDEO},Resource._xhrTypeMap={xhtml:Resource.XHR_RESPONSE_TYPE.DOCUMENT,html:Resource.XHR_RESPONSE_TYPE.DOCUMENT,htm:Resource.XHR_RESPONSE_TYPE.DOCUMENT,xml:Resource.XHR_RESPONSE_TYPE.DOCUMENT,tmx:Resource.XHR_RESPONSE_TYPE.DOCUMENT,svg:Resource.XHR_RESPONSE_TYPE.DOCUMENT,tsx:Resource.XHR_RESPONSE_TYPE.DOCUMENT,gif:Resource.XHR_RESPONSE_TYPE.BLOB,png:Resource.XHR_RESPONSE_TYPE.BLOB,bmp:Resource.XHR_RESPONSE_TYPE.BLOB,jpg:Resource.XHR_RESPONSE_TYPE.BLOB,jpeg:Resource.XHR_RESPONSE_TYPE.BLOB,tif:Resource.XHR_RESPONSE_TYPE.BLOB,tiff:Resource.XHR_RESPONSE_TYPE.BLOB,webp:Resource.XHR_RESPONSE_TYPE.BLOB,tga:Resource.XHR_RESPONSE_TYPE.BLOB,json:Resource.XHR_RESPONSE_TYPE.JSON,text:Resource.XHR_RESPONSE_TYPE.TEXT,txt:Resource.XHR_RESPONSE_TYPE.TEXT,ttf:Resource.XHR_RESPONSE_TYPE.BUFFER,otf:Resource.XHR_RESPONSE_TYPE.BUFFER},Resource.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";

},{"mini-signals":6,"parse-uri":11}],188:[function(require,module,exports){
"use strict";function _noop(){}function eachSeries(n,e,t,r){var u=0,o=n.length;!function s(a){a||u===o?t&&t(a):r?setTimeout(function(){e(n[u++],s)},1):e(n[u++],s)}()}function onlyOnce(n){return function(){if(null===n)throw new Error("Callback was already called.");var e=n;n=null,e.apply(this,arguments)}}function queue(n,e){function t(n,e,t){if(null!=t&&"function"!=typeof t)throw new Error("task callback must be a function");if(u.started=!0,null==n&&u.idle())setTimeout(function(){return u.drain()},1);else{var r={data:n,callback:"function"==typeof t?t:_noop};e?u._tasks.unshift(r):u._tasks.push(r),setTimeout(function(){return u.process()},1)}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var r=0,u={_tasks:[],concurrency:e,saturated:_noop,unsaturated:_noop,buffer:e/4,empty:_noop,drain:_noop,error:_noop,started:!1,paused:!1,push:function(n,e){t(n,!1,e)},kill:function(){r=0,u.drain=_noop,u.started=!1,u._tasks=[]},unshift:function(n,e){t(n,!0,e)},process:function(){for(;!u.paused&&r<u.concurrency&&u._tasks.length;){var e=u._tasks.shift();0===u._tasks.length&&u.empty(),(r+=1)===u.concurrency&&u.saturated(),n(e.data,onlyOnce(function(n){return function(){r-=1,n.callback.apply(n,arguments),null!=arguments[0]&&u.error(arguments[0],n.data),r<=u.concurrency-u.buffer&&u.unsaturated(),u.idle()&&u.drain(),u.process()}}(e)))}},length:function(){return u._tasks.length},running:function(){return r},idle:function(){return u._tasks.length+r===0},pause:function(){!0!==u.paused&&(u.paused=!0)},resume:function(){if(!1!==u.paused){u.paused=!1;for(var n=1;n<=u.concurrency;n++)u.process()}}};return u}exports.__esModule=!0,exports.eachSeries=eachSeries,exports.queue=queue;

},{}],189:[function(require,module,exports){
"use strict";function encodeBinary(e){for(var r="",t=0;t<e.length;){for(var n=[0,0,0],a=[0,0,0,0],o=0;o<n.length;++o)t<e.length?n[o]=255&e.charCodeAt(t++):n[o]=0;a[0]=n[0]>>2,a[1]=(3&n[0])<<4|n[1]>>4,a[2]=(15&n[1])<<2|n[2]>>6,a[3]=63&n[2];switch(t-(e.length-1)){case 2:a[3]=64,a[2]=64;break;case 1:a[3]=64}for(var c=0;c<a.length;++c)r+=_keyStr.charAt(a[c])}return r}exports.__esModule=!0,exports.encodeBinary=encodeBinary;var _keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";

},{}],190:[function(require,module,exports){
"use strict";var Loader=require("./Loader").default,Resource=require("./Resource").default,async=require("./async"),b64=require("./b64");Loader.Resource=Resource,Loader.async=async,Loader.base64=b64,module.exports=Loader,module.exports.default=Loader;

},{"./Loader":186,"./Resource":187,"./async":188,"./b64":189}],191:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function blobMiddlewareFactory(){return function(e,t){if(e.data){if(e.xhr&&e.xhrType===_Resource2.default.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof e.data){if(0===e.data.type.indexOf("image")){var o=function(){var o=Url.createObjectURL(e.data);return e.blob=e.data,e.data=new Image,e.data.src=o,e.type=_Resource2.default.TYPE.IMAGE,e.data.onload=function(){Url.revokeObjectURL(o),e.data.onload=null,t()},{v:void 0}}();if("object"===(void 0===o?"undefined":_typeof(o)))return o.v}}else{var r=e.xhr.getResponseHeader("content-type");if(r&&0===r.indexOf("image"))return e.data=new Image,e.data.src="data:"+r+";base64,"+_b2.default.encodeBinary(e.xhr.responseText),e.type=_Resource2.default.TYPE.IMAGE,void(e.data.onload=function(){e.data.onload=null,t()})}t()}else t()}}exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.blobMiddlewareFactory=blobMiddlewareFactory;var _Resource=require("../../Resource"),_Resource2=_interopRequireDefault(_Resource),_b=require("../../b64"),_b2=_interopRequireDefault(_b),Url=window.URL||window.webkitURL;

},{"../../Resource":187,"../../b64":189}],192:[function(require,module,exports){
function reusePool(e,t){return new ReusePool(e,t)}function ReusePool(e,t){this._factory=e,this._recycled=[],t=t||EMPTY,this._prepare=t.prepare||NO_OP,this._max=t.max||1/0}var EMPTY={},NO_OP=function(){};module.exports=reusePool,ReusePool.prototype.get=function(){if(this._recycled.length){var e=this._recycled.pop();return this._prepare(e),e}return this._factory()},ReusePool.prototype.recycle=function(e){this._recycled.length<this._max&&this._recycled.push(e)};

},{}],193:[function(require,module,exports){
module.exports={extends:require("./lib/extends.js"),mixin:require("./lib/mixin.js"),getArguments:require("./lib/getArguments.js"),getName:require("./lib/getName.js")};

},{"./lib/extends.js":194,"./lib/getArguments.js":195,"./lib/getName.js":196,"./lib/mixin.js":197}],194:[function(require,module,exports){
function extends_(t,e){for(var o in e)!t.hasOwnProperty(o)&&e.hasOwnProperty(o)&&(t[o]=e[o]);if(t.Super=e,Object.create instanceof Function)t.prototype=Object.create(e.prototype,{constructor:{value:t}});else{var r=makeT(t);r.prototype=e.prototype,t.prototype=new r}return t}function makeT(t){return function(){this.constructor=t}}module.exports=extends_;

},{}],195:[function(require,module,exports){
function getArguments(r){var t=[],e=r.toString().match(FUNCTION_ARGS);if(e){e=e[1].replace(/[ ]*,[ ]*/,",").split(",");for(var n=0;n<e.length;n++){var a=e[n].replace(/^\s+|\s+$/g,"");a&&t.push(a)}}return t}module.exports=getArguments;var FUNCTION_ARGS=/^\w*function[^\(]*\(([^\)]+)/;

},{}],196:[function(require,module,exports){
function getName(n){var t="";if(n instanceof Function){if(n.name)return n.name;var e=n.toString().match(FUNCTION_NAME);e&&(t=e[1])}else n&&n.constructor instanceof Function&&(t=getName(n.constructor));return t}module.exports=getName;var FUNCTION_NAME=/function\s+([^\s(]+)/;

},{}],197:[function(require,module,exports){
function mixin_(o,n){if(n instanceof Function){for(var i in n)o[i]=n[i];n=n.prototype}for(var r in n)n.hasOwnProperty(r)&&(o.prototype[r]=n[r])}module.exports=mixin_;

},{}],198:[function(require,module,exports){
"use strict";function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function urlParse(t,s,e){if(t&&util.isObject(t)&&t instanceof Url)return t;var h=new Url;return h.parse(t,s,e),h}function urlFormat(t){return util.isString(t)&&(t=urlParse(t)),t instanceof Url?t.format():Url.prototype.format.call(t)}function urlResolve(t,s){return urlParse(t,!1,!0).resolve(s)}function urlResolveObject(t,s){return t?urlParse(t,!1,!0).resolveObject(s):s}var punycode=require("punycode"),util=require("./util");exports.parse=urlParse,exports.resolve=urlResolve,exports.resolveObject=urlResolveObject,exports.format=urlFormat,exports.Url=Url;var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r","\n","\t"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=require("querystring");Url.prototype.parse=function(t,s,e){if(!util.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var h=t.indexOf("?"),r=-1!==h&&h<t.indexOf("#")?"?":"#",a=t.split(r);a[0]=a[0].replace(/\\/g,"/");var o=t=a.join(r);if(o=o.trim(),!e&&1===t.split("#").length){var n=simplePathPattern.exec(o);if(n)return this.path=o,this.href=o,this.pathname=n[1],n[2]?(this.search=n[2],this.query=s?querystring.parse(this.search.substr(1)):this.search.substr(1)):s&&(this.search="",this.query={}),this}var i=protocolPattern.exec(o);if(i){var l=(i=i[0]).toLowerCase();this.protocol=l,o=o.substr(i.length)}if(e||i||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var u="//"===o.substr(0,2);!u||i&&hostlessProtocol[i]||(o=o.substr(2),this.slashes=!0)}if(!hostlessProtocol[i]&&(u||i&&!slashedProtocol[i])){for(var p=-1,c=0;c<hostEndingChars.length;c++){-1!==(v=o.indexOf(hostEndingChars[c]))&&(-1===p||v<p)&&(p=v)}var f,m;-1!==(m=-1===p?o.lastIndexOf("@"):o.lastIndexOf("@",p))&&(f=o.slice(0,m),o=o.slice(m+1),this.auth=decodeURIComponent(f)),p=-1;for(c=0;c<nonHostChars.length;c++){var v=o.indexOf(nonHostChars[c]);-1!==v&&(-1===p||v<p)&&(p=v)}-1===p&&(p=o.length),this.host=o.slice(0,p),o=o.slice(p),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var y=this.hostname.split(/\./),c=0,P=y.length;c<P;c++){var d=y[c];if(d&&!d.match(hostnamePartPattern)){for(var b="",q=0,O=d.length;q<O;q++)d.charCodeAt(q)>127?b+="x":b+=d[q];if(!b.match(hostnamePartPattern)){var j=y.slice(0,c),x=y.slice(c+1),U=d.match(hostnamePartStart);U&&(j.push(U[1]),x.unshift(U[2])),x.length&&(o="/"+x.join(".")+o),this.hostname=j.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=punycode.toASCII(this.hostname));var C=this.port?":"+this.port:"",A=this.hostname||"";this.host=A+C,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!unsafeProtocol[l])for(var c=0,P=autoEscape.length;c<P;c++){var w=autoEscape[c];if(-1!==o.indexOf(w)){var E=encodeURIComponent(w);E===w&&(E=escape(w)),o=o.split(w).join(E)}}var I=o.indexOf("#");-1!==I&&(this.hash=o.substr(I),o=o.slice(0,I));var R=o.indexOf("?");if(-1!==R?(this.search=o.substr(R),this.query=o.substr(R+1),s&&(this.query=querystring.parse(this.query)),o=o.slice(0,R)):s&&(this.search="",this.query={}),o&&(this.pathname=o),slashedProtocol[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var C=this.pathname||"",S=this.search||"";this.path=C+S}return this.href=this.format(),this},Url.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var s=this.protocol||"",e=this.pathname||"",h=this.hash||"",r=!1,a="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&util.isObject(this.query)&&Object.keys(this.query).length&&(a=querystring.stringify(this.query));var o=this.search||a&&"?"+a||"";return s&&":"!==s.substr(-1)&&(s+=":"),this.slashes||(!s||slashedProtocol[s])&&!1!==r?(r="//"+(r||""),e&&"/"!==e.charAt(0)&&(e="/"+e)):r||(r=""),h&&"#"!==h.charAt(0)&&(h="#"+h),o&&"?"!==o.charAt(0)&&(o="?"+o),e=e.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),o=o.replace("#","%23"),s+r+e+o+h},Url.prototype.resolve=function(t){return this.resolveObject(urlParse(t,!1,!0)).format()},Url.prototype.resolveObject=function(t){if(util.isString(t)){var s=new Url;s.parse(t,!1,!0),t=s}for(var e=new Url,h=Object.keys(this),r=0;r<h.length;r++){var a=h[r];e[a]=this[a]}if(e.hash=t.hash,""===t.href)return e.href=e.format(),e;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),n=0;n<o.length;n++){var i=o[n];"protocol"!==i&&(e[i]=t[i])}return slashedProtocol[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(t.protocol&&t.protocol!==e.protocol){if(!slashedProtocol[t.protocol]){for(var l=Object.keys(t),u=0;u<l.length;u++){var p=l[u];e[p]=t[p]}return e.href=e.format(),e}if(e.protocol=t.protocol,t.host||hostlessProtocol[t.protocol])e.pathname=t.pathname;else{for(d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),e.pathname=d.join("/")}if(e.search=t.search,e.query=t.query,e.host=t.host||"",e.auth=t.auth,e.hostname=t.hostname||t.host,e.port=t.port,e.pathname||e.search){var c=e.pathname||"",f=e.search||"";e.path=c+f}return e.slashes=e.slashes||t.slashes,e.href=e.format(),e}var m=e.pathname&&"/"===e.pathname.charAt(0),v=t.host||t.pathname&&"/"===t.pathname.charAt(0),g=v||m||e.host&&t.pathname,y=g,P=e.pathname&&e.pathname.split("/")||[],d=t.pathname&&t.pathname.split("/")||[],b=e.protocol&&!slashedProtocol[e.protocol];if(b&&(e.hostname="",e.port=null,e.host&&(""===P[0]?P[0]=e.host:P.unshift(e.host)),e.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),g=g&&(""===d[0]||""===P[0])),v)e.host=t.host||""===t.host?t.host:e.host,e.hostname=t.hostname||""===t.hostname?t.hostname:e.hostname,e.search=t.search,e.query=t.query,P=d;else if(d.length)P||(P=[]),P.pop(),P=P.concat(d),e.search=t.search,e.query=t.query;else if(!util.isNullOrUndefined(t.search)){if(b){e.hostname=e.host=P.shift();(C=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@"))&&(e.auth=C.shift(),e.host=e.hostname=C.shift())}return e.search=t.search,e.query=t.query,util.isNull(e.pathname)&&util.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!P.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var q=P.slice(-1)[0],O=(e.host||t.host||P.length>1)&&("."===q||".."===q)||""===q,j=0,x=P.length;x>=0;x--)"."===(q=P[x])?P.splice(x,1):".."===q?(P.splice(x,1),j++):j&&(P.splice(x,1),j--);if(!g&&!y)for(;j--;j)P.unshift("..");!g||""===P[0]||P[0]&&"/"===P[0].charAt(0)||P.unshift(""),O&&"/"!==P.join("/").substr(-1)&&P.push("");var U=""===P[0]||P[0]&&"/"===P[0].charAt(0);if(b){e.hostname=e.host=U?"":P.length?P.shift():"";var C=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@");C&&(e.auth=C.shift(),e.host=e.hostname=C.shift())}return(g=g||e.host&&P.length)&&!U&&P.unshift(""),P.length?e.pathname=P.join("/"):(e.pathname=null,e.path=null),util.isNull(e.pathname)&&util.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=t.auth||e.auth,e.slashes=e.slashes||t.slashes,e.href=e.format(),e},Url.prototype.parseHost=function(){var t=this.host,s=portPattern.exec(t);s&&(":"!==(s=s[0])&&(this.port=s.substr(1)),t=t.substr(0,t.length-s.length)),t&&(this.hostname=t)};

},{"./util":199,"punycode":180,"querystring":183}],199:[function(require,module,exports){
"use strict";module.exports={isString:function(n){return"string"==typeof n},isObject:function(n){return"object"==typeof n&&null!==n},isNull:function(n){return null===n},isNullOrUndefined:function(n){return null==n}};

},{}],200:[function(require,module,exports){
"function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};

},{}],201:[function(require,module,exports){
module.exports=function(o){return o&&"object"==typeof o&&"function"==typeof o.copy&&"function"==typeof o.fill&&"function"==typeof o.readUInt8};

},{}],202:[function(require,module,exports){
(function (process,global){
function inspect(e,r){var t={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),isBoolean(r)?t.showHidden=r:r&&exports._extend(t,r),isUndefined(t.showHidden)&&(t.showHidden=!1),isUndefined(t.depth)&&(t.depth=2),isUndefined(t.colors)&&(t.colors=!1),isUndefined(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=stylizeWithColor),formatValue(t,e,t.depth)}function stylizeWithColor(e,r){var t=inspect.styles[r];return t?"["+inspect.colors[t][0]+"m"+e+"["+inspect.colors[t][1]+"m":e}function stylizeNoColor(e,r){return e}function arrayToHash(e){var r={};return e.forEach(function(e,t){r[e]=!0}),r}function formatValue(e,r,t){if(e.customInspect&&r&&isFunction(r.inspect)&&r.inspect!==exports.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(t,e);return isString(n)||(n=formatValue(e,n,t)),n}var i=formatPrimitive(e,r);if(i)return i;var o=Object.keys(r),s=arrayToHash(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(r)),isError(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return formatError(r);if(0===o.length){if(isFunction(r)){var u=r.name?": "+r.name:"";return e.stylize("[Function"+u+"]","special")}if(isRegExp(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(isDate(r))return e.stylize(Date.prototype.toString.call(r),"date");if(isError(r))return formatError(r)}var c="",a=!1,l=["{","}"];if(isArray(r)&&(a=!0,l=["[","]"]),isFunction(r)){c=" [Function"+(r.name?": "+r.name:"")+"]"}if(isRegExp(r)&&(c=" "+RegExp.prototype.toString.call(r)),isDate(r)&&(c=" "+Date.prototype.toUTCString.call(r)),isError(r)&&(c=" "+formatError(r)),0===o.length&&(!a||0==r.length))return l[0]+c+l[1];if(t<0)return isRegExp(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special");e.seen.push(r);var p;return p=a?formatArray(e,r,t,s,o):o.map(function(n){return formatProperty(e,r,t,s,n,a)}),e.seen.pop(),reduceToSingleString(p,c,l)}function formatPrimitive(e,r){if(isUndefined(r))return e.stylize("undefined","undefined");if(isString(r)){var t="'"+JSON.stringify(r).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(t,"string")}return isNumber(r)?e.stylize(""+r,"number"):isBoolean(r)?e.stylize(""+r,"boolean"):isNull(r)?e.stylize("null","null"):void 0}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,r,t,n,i){for(var o=[],s=0,u=r.length;s<u;++s)hasOwnProperty(r,String(s))?o.push(formatProperty(e,r,t,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(formatProperty(e,r,t,n,i,!0))}),o}function formatProperty(e,r,t,n,i,o){var s,u,c;if((c=Object.getOwnPropertyDescriptor(r,i)||{value:r[i]}).get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),hasOwnProperty(n,i)||(s="["+i+"]"),u||(e.seen.indexOf(c.value)<0?(u=isNull(t)?formatValue(e,c.value,null):formatValue(e,c.value,t-1)).indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),isUndefined(s)){if(o&&i.match(/^\d+$/))return u;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function reduceToSingleString(e,r,t){var n=0;return e.reduce(function(e,r){return n++,r.indexOf("\n")>=0&&n++,e+r.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?t[0]+(""===r?"":r+"\n ")+" "+e.join(",\n  ")+" "+t[1]:t[0]+r+" "+e.join(", ")+" "+t[1]}function isArray(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isSymbol(e){return"symbol"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"==typeof e&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return e<10?"0"+e.toString(10):e.toString(10)}function timestamp(){var e=new Date,r=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(":");return[e.getDate(),months[e.getMonth()],r].join(" ")}function hasOwnProperty(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var formatRegExp=/%[sdj%]/g;exports.format=function(e){if(!isString(e)){for(var r=[],t=0;t<arguments.length;t++)r.push(inspect(arguments[t]));return r.join(" ")}for(var t=1,n=arguments,i=n.length,o=String(e).replace(formatRegExp,function(e){if("%%"===e)return"%";if(t>=i)return e;switch(e){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch(e){return"[Circular]"}default:return e}}),s=n[t];t<i;s=n[++t])isNull(s)||!isObject(s)?o+=" "+s:o+=" "+inspect(s);return o},exports.deprecate=function(e,r){if(isUndefined(global.process))return function(){return exports.deprecate(e,r).apply(this,arguments)};if(!0===process.noDeprecation)return e;var t=!1;return function(){if(!t){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),t=!0}return e.apply(this,arguments)}};var debugEnviron,debugs={};exports.debuglog=function(e){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!debugs[e])if(new RegExp("\\b"+e+"\\b","i").test(debugEnviron)){var r=process.pid;debugs[e]=function(){var t=exports.format.apply(exports,arguments);console.error("%s %d: %s",e,r,t)}}else debugs[e]=function(){};return debugs[e]},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=require("./support/isBuffer");var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(e,r){if(!r||!isObject(r))return e;for(var t=Object.keys(r),n=t.length;n--;)e[t[n]]=r[t[n]];return e};

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./support/isBuffer":201,"_process":179,"inherits":200}],203:[function(require,module,exports){
function Body(){this.mass=0,this.pos=new Pixi.Point(0,0),this.vel=new Pixi.Point(0,0),this.rot=0,this.rotVel=0}function Sprite(){var e=new Pixi.Sprite;return e.anchor.set(.5),app.stage.addChild(e),e}function Rocket(){this.power=.01,this.active=!1}function Playable(){this.keys=[]}var Ecs=require("recs"),Pixi=require("pixi.js"),ecs=Ecs(),app=new Pixi.Application(window.innerWidth,window.innerHeight,{backgroundColor:1087931});app.renderer.autoResize=!0,document.body.appendChild(app.view);var Planet=[Body,Sprite],Ship=[Body,Sprite,Rocket,Playable];ecs.entity(Planet,function(e){e.body.mass=1e3,e.body.pos.x=app.renderer.width/2,e.body.pos.y=app.renderer.height/2;var o=Pixi.Sprite.fromImage("images/planet.png");o.height=100,o.width=100,o.anchor.set(.5),e.sprite.addChild(o)}),ecs.entity(Ship,function(e){e.body.mass=1,e.body.pos.x=app.renderer.width/2,e.body.pos.y=app.renderer.height/4,e.body.vel.x=2,e.body.vel.y=0,e.sprite.scale.x=.5,e.sprite.scale.y=.5;var o=Pixi.Sprite.fromImage("images/rocket.png");o.scale=new Pixi.Point(.25,.25),o.anchor.set(.5),e.sprite.addChild(o),e.body.rotVel=0,document.body.addEventListener("keydown",function(o){~e.playable.keys.indexOf(o.key)||e.playable.keys.push(o.key)}),document.body.addEventListener("keyup",function(o){var t=e.playable.keys.indexOf(o.key);e.playable.keys.splice(t,1)})}),ecs.system([Body],function(e,o){e.body.pos.x+=e.body.vel.x*o,e.body.pos.y+=e.body.vel.y*o,e.body.rot+=e.body.rotVel*o}),ecs.system([Body],[Body],function(e,o,t){var i=new Pixi.Point(e.body.pos.x-o.body.pos.x,e.body.pos.y-o.body.pos.y),s=Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))+1e-4,y=e.body.mass/Math.pow(s,2);o.body.vel.x+=y*(i.x/s)*t,o.body.vel.y+=y*(i.y/s)*t}),ecs.system([Body,Sprite],function(e){e.sprite.x=e.body.pos.x,e.sprite.y=e.body.pos.y,e.sprite.rotation=e.body.rot}),ecs.system([Body,Rocket],function(e,o){if(e.rocket.active){var t=e.rocket.power,i=new Pixi.Point(Math.sin(e.body.rot),-Math.cos(e.body.rot));e.body.vel.x+=t*i.x*o,e.body.vel.y+=t*i.y*o}}),ecs.system([Body,Playable],function(e){var o=e.playable.keys;o.includes("ArrowRight")&&(e.body.rotVel+=.002),o.includes("ArrowLeft")&&(e.body.rotVel-=.002),o.includes("Enter")||o.includes(" ")?e.rocket.active=!0:e.rocket.active=!1}),app.ticker.add(function(e){ecs.tick(e)});

},{"pixi.js":145,"recs":184}]},{},[203]);
